;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="31253142-7602-4a31-bf9b-b1fbe63444a1")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3259,100387,e=>{"use strict";var t=e.i(478902),s=e.i(153545),a=e.i(933505);e.s(["ChevronRightIcon",()=>a.default],100387);var a=a,r=e.i(389959),i=e.i(843778);let n=r.forwardRef(({...e},s)=>(0,t.jsx)("nav",{ref:s,"aria-label":"breadcrumb",...e}));n.displayName="Breadcrumb";let o=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("ol",{ref:a,className:(0,i.cn)("flex flex-wrap items-center gap-0.5 break-words text-sm text-muted-foreground sm:gap-1.5",e),...s}));o.displayName="BreadcrumbList";let l=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("li",{ref:a,className:(0,i.cn)("inline-flex text-foreground-lighter items-center gap-1.5 leading-5",e),...s}));l.displayName="BreadcrumbItem";let c=r.forwardRef(({asChild:e,className:a,...r},n)=>{let o=e?s.Slot:"a";return(0,t.jsx)(o,{ref:n,className:(0,i.cn)("transition-colors underline lg:no-underline hover:text-foreground",a),...r})});c.displayName="BreadcrumbLink";let d=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("span",{ref:a,role:"link","aria-disabled":"true","aria-current":"page",className:(0,i.cn)("no-underline text-foreground",e),...s}));d.displayName="BreadcrumbPage";let u=({children:e,className:s,...r})=>(0,t.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,i.cn)("[&>svg]:size-3.5 text-foreground-muted",s),...r,children:e??(0,t.jsx)(a.default,{})});u.displayName="BreadcrumbSeparator";let m=({className:e,...s})=>(0,t.jsxs)("span",{className:(0,i.cn)("flex h-4 w-4 items-center justify-center",e),...s,children:[(0,t.jsx)("svg",{role:"presentation","aria-hidden":"true",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}),(0,t.jsx)("span",{className:"sr-only",children:"More"})]});m.displayName="BreadcrumbEllipsis",e.s(["Breadcrumb",()=>n,"BreadcrumbEllipsis",()=>m,"BreadcrumbItem",()=>l,"BreadcrumbLink",()=>c,"BreadcrumbList",()=>o,"BreadcrumbPage",()=>d,"BreadcrumbSeparator",()=>u],3259)},744061,418638,e=>{"use strict";var t=e.i(478902),s=e.i(938933),a=e.i(843778);function r({children:e,className:s,tag:a="div",style:r}){let i=`${a}`;return(0,t.jsx)(i,{style:r,children:e})}r.Title=function({className:e,level:s=1,children:a,style:r}){let i=`h${s}`;return(0,t.jsx)(i,{style:r,children:a})},r.Text=function({className:e,children:s,style:a,type:r,disabled:i,mark:n,code:o,keyboard:l,underline:c,strikethrough:d,strong:u,small:m}){return o?(0,t.jsx)("code",{style:a,children:s}):n?(0,t.jsx)("mark",{style:a,children:s}):l?(0,t.jsx)("kbd",{style:a,children:s}):u?(0,t.jsx)("strong",{style:a,children:s}):(0,t.jsx)("span",{style:a,children:s})},r.Link=function({children:e,target:s="_blank",href:a,className:r,onClick:i,style:n}){return(0,t.jsx)("a",{onClick:i,href:a,target:s,rel:"noopener noreferrer",style:n,children:e})},e.s(["default",0,r],418638);var i=e.i(389959);let n=(0,i.createContext)({type:"text"}),o=e=>{let{type:s}=e;return(0,t.jsx)(n.Provider,{value:{type:s},children:e.children})},l=()=>{let e=(0,i.useContext)(n);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function c({children:e,className:s,ulClassName:a,style:r,type:i="text"}){return(0,t.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:s,style:r,children:(0,t.jsx)(o,{type:i,children:(0,t.jsx)("ul",{className:a,children:e})})})}c.Item=function({children:e,icon:r,active:i,rounded:n,onClick:o,doNotCloseOverlay:c=!1,showActiveBar:d=!1,style:u}){let m=(0,s.default)("menu"),{type:p}=l(),f=[m.item.base];f.push(m.item.variants[p].base),i?f.push(m.item.variants[p].active):f.push(m.item.variants[p].normal);let g=[m.item.content.base];i?g.push(m.item.content.active):g.push(m.item.content.normal);let h=[m.item.icon.base];return i?h.push(m.item.icon.active):h.push(m.item.icon.normal),(0,t.jsxs)("li",{role:"menuitem",className:(0,a.cn)("outline-none",f),style:u,onClick:o,"aria-current":i?"page":void 0,children:[r&&(0,t.jsx)("div",{className:`${h.join(" ")} min-w-fit`,children:r}),(0,t.jsx)("span",{className:g.join(" "),children:e})]})},c.Group=function({children:e,icon:a,title:r}){let i=(0,s.default)("menu"),{type:n}=l();return(0,t.jsxs)("div",{className:[i.group.base,i.group.variants[n]].join(" "),children:[a&&(0,t.jsx)("span",{className:i.group.icon,children:a}),(0,t.jsx)("span",{className:i.group.content,children:r}),e]})},c.Misc=function({children:e}){return(0,t.jsx)("div",{children:(0,t.jsx)(r.Text,{children:(0,t.jsx)("span",{children:e})})})},e.s(["default",0,c],744061)},862326,e=>{"use strict";var t=e.i(744061);e.s(["Menu",()=>t.default])},388147,799793,e=>{"use strict";var t=e.i(478902),s=e.i(587433),a=e.i(862326),r=e.i(215261),i=e.i(837710);let n=({name:e="",isActive:n,isExternal:o,icon:l,rightIcon:c,url:d="",target:u="_self",onClick:m,textClassName:p="",hoverText:f="",label:g})=>{let h=(0,t.jsx)(a.Menu.Item,{icon:l,rounded:!0,active:n,onClick:m,children:(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 min-w-0 flex-1",title:f||("string"==typeof e?e:""),children:[(0,t.jsx)("span",{className:"truncate flex-1 min-w-0",children:e}),void 0!==g&&(0,t.jsx)(s.Badge,{variant:"new"===g.toLowerCase()?"success":"warning",className:"flex-shrink-0",children:g})]}),c&&(0,t.jsx)("div",{children:c})]})});return d?o?(0,t.jsx)(i.Button,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:l,children:(0,t.jsx)(r.default,{href:d,target:"_blank",rel:"noreferrer",children:e})}):(0,t.jsx)(r.default,{href:d,className:"block",target:u,children:h}):h};e.s(["default",0,n],799793),e.s(["ProductMenu",0,({page:e,menu:r})=>(0,t.jsx)("div",{className:"flex flex-col space-y-8",children:(0,t.jsx)(a.Menu,{type:"pills",children:r.map((i,o)=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"my-6 space-y-8",children:(0,t.jsxs)("div",{className:"mx-3",children:[(0,t.jsx)(a.Menu.Group,{title:i.title?(0,t.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,t.jsx)("span",{children:i.title}),i.isPreview&&(0,t.jsx)(s.Badge,{variant:"warning",children:"Not production ready"})]}):null}),(0,t.jsx)("div",{children:i.items.map(s=>{let a=s.pages?s.pages.includes(e??""):e===s.key;return(0,t.jsx)(n,{url:s.url,name:s.name,icon:s.icon,rightIcon:s.rightIcon,isActive:a,isExternal:s.isExternal,target:s.isExternal?"_blank":"_self",label:s.label},s.key)})})]})}),o!==r.length-1&&(0,t.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},i.key||i.title))})})],388147)},460988,e=>{"use strict";var t=e.i(156054),s=e.i(55956),a=e.i(807162),r=e.i(228598),i=e.i(389959);e.i(128328);var n=e.i(86086),o=e.i(884892),l=e.i(857054),c=e.i(993394);let d=e=>s.default.utc(Number(e)/1e3).toISOString(),u=e=>{let t=16===String(e).length;return!Number.isNaN(Number(e))&&t},m=(e,t)=>Object.keys(e).filter(t=>e[t]).flatMap(s=>{let a=t?`${t}.${s}`:s;return"object"==typeof e[s]?m(e[s],a):[a]}),p=(e,t)=>{let s=Object.keys(t),r=c.SQL_FILTER_TEMPLATES[e],i=e=>{let s=r[e],i=(0,a.default)(t,e);if(void 0!==i&&"function"==typeof s)return s(i);if(void 0===s)if("string"==typeof i)return`${e} = '${i}'`;else return`${e} = ${i}`;return void 0===i&&"function"==typeof s?null:s&&!1===i?null:s},n=s.map(e=>{if(void 0===t[e]||"string"==typeof t[e]&&0===t[e].length)return null;if("object"==typeof t[e]){let s=m(t[e],e).map(i).filter(Boolean);return s.length>0?`(${s.join(" or ")})`:null}{let t=i(e);return null===t?null:`(${t})`}}).filter(Boolean).join(" and ");return n?"where "+n:""},f=e=>{switch(e){case"edge_logs":return`cross join unnest(metadata) as m
  cross join unnest(m.request) as request
  cross join unnest(m.response) as response`;case"pg_cron_logs":case"postgres_logs":return`cross join unnest(metadata) as m
  cross join unnest(m.parsed) as parsed`;case"function_logs":case"auth_logs":return"cross join unnest(metadata) as metadata";case"function_edge_logs":return`cross join unnest(metadata) as m
  cross join unnest(m.response) as response
  cross join unnest(m.request) as request`;case"supavisor_logs":return"cross join unnest(metadata) as m";default:return""}},g=n.IS_PLATFORM?"where ( parsed.application_name = 'pg_cron' or regexp_contains(event_message, 'cron job') )":"where ( parsed.application_name = 'pg_cron' or event_message::text LIKE '%cron job%' )",h=e=>{let t=e.reduce((e,t)=>{let s=y(t);return e[s]+=1,e},{second:0,minute:0,hour:0,day:0});return Object.keys(t).reduce((e,s)=>t[e]>t[s]?e:s)},y=e=>({0:"second",1:"minute",2:"hour",3:"day"})[["second","minute","hour"].map(t=>e.get(t)).reduce((e,t)=>(0===t&&(e+=1),e),0)];function b(e){let t=e.replace(/--.*$/gm,"").replace(/\/\*[\s\S]*?\*\//gm,"");return/\b(WITH)\b(?=(?:[^']*'[^']*')*[^']*$)/i.test(t)}function x(e){let t=e.replace(/--.*$/gm,"").replace(/\/\*[\s\S]*?\*\//gm,"");return/\b(ILIKE)\b(?=(?:[^']*'[^']*')*[^']*$)/i.test(t)}function _(e){let t=e?.[0]?.request?.[0]?.sb?.[0]?.jwt?.[0]?.apikey?.[0];if(!t)return;if(t.invalid)return"<invalid>";let s=t?.payload?.[0];return s&&"HS256"===s.algorithm&&"supabase"===s.issuer&&["anon","service_role"].includes(s.role)&&!s.subject?s.role:"<unrecognized>"}function v(e){let t=e?.[0]?.request?.[0]?.sb?.[0]?.apikey?.[0]?.apikey?.[0];if(t)return t.error?`${t.prefix}... <invalid: ${t.error}>`:`${t.prefix}...`}function j(e){let t=e?.[0]?.request?.[0]?.sb?.[0]?.jwt?.[0]?.authorization?.[0];if(!t||t.invalid)return;let s=t?.payload?.[0];if(s&&s.role)return s.role}e.s(["apiKey",()=>v,"checkForILIKEClause",()=>x,"checkForWithClause",()=>b,"fillTimeseries",0,(e,t,a,r,i,n,o=20,l)=>{let c;if(0===e.length&&!(i&&n))return[];if(e.length>o)return e.map(e=>{let a=e[t],r=u(a)?d(a):s.default.utc(a).toISOString();return e[t]=r,e});if(e.length<=1&&!(i&&n))return e;let m=e.map(e=>s.default.utc(e[t])),p=n?s.default.utc(n):s.default.utc(Math.max.apply(null,m)),f=i?s.default.utc(i):s.default.utc(Math.min.apply(null,m)),g=e.length>0?m:[f,p],y=1;if(l){let e=l.match(/^(\d+)(m|h|d|s)$/);e?(y=parseInt(e[1],10),c=({s:"second",m:"minute",h:"hour",d:"day"})[e[2]]):c=h(g)}else c=h(g);0!==e.length||l||(c="minute");let b=e.map(e=>{let r=e[t],i=u(r)?d(r):s.default.utc(r).toISOString();return Array.isArray(a)&&0===a.length?{[t]:i}:(e[t]=i,e)}),x=f;for(;x.isBefore(p)||x.isSame(p);){if(!m.find(e=>e.year()===x.year()&&e.month()===x.month()&&e.date()===x.date()&&e.hour()===x.hour()&&e.minute()===x.minute()&&e.second()===x.second())){let e=("string"==typeof a?[a]:a).reduce((e,t)=>({...e,[t]:r}),{});b.push({[t]:x.toISOString(),...e})}x=x.add(y,c)}return b},"genChartQuery",0,(e,t,a)=>{let r,i,n,o,l,d,[u,m]=(r=t.iso_timestamp_end?(0,s.default)(t.iso_timestamp_end):(0,s.default)(),i=t.iso_timestamp_start?(0,s.default)(t.iso_timestamp_start):(0,s.default)(),n="minute",o=360,l=r.diff(i,"minute"),d=r.diff(i,"hour"),l>720?(n="hour",o=120):d>72&&(n="day",o=7),[i.add(-o,n),n]),h=p(e,a),y=function(e){switch(e){case"edge_logs":case"function_edge_logs":return"response.status_code >= 500";case"postgres_logs":case"pg_cron_logs":return"parsed.error_severity IN ('ERROR', 'FATAL', 'PANIC')";case"auth_logs":return"metadata.level = 'error' OR SAFE_CAST(metadata.status AS INT64) >= 400";case"function_logs":return"metadata.level IN ('error', 'fatal')";default:return"false"}}(e),b=function(e){switch(e){case"edge_logs":case"function_edge_logs":return"response.status_code >= 400 AND response.status_code < 500";case"postgres_logs":return"parsed.error_severity IN ('WARNING')";case"auth_logs":return"metadata.level = 'warning'";case"function_logs":return"metadata.level IN ('warning')";default:return"false"}}(e);e===c.LogsTableName.PG_CRON&&(e=c.LogsTableName.POSTGRES,h=g);let x=f(e);return`
SELECT
-- log-event-chart
  timestamp_trunc(t.timestamp, ${m}) as timestamp,
  count(CASE WHEN NOT (${y} OR ${b}) THEN 1 END) as ok_count,
  count(CASE WHEN ${y} THEN 1 END) as error_count,
  count(CASE WHEN ${b} THEN 1 END) as warning_count,
FROM
  ${e} t
  ${x}
  ${h?h+` and t.timestamp > '${u.toISOString()}'`:`where t.timestamp > '${u.toISOString()}'`}
GROUP BY
timestamp
ORDER BY
  timestamp ASC
  `},"genCountQuery",0,(e,t)=>{let s=p(e,t);e===c.LogsTableName.PG_CRON&&(e=c.LogsTableName.POSTGRES,s=g);let a=f(e);return`SELECT count(*) as count FROM ${e} ${a} ${s}`},"genDefaultQuery",0,(e,t,s=100)=>{let a=p(e,t),r=f(e),i="order by timestamp desc";switch(e){case"edge_logs":if(!n.IS_PLATFORM)return`
-- local dev edge_logs query
select id, edge_logs.timestamp, event_message, request.method, request.path, request.search, response.status_code
from edge_logs
${r}
${a}
${i}
limit ${s};
`;return`select id, identifier, timestamp, event_message, request.method, request.path, request.search, response.status_code
  from ${e}
  ${r}
  ${a}
  ${i}
  limit ${s}
  `;case"postgres_logs":if(!n.IS_PLATFORM)return`
select postgres_logs.timestamp, id, event_message, parsed.error_severity, parsed.detail, parsed.hint
from postgres_logs
${r}
${a}
${i}
limit ${s}
  `;return`select identifier, postgres_logs.timestamp, id, event_message, parsed.error_severity, parsed.detail, parsed.hint from ${e}
  ${r}
  ${a}
  ${i}
  limit ${s}
  `;case"function_logs":return`select id, ${e}.timestamp, event_message, metadata.event_type, metadata.function_id, metadata.level from ${e}
  ${r}
  ${a}
  ${i}
  limit ${s}
    `;case"auth_logs":return`select id, ${e}.timestamp, event_message, metadata.level, metadata.status, metadata.path, metadata.msg as msg, metadata.error from ${e}
  ${r}
  ${a}
  ${i}
  limit ${s}
    `;case"function_edge_logs":if(!n.IS_PLATFORM)return`
select id, function_edge_logs.timestamp, event_message
from function_edge_logs
${i}
limit ${s}
`;return`select id, ${e}.timestamp, event_message, response.status_code, request.method, m.function_id, m.execution_time_ms, m.deployment_id, m.version from ${e}
  ${r}
  ${a}
  ${i}
  limit ${s}
  `;case"supavisor_logs":return`select id, ${e}.timestamp, event_message from ${e} ${r} ${a} ${i} limit ${s}`;case"pg_upgrade_logs":return`select id, ${e}.timestamp, event_message from ${e} ${r} ${a} ${i} limit 100`;default:return`select id, ${e}.timestamp, event_message from ${e}
  ${a}
  ${i}
  limit ${s}
  `;case"pg_cron_logs":let o=a?`${g} AND ${a.substring(6)}`:g;return`select id, postgres_logs.timestamp, event_message, parsed.error_severity, parsed.query
from postgres_logs
${r}
${o}
${i}
limit ${s}
`}},"genSingleLogQuery",0,(e,t)=>`select id, timestamp, event_message, metadata from ${e} where id = '${t}' limit 1`,"isDefaultLogPreviewFormat",0,e=>e&&e.timestamp&&e.event_message&&e.id,"isUnixMicro",0,u,"jwtAPIKey",()=>_,"maybeShowUpgradePrompt",0,(e,t)=>{let a=Math.abs((0,s.default)().diff((0,s.default)(e),"day"));return a>1&&"free"===t||a>7&&"pro"===t||a>28&&"team"===t||a>90&&"enterprise"===t},"maybeShowUpgradePromptIfNotEntitled",0,(e,t)=>!!t&&Math.abs((0,s.default)().diff((0,s.default)(e),"day"))>t,"role",()=>j,"unixMicroToIsoTimestamp",0,d,"useEditorHints",0,()=>{let e=(0,t.useMonaco)();(0,i.useEffect)(()=>{if(e){let t=e.languages.registerCompletionItemProvider("pgsql",{triggerCharacters:["`"," ","."],provideCompletionItems:function(t,s,a){let i=new o.default(t,s.column-2,s.lineNumber-1);if(i.isNextDQuote())return{suggestions:[]};let n=[],c=l.default.schemas.filter(e=>i._text.includes(e.reference));if(0===c.length&&(c=l.default.schemas),i.isNextPeriod()){let t=c.flatMap(e=>e.fields).flatMap(e=>{let[t,...s]=e.path.split(".");return s}).map(t=>({label:t,kind:e.languages.CompletionItemKind.Property,insertText:t}));n=n.concat(t)}if("`"===a.triggerCharacter||" "===a.triggerCharacter){let t=l.default.schemas.map(t=>({label:t.reference,kind:e.languages.CompletionItemKind.Class,insertText:t.reference})),s=c.flatMap(e=>e.fields).flatMap(e=>e.path.split(".").slice(0,-1)).map(t=>({label:t,kind:e.languages.CompletionItemKind.Property,insertText:t}));n=(n=n.concat(s)).concat(t)}return{suggestions:(0,r.default)(n,"label")}}});return()=>{t.dispose()}}},[e])}])},993394,e=>{"use strict";var t,s=e.i(55956),a=e.i(10429);e.i(128328);var r=e.i(86086);let i=`${a.DOCS_URL}/guides/platform/logs#querying-with-the-logs-explorer`,n=[{label:"Recent Errors",mode:"simple",searchString:"[Ee]rror|\\s[45][0-9][0-9]\\s",for:["api"]},{label:"Commits",mode:"simple",searchString:"COMMIT",for:["database"]},{label:"Commits By User",description:"Count of commits made by users on the database",mode:"custom",searchString:`select
  p.user_name,
  count(*) as count
from postgres_logs
  left join unnest(metadata) as m on true
  left join unnest(m.parsed) as p on true
where
  regexp_contains(event_message, 'COMMIT')
group by
  p.user_name
  `,for:["database"]},{label:"Metadata IP",description:"List all IP addresses that used the Supabase API",mode:"custom",searchString:`select
  cast(timestamp as datetime) as timestamp,
  h.x_real_ip
from edge_logs
  left join unnest(metadata) as m on true
  left join unnest(m.request) as r on true
  left join unnest(r.headers) as h on true
where h.x_real_ip is not null
`,for:["api"]},{label:"Requests by Geography",description:"List all ISO 3166-1 alpha-2 country codes that used the Supabase API",mode:"custom",searchString:`select
  cf.country,
  count(*) as count
from edge_logs
  left join unnest(metadata) as m on true
  left join unnest(m.request) as r on true
  left join unnest(r.cf) as cf on true
group by
  cf.country
order by
  count desc
`,for:["api"]},{label:"Slow Response Time",mode:"custom",description:"List all Supabase API requests that are slow",searchString:`select
  cast(timestamp as datetime) as timestamp,
  event_message,
  r.origin_time
from edge_logs
  cross join unnest(metadata) as m
  cross join unnest(m.response) as r
where
  r.origin_time > 1000
order by
  timestamp desc
limit 100
`,for:["api"]},{label:"500 Request Codes",description:"List all Supabase API requests that responded witha 5XX status code",mode:"custom",searchString:`select
  cast(timestamp as datetime) as timestamp,
  event_message,
  r.status_code
from edge_logs
  cross join unnest(metadata) as m
  cross join unnest(m.response) as r
where
  r.status_code >= 500
order by
  timestamp desc
limit 100
`,for:["api"]},{label:"Top Paths",description:"List the most requested Supabase API paths",mode:"custom",searchString:`select
  r.path as path,
  r.search as params,
  count(timestamp) as c
from edge_logs
  cross join unnest(metadata) as m
  cross join unnest(m.request) as r
group by
  path,
  params
order by
  c desc
limit 100
`,for:["api"]},{label:"REST Requests",description:"List all PostgREST requests",mode:"custom",searchString:`select
  cast(timestamp as datetime) as timestamp,
  event_message
from edge_logs
  cross join unnest(metadata) as m
  cross join unnest(m.request) as r
where
  path like '%rest/v1%'
order by
  timestamp desc
limit 100
`,for:["api"]},{label:"Errors",description:"List all Postgres error messages with ERROR, FATAL, or PANIC severity",mode:"custom",searchString:`select
  cast(t.timestamp as datetime) as timestamp,
  p.error_severity,
  event_message
from postgres_logs as t
  cross join unnest(metadata) as m
  cross join unnest(m.parsed) as p
where
  p.error_severity in ('ERROR', 'FATAL', 'PANIC')
order by
  timestamp desc
limit 100
`,for:["database"]},{label:"Error Count by User",description:"Count of errors by users",mode:"custom",searchString:`select
  count(t.timestamp) as count,
  p.user_name,
  p.error_severity
from postgres_logs as t
  cross join unnest(metadata) as m
  cross join unnest(m.parsed) as p
where
  p.error_severity in ('ERROR', 'FATAL', 'PANIC')
group by
  p.user_name,
  p.error_severity
order by
  count desc
limit 100
`,for:["database"]},{label:"Auth Endpoint Events",description:"Endpoint events filtered by path",mode:"custom",searchString:`select
  t.timestamp,
  event_message
from auth_logs as t
where
  regexp_contains(event_message,"level.{3}(info|warning||error|fatal)")
  -- and regexp_contains(event_message,"path.{3}(/token|/recover|/signup|/otp)")
limit 100
`,for:["database"]},{label:"Auth Audit Logs",description:"Audit logs for auth events",mode:"custom",searchString:`select
  cast(timestamp as datetime) as timestamp,
  event_message, metadata 
from auth_audit_logs 
limit 10
`,for:["database"]},{label:"Storage Object Requests",description:"Number of requests done on Storage Objects",mode:"custom",searchString:`select
  r.method as http_verb,
  r.path as filepath,
  count(*) as num_requests
from edge_logs
  cross join unnest(metadata) as m
  cross join unnest(m.request) AS r
  cross join unnest(r.headers) AS h
where
  path like '%storage/v1/object/%'
group by
  r.path, r.method
order by
  num_requests desc
limit 100
`,for:["api"]},{label:"Storage Egress Requests",description:"Check the number of requests done on Storage Affecting Egress",mode:"custom",searchString:`select
  request.method as http_verb,
  request.path as filepath,
  (responseHeaders.cf_cache_status = 'HIT') as cached,
  count(*) as num_requests
from
  edge_logs
  cross join unnest(metadata) as metadata
  cross join unnest(metadata.request) as request
  cross join unnest(metadata.response) as response
  cross join unnest(response.headers) as responseHeaders
where
  (path like '%storage/v1/object/%' or path like '%storage/v1/render/%')
  and request.method = 'GET'
group by 1, 2, 3
order by num_requests desc
limit 100;
`,for:["api"]},{label:"Storage Top Cache Misses",description:"The top Storage requests that miss caching",mode:"custom",searchString:`select
  r.path as path,
  r.search as search,
  count(id) as count
from edge_logs f
  cross join unnest(f.metadata) as m
  cross join unnest(m.request) as r
  cross join unnest(m.response) as res
  cross join unnest(res.headers) as h
where starts_with(r.path, '/storage/v1/object')
  and r.method = 'GET'
  and h.cf_cache_status in ('MISS', 'NONE/UNKNOWN', 'EXPIRED', 'BYPASS', 'DYNAMIC')
group by path, search
order by count desc
limit 100;
`,for:["api"]}],o={search_query:e=>`regexp_contains(event_message, '${e}')`},l={postgres_logs:{...o,database:e=>`identifier = '${e}'`,"severity.error":"parsed.error_severity in ('ERROR', 'FATAL', 'PANIC')","severity.noError":"parsed.error_severity not in ('ERROR', 'FATAL', 'PANIC')","severity.log":"parsed.error_severity = 'LOG'"},edge_logs:{...o,database:e=>`identifier = '${e}'`,"status_code.error":"response.status_code between 500 and 599","status_code.success":"response.status_code between 200 and 299","status_code.warning":"response.status_code between 400 and 499","product.database":"request.path like '/rest/%' or request.path like '/graphql/%'","product.storage":"request.path like '/storage/%'","product.auth":"request.path like '/auth/%'","product.realtime":"request.path like '/realtime/%'","method.get":"request.method = 'GET'","method.post":"request.method = 'POST'","method.put":"request.method = 'PUT'","method.patch":"request.method = 'PATCH'","method.delete":"request.method = 'DELETE'","method.options":"request.method = 'OPTIONS'"},function_edge_logs:{...o,"status_code.error":"response.status_code between 500 and 599","status_code.success":"response.status_code between 200 and 299","status_code.warning":"response.status_code between 400 and 499"},function_logs:{...o,"severity.error":"metadata.level = 'error'","severity.notError":"metadata.level != 'error'","severity.log":"metadata.level = 'log'","severity.info":"metadata.level = 'info'","severity.debug":"metadata.level = 'debug'","severity.warn":"metadata.level = 'warn'"},auth_logs:{...o,"severity.error":"metadata.level = 'error' or metadata.level = 'fatal'","severity.warning":"metadata.level = 'warning'","severity.info":"metadata.level = 'info'","status_code.server_error":"cast(metadata.status as int64) between 500 and 599","status_code.client_error":"cast(metadata.status as int64) between 400 and 499","status_code.redirection":"cast(metadata.status as int64) between 300 and 399","status_code.success":"cast(metadata.status as int64) between 200 and 299","endpoints.admin":'REGEXP_CONTAINS(metadata.path, "/admin")',"endpoints.signup":'REGEXP_CONTAINS(metadata.path, "/signup|/invite|/verify")',"endpoints.authentication":'REGEXP_CONTAINS(metadata.path, "/token|/authorize|/callback|/otp|/magiclink")',"endpoints.recover":'REGEXP_CONTAINS(metadata.path, "/recover")',"endpoints.user":'REGEXP_CONTAINS(metadata.path, "/user")',"endpoints.logout":'REGEXP_CONTAINS(metadata.path, "/logout")'},realtime_logs:{...o},storage_logs:{...o},postgrest_logs:{...o,database:e=>`identifier = '${e}'`},pgbouncer_logs:{...o},supavisor_logs:{...o,database:e=>`m.project like '${e}%'`},pg_upgrade_logs:{...o},pg_cron_logs:{...o},etl_replication_logs:{...o,pipeline_id:e=>`pipeline_id = ${e}`}};var c=((t={}).EDGE="edge_logs",t.POSTGRES="postgres_logs",t.FUNCTIONS="function_logs",t.FN_EDGE="function_edge_logs",t.AUTH="auth_logs",t.AUTH_AUDIT="auth_audit_logs",t.REALTIME="realtime_logs",t.STORAGE="storage_logs",t.POSTGREST="postgrest_logs",t.SUPAVISOR="supavisor_logs",t.PGBOUNCER="pgbouncer_logs",t.PG_UPGRADE="pg_upgrade_logs",t.PG_CRON="pg_cron_logs",t.ETL="etl_replication_logs",t);let d={postgres_logs:{severity:{label:"Severity",key:"severity",options:[{key:"error",label:"Error",description:"Show all events with ERROR, PANIC, or FATAL"},{key:"noError",label:"No Error",description:"Show all non-error events"},{key:"log",label:"Log",description:"Show all events that are log severity"}]}},edge_logs:{status_code:{label:"Status",key:"status_code",options:[{key:"error",label:"Error",description:"500 error codes"},{key:"success",label:"Success",description:"200 codes"},{key:"warning",label:"Warning",description:"400 codes"}]},product:{label:"Product",key:"product",options:[{key:"database",label:"Database",description:""},{key:"auth",label:"Auth",description:""},{key:"storage",label:"Storage",description:""},{key:"realtime",label:"Realtime",description:""}]},method:{label:"Method",key:"method",options:[{key:"get",label:"GET",description:""},{key:"options",label:"OPTIONS",description:""},{key:"put",label:"PUT",description:""},{key:"post",label:"POST",description:""},{key:"patch",label:"PATCH",description:""},{key:"delete",label:"DELETE",description:""}]}},...r.IS_PLATFORM?{function_edge_logs:{status_code:{label:"Status",key:"status_code",options:[{key:"error",label:"Error",description:"500 error codes"},{key:"success",label:"Success",description:"200 codes"},{key:"warning",label:"Warning",description:"400 codes"}]}}}:{},function_logs:{severity:{label:"Severity",key:"severity",options:[{key:"error",label:"Error",description:'Show all events that are "error" severity'},{key:"warn",label:"Warning",description:'Show all events that are "warn" severity'},{key:"info",label:"Info",description:'Show all events that are "info" severity'},{key:"debug",label:"Debug",description:'Show all events that are "debug" severity'},{key:"log",label:"Log",description:'Show all events that are "log" severity'}]}},auth_logs:{severity:{label:"Severity",key:"severity",options:[{key:"error",label:"Error",description:"Show all events that have error or fatal severity"},{key:"warning",label:"Warning",description:"Show all events that have warning severity"},{key:"info",label:"Info",description:"Show all events that have info severity"}]},status_code:{label:"Status Code",key:"status_code",options:[{key:"server_error",label:"Server Error",description:"Show all requests with 5XX status code"},{key:"client_error",label:"Client Error",description:"Show all requests with 4XX status code"},{key:"redirection",label:"Redirection",description:"Show all requests that have 3XX status code"},{key:"success",label:"Success",description:"Show all requests that have 2XX status code"}]},endpoints:{label:"Endpoints",key:"endpoints",options:[{key:"admin",label:"Admin",description:"Show all admin requests"},{key:"signup",label:"Sign up",description:"Show all signup and authorization requests"},{key:"recover",label:"Password Recovery",description:"Show all password recovery requests"},{key:"authentication",label:"Authentication",description:"Show all authentication flow requests (login, otp, and Oauth2)"},{key:"user",label:"User",description:"Show all user data requests"},{key:"logout",label:"Logout",description:"Show all logout requests"}]}}},u=[{text:"Last 15 minutes",calcFrom:()=>(0,s.default)().subtract(15,"minute").toISOString(),calcTo:()=>""},{text:"Last 30 minutes",calcFrom:()=>(0,s.default)().subtract(30,"minute").toISOString(),calcTo:()=>""},{text:"Last hour",calcFrom:()=>(0,s.default)().subtract(1,"hour").toISOString(),calcTo:()=>"",default:!0},{text:"Last 3 hours",calcFrom:()=>(0,s.default)().subtract(3,"hour").toISOString(),calcTo:()=>""},{text:"Last 24 hours",calcFrom:()=>(0,s.default)().subtract(1,"day").toISOString(),calcTo:()=>""},{text:"Last 2 days",calcFrom:()=>(0,s.default)().subtract(2,"day").toISOString(),calcTo:()=>""},{text:"Last 3 days",calcFrom:()=>(0,s.default)().subtract(3,"day").toISOString(),calcTo:()=>""},{text:"Last 5 days",calcFrom:()=>(0,s.default)().subtract(5,"day").toISOString(),calcTo:()=>""}],m=[{text:"Last hour",calcFrom:()=>(0,s.default)().subtract(1,"hour").toISOString(),calcTo:()=>"",default:!0},{text:"Last 3 hours",calcFrom:()=>(0,s.default)().subtract(3,"hour").toISOString(),calcTo:()=>""},{text:"Last 24 hours",calcFrom:()=>(0,s.default)().subtract(1,"day").toISOString(),calcTo:()=>""},{text:"Last 3 days",calcFrom:()=>(0,s.default)().subtract(3,"day").toISOString(),calcTo:()=>""},{text:"Last 7 days",calcFrom:()=>(0,s.default)().subtract(7,"day").toISOString(),calcTo:()=>""}];e.s(["EXPLORER_DATEPICKER_HELPERS",0,m,"FILTER_OPTIONS",0,d,"LOGS_EXPLORER_DOCS_URL",0,i,"LOGS_LARGE_DATE_RANGE_DAYS_THRESHOLD",0,2,"LOGS_SOURCE_DESCRIPTION",0,{edge_logs:"Logs obtained from the network edge, containing all API requests",postgres_logs:"Database logs obtained directly from Postgres",function_logs:"Function logs generated from runtime execution",function_edge_logs:"Function call logs, containing the request and response",auth_logs:"Errors, warnings, and performance details from the auth service",auth_audit_logs:"Audit records of user signups, logins, and account changes",realtime_logs:"Realtime server for Postgres logical replication broadcasting",storage_logs:"Object storage logs",postgrest_logs:"RESTful API web server logs",supavisor_logs:"Shared connection pooler logs for PostgreSQL",pgbouncer_logs:"Dedicated connection pooler for PostgreSQL",pg_upgrade_logs:"Logs generated by the Postgres version upgrade process",pg_cron_logs:"Postgres logs from pg_cron cron jobs",etl_replication_logs:"Logs from the replication process"},"LOGS_TABLES",0,{api:"edge_logs",database:"postgres_logs",functions:"function_logs",fn_edge:"function_edge_logs",auth:"auth_logs",realtime:"realtime_logs",storage:"storage_logs",postgrest:"postgrest_logs",supavisor:"supavisor_logs",pg_upgrade:"pg_upgrade_logs",pg_cron:"postgres_logs",pgbouncer:"pgbouncer_logs",etl:"etl_replication_logs"},"LOG_ROUTES_WITH_REPLICA_SUPPORT",0,["/project/[ref]/logs/edge-logs","/project/[ref]/logs/pooler-logs","/project/[ref]/logs/postgres-logs","/project/[ref]/logs/postgrest-logs"],"LogsTableName",()=>c,"PREVIEWER_DATEPICKER_HELPERS",0,u,"SQL_FILTER_TEMPLATES",0,l,"TEMPLATES",0,n,"TIER_QUERY_LIMITS",0,{FREE:{text:"1 day",value:1,unit:"day",promptUpgrade:!0},PRO:{text:"7 days",value:7,unit:"day",promptUpgrade:!0},PAYG:{text:"7 days",value:7,unit:"day",promptUpgrade:!0},TEAM:{text:"28 days",value:28,unit:"day",promptUpgrade:!0},ENTERPRISE:{text:"90 days",value:90,unit:"day",promptUpgrade:!1},PLATFORM:{text:"1 day",value:1,unit:"day",promptUpgrade:!1}},"getDefaultHelper",0,e=>e.find(e=>e.default)||e[0]])},884892,e=>{"use strict";let t=class{_line;_text;_lines;model;offset;lineNumber;constructor(e,t,s){this.model=e,this.offset=t,this.lineNumber=s,this._text=e.getValue(),this._lines=this._text.split(/\r?\n/g),this._line=this._lines[s]}hasNext(){return this.lineNumber>=0||this.offset>=0}isFowardDQuote(){return!!this.hasForward()&&34===this.peekForward()}isNextDQuote(){return!!this.hasNext()&&34===this.peekNext()}isNextPeriod(){return!!this.hasNext()&&46===this.peekNext()}peekNext(){return this.offset<0?10*(this.lineNumber>0):this._line.charCodeAt(this.offset)}hasForward(){return this.lineNumber<this._lines.length||this.offset<this._line.length}peekForward(){return this.offset===this._line.length?10*(this.lineNumber!==this._lines.length):this._line.charCodeAt(this.offset+1)}next(){if(this.offset<0)return this.lineNumber>0?(this.lineNumber--,this._line=this._lines[this.lineNumber],this.offset=this._line.length-1,10):(this.lineNumber=-1,0);let e=this._line.charCodeAt(this.offset);return this.offset--,e}readArguments(){let e=0,t=0,s=0,a=0;for(;this.hasNext();){let r=this.next();switch(r){case 40:if(--e<0)return a;break;case 41:e++;break;case 123:s--;break;case 125:s++;break;case 91:t--;break;case 93:t++;break;case 34:case 39:for(;this.hasNext()&&r!==this.next(););break;case 44:!e&&!t&&!s&&a++}}return -1}readIdent(){let e=!1,t=!1,s="";for(;this.hasNext();){let a=this.peekNext();if(e&&!t&&!this._isIdentPart(a))break;if(a=this.next(),!e&&t&&34===a){e=!0;continue}if(e||32!==a&&9!==a&&10!=a){if(!e&&(34===a||this._isIdentPart(a)))e=!0,t=34===a,s=String.fromCharCode(a)+s;else if(e)if(t){if(0===a||(s=String.fromCharCode(a)+s,34===a))break}else s=String.fromCharCode(a)+s}}return s}readIdents(e){let t=[];for(;e>0;){e--;let s=this.readIdent();if(!s||(t.push(s),!this.isNextPeriod()))break}return t.reverse()}_isIdentPart(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57}};e.s(["default",0,t])},167892,e=>{"use strict";var t=e.i(478902),s=e.i(389959),a=e.i(843778);let r="mx-auto w-full max-w-[1200px]",i="px-4 @lg:px-6 @xl:px-10",n=(0,s.forwardRef)(({className:e,bottomPadding:s,size:r="default",...n},o)=>(0,t.jsx)("div",{ref:o,...n,className:(0,a.cn)("mx-auto w-full @container",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[r],i,s&&"pb-16",e)})),o=(0,s.forwardRef)(({className:e,...s},r)=>(0,t.jsx)("header",{...s,ref:r,className:(0,a.cn)("w-full","flex-col gap-3 py-6",e)})),l=(0,s.forwardRef)(({className:e,...s},r)=>(0,t.jsx)("h1",{ref:r,...s,className:(0,a.cn)(e)})),c=(0,s.forwardRef)(({className:e,...s},r)=>(0,t.jsx)("p",{ref:r,...s,className:(0,a.cn)("text-sm text-foreground-light",e)})),d=(0,s.forwardRef)(({className:e,isFullWidth:s,topPadding:r,...i},n)=>(0,t.jsx)("div",{ref:n,...i,className:(0,a.cn)("flex flex-col first:pt-12 py-6",s?"w-full":"gap-3 @md:grid-cols-12 @lg:grid",e)})),u=(0,s.forwardRef)(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,...s,className:(0,a.cn)("w-full h-px bg-border shrink-0",e)})),m=(0,s.forwardRef)(({className:e,...s},r)=>(0,t.jsx)("h3",{ref:r,...s,className:(0,a.cn)("text-foreground text-xl",e)})),p=(0,s.forwardRef)(({className:e,...s},r)=>(0,t.jsx)("p",{ref:r,...s,className:(0,a.cn)("text-sm text-foreground-light",e)})),f=(0,s.forwardRef)(({className:e,children:s,title:r,...i},n)=>(0,t.jsxs)("div",{ref:n,...i,className:(0,a.cn)("col-span-4 xl:col-span-5 prose text-sm",e),children:[r&&(0,t.jsx)("h2",{children:r}),s]})),g=(0,s.forwardRef)(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,...s,className:(0,a.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",e)})),h=(0,s.forwardRef)(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,...s,className:(0,a.cn)("flex flex-col gap-3 items-center",e)})),y=(0,s.forwardRef)(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,...s,className:(0,a.cn)("flex w-full items-center",e)})),b=(0,s.forwardRef)(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,...s,className:(0,a.cn)("flex flex-row gap-3",e)})),x=(0,s.forwardRef)(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,...s,className:(0,a.cn)("flex flex-col gap-3","min-w-[420px]",e)})),_=(0,s.forwardRef)(({className:e,...s},n)=>(0,t.jsx)("div",{ref:n,...s,className:(0,a.cn)(r,i,"my-8 flex flex-col gap-8",e)}));o.displayName="ScaffoldHeader",l.displayName="ScaffoldTitle",c.displayName="ScaffoldDescription",n.displayName="ScaffoldContainer",u.displayName="ScaffoldDivider",d.displayName="ScaffoldSection",x.displayName="ScaffoldColumn",f.displayName="ScaffoldSectionDetail",g.displayName="ScaffoldSectionContent",h.displayName="ScaffoldFilterAndContent",y.displayName="ScaffoldActionsContainer",b.displayName="ScaffoldActionsGroup",_.displayName="ScaffoldContainerLegacy",m.displayName="ScaffoldSectionTitle",p.displayName="ScaffoldSectionDescription",e.s(["MAX_WIDTH_CLASSES",0,r,"PADDING_CLASSES",0,i,"ScaffoldActionsContainer",0,y,"ScaffoldActionsGroup",0,b,"ScaffoldColumn",0,x,"ScaffoldContainer",0,n,"ScaffoldContainerLegacy",0,_,"ScaffoldDescription",0,c,"ScaffoldDivider",0,u,"ScaffoldFilterAndContent",0,h,"ScaffoldHeader",0,o,"ScaffoldSection",0,d,"ScaffoldSectionContent",0,g,"ScaffoldSectionDescription",0,p,"ScaffoldSectionDetail",0,f,"ScaffoldSectionTitle",0,m,"ScaffoldTitle",0,l])},547723,e=>{"use strict";var t=e.i(478902),s=e.i(389959),a=e.i(843778);let r=(0,s.forwardRef)((e,s)=>(0,t.jsx)("nav",{ref:s,dir:"ltr",...e,className:(0,a.cn)("border-b",e.className),children:(0,t.jsx)("ul",{role:"menu",className:"flex gap-5",children:e.children})})),i=(0,s.forwardRef)(({children:e,className:s,active:r,...i},n)=>(0,t.jsx)("li",{ref:n,"aria-selected":r?"true":"false","data-state":r?"active":"inactive",className:(0,a.cn)("inline-flex items-center justify-center whitespace-nowrap text-sm ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:text-foreground text-foreground-lighter hover:text-foreground data-[state=active]:border-foreground border-b-2 border-transparent *:py-1.5",s),...i,children:e}));e.s(["NavMenu",0,r,"NavMenuItem",0,i])},79771,e=>{"use strict";var t=e.i(478902),s=e.i(215261),a=e.i(898452);e.i(128328);var r=e.i(158639),i=e.i(587433),n=e.i(837710),o=e.i(843778),l=e.i(547723),c=e.i(167892),d=e.i(954676),u=e.i(389959),m=e.i(3259);let p=({title:e,subtitle:a,icon:i,breadcrumbs:n=[],primaryActions:l,secondaryActions:p,className:f,isCompact:g=!1})=>{let{ref:h}=(0,r.useParams)(),y=g&&e?[...n,{label:e}]:n;return(0,t.jsxs)("div",{className:(0,o.cn)("space-y-4",f),children:[(y.length>0||g&&(e||l||p))&&(0,t.jsxs)("div",{className:(0,o.cn)("flex items-center gap-4",g?"justify-between":"mb-4"),children:[(0,t.jsx)("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:n.length>0?(0,t.jsx)(m.Breadcrumb,{className:(0,o.cn)("text-foreground-muted",g&&"text-base","min-w-0 flex-1"),children:(0,t.jsxs)(m.BreadcrumbList,{className:(0,o.cn)(g?"text-base":"text-xs","min-w-0"),children:[n.map((e,a)=>(0,t.jsxs)(u.Fragment,{children:[(0,t.jsx)(m.BreadcrumbItem,{children:e.element?e.element:e.href?(0,t.jsx)(m.BreadcrumbLink,{asChild:!0,className:"flex items-center gap-2",children:(0,t.jsxs)(s.default,{href:h?e.href.replace("[ref]",h):e.href,children:[1===n.length&&!g&&(0,t.jsx)(d.ChevronLeft,{size:16,strokeWidth:1.5}),e.label]})}):(0,t.jsxs)(m.BreadcrumbPage,{className:"flex items-center gap-2",children:[1===n.length&&(0,t.jsx)(d.ChevronLeft,{size:16,strokeWidth:1.5}),e.label]})}),a<n.length-1&&(0,t.jsx)(m.BreadcrumbSeparator,{})]},e.label||`breadcrumb-${a}`)),g&&e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.BreadcrumbSeparator,{}),(0,t.jsx)(m.BreadcrumbItem,{className:"min-w-0 flex-1",children:(0,t.jsx)(m.BreadcrumbPage,{className:"min-w-0",children:e})})]})]})}):g?(0,t.jsx)("div",{className:"min-w-0 flex-1",children:e}):null}),g&&(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[p&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:p}),l&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:l})]})]}),!g&&(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[i&&(0,t.jsx)("div",{className:"text-foreground-light",children:i}),(0,t.jsxs)("div",{className:"space-y-1",children:[e&&(0,t.jsx)(c.ScaffoldTitle,{children:e}),a&&(0,t.jsx)(c.ScaffoldDescription,{className:"text-sm text-foreground-light",children:a})]})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[p&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:p}),l&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:l})]})]})]})};e.s(["PageLayout",0,({children:e,title:d,subtitle:u,icon:m,breadcrumbs:f=[],primaryActions:g,secondaryActions:h,navigationItems:y=[],className:b,size:x="default",isCompact:_=!1})=>{let{ref:v}=(0,r.useParams)(),j=(0,a.useRouter)();return(0,t.jsxs)("div",{className:(0,o.cn)("w-full min-h-full flex flex-col items-stretch",b),children:[(0,t.jsxs)(c.ScaffoldContainer,{size:x,className:(0,o.cn)("w-full mx-auto","full"===x&&(_?"max-w-none !px-6 border-b pt-4":"max-w-none pt-6 !px-10 border-b"),"full"!==x&&(_?"pt-4":"pt-12"),0===y.length&&"full"===x&&(_?"pb-4":"pb-8")),children:[(d||u||g||h||f.length>0)&&(0,t.jsx)(p,{title:d,subtitle:u,icon:m,breadcrumbs:f,primaryActions:g,secondaryActions:h,isCompact:_}),y.length>0&&(0,t.jsx)(l.NavMenu,{className:(0,o.cn)(_?"mt-2":"mt-4","full"===x&&"border-none"),children:y.map(e=>{let a=void 0!==e.active?e.active:j.asPath.split("?")[0]===e.href;return(0,t.jsx)(l.NavMenuItem,{active:a,children:e.href?(0,t.jsxs)(s.default,{href:e.href.includes("[ref]")&&v?e.href.replace("[ref]",v):e.href,className:(0,o.cn)("inline-flex items-center gap-2",a&&"text-foreground"),onClick:e.onClick,children:[e.icon&&(0,t.jsx)("span",{children:e.icon}),e.label,e.badge&&(0,t.jsx)(i.Badge,{variant:"default",children:e.badge})]}):(0,t.jsxs)(n.Button,{type:"link",onClick:e.onClick,className:(0,o.cn)(a&&"text-foreground font-medium"),children:[e.icon&&(0,t.jsx)("span",{className:"mr-2",children:e.icon}),e.label,e.badge&&(0,t.jsx)(i.Badge,{variant:"default",children:e.badge})]})},e.label)})})]}),e]})}],79771)},865389,e=>{"use strict";var t=e.i(478902),s=e.i(898452);e.i(128328);var a=e.i(158639),r=e.i(388147),i=e.i(912793),n=e.i(265735),o=e.i(635494),l=e.i(951138),c=e.i(825713),d=e.i(712227);let u=(0,l.withAuth)(({title:e,children:l})=>{let u=(0,s.useRouter)(),{ref:m}=(0,a.useParams)(),{data:p}=(0,o.useSelectedProjectQuery)(),{data:f}=(0,n.useSelectedOrganizationQuery)(),g=u.pathname.includes("billing")?u.pathname.split("/")[5]:u.pathname.split("/")[4],{projectAuthAll:h,authenticationShowProviders:y,projectEdgeFunctionAll:b,projectStorageAll:x,billingInvoices:_,projectSettingsLegacyJwtKeys:v,projectSettingsLogDrains:j,billingAll:S}=(0,i.useIsFeatureEnabled)(["project_auth:all","authentication:show_providers","project_edge_function:all","project_storage:all","billing:invoices","project_settings:legacy_jwt_keys","project_settings:log_drains","billing:all"]),w=(0,d.generateSettingsMenu)(m,p,f,{auth:h,authProviders:y,edgeFunctions:b,storage:x,invoices:_,legacyJwtKeys:v,logDrains:j,billing:S});return(0,t.jsx)(c.ProjectLayout,{isBlocking:!1,title:e||"Settings",product:"Settings",productMenu:(0,t.jsx)(r.ProductMenu,{page:g,menu:w}),children:l})});e.s(["default",0,u])},232520,e=>{"use strict";var t=e.i(478902),s=e.i(389959),a=e.i(274664),r=e.i(678001),i=e.i(217027),n=e.i(174617),o=e.i(153545),l="AlertDialog",[c,d]=(0,a.createContextScope)(l,[i.createDialogScope]),u=(0,i.createDialogScope)(),m=e=>{let{__scopeAlertDialog:s,...a}=e,r=u(s);return(0,t.jsx)(i.Root,{...r,...a,modal:!0})};m.displayName=l;var p=s.forwardRef((e,s)=>{let{__scopeAlertDialog:a,...r}=e,n=u(a);return(0,t.jsx)(i.Trigger,{...n,...r,ref:s})});p.displayName="AlertDialogTrigger";var f=e=>{let{__scopeAlertDialog:s,...a}=e,r=u(s);return(0,t.jsx)(i.Portal,{...r,...a})};f.displayName="AlertDialogPortal";var g=s.forwardRef((e,s)=>{let{__scopeAlertDialog:a,...r}=e,n=u(a);return(0,t.jsx)(i.Overlay,{...n,...r,ref:s})});g.displayName="AlertDialogOverlay";var h="AlertDialogContent",[y,b]=c(h),x=(0,o.createSlottable)("AlertDialogContent"),_=s.forwardRef((e,a)=>{let{__scopeAlertDialog:o,children:l,...c}=e,d=u(o),m=s.useRef(null),p=(0,r.useComposedRefs)(a,m),f=s.useRef(null);return(0,t.jsx)(i.WarningProvider,{contentName:h,titleName:v,docsSlug:"alert-dialog",children:(0,t.jsx)(y,{scope:o,cancelRef:f,children:(0,t.jsxs)(i.Content,{role:"alertdialog",...d,...c,ref:p,onOpenAutoFocus:(0,n.composeEventHandlers)(c.onOpenAutoFocus,e=>{e.preventDefault(),f.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsx)(x,{children:l}),(0,t.jsx)(P,{contentRef:m})]})})})});_.displayName=h;var v="AlertDialogTitle",j=s.forwardRef((e,s)=>{let{__scopeAlertDialog:a,...r}=e,n=u(a);return(0,t.jsx)(i.Title,{...n,...r,ref:s})});j.displayName=v;var S="AlertDialogDescription",w=s.forwardRef((e,s)=>{let{__scopeAlertDialog:a,...r}=e,n=u(a);return(0,t.jsx)(i.Description,{...n,...r,ref:s})});w.displayName=S;var N=s.forwardRef((e,s)=>{let{__scopeAlertDialog:a,...r}=e,n=u(a);return(0,t.jsx)(i.Close,{...n,...r,ref:s})});N.displayName="AlertDialogAction";var k="AlertDialogCancel",A=s.forwardRef((e,s)=>{let{__scopeAlertDialog:a,...n}=e,{cancelRef:o}=b(k,a),l=u(a),c=(0,r.useComposedRefs)(s,o);return(0,t.jsx)(i.Close,{...l,...n,ref:c})});A.displayName=k;var P=({contentRef:e})=>{let t=`\`${h}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${h}\` by passing a \`${S}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${h}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return s.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},E=e.i(709520),R=e.i(843778),I=e.i(837710);let T=({children:e,...s})=>(0,t.jsx)(f,{...s,children:(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",children:e})});T.displayName=f.displayName;let C=s.forwardRef(({className:e,centered:s=!0,...a},r)=>(0,t.jsx)(g,{ref:r,className:(0,R.cn)("bg-black/40 backdrop-blur-sm","z-50 fixed inset-0 grid place-items-center overflow-y-auto data-closed:animate-overlay-hide py-8",!s&&"flex flex-col flex-start pb-8 sm:pt-12 md:pt-20 lg:pt-32 xl:pt-40 px-5",e),...a}));C.displayName=g.displayName;let L=(0,E.cva)((0,R.cn)("relative z-50 w-full max-w-screen border shadow-md dark:shadow-sm","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[state=closed]:slide-out-to-left-[0%] data-[state=closed]:slide-out-to-top-[0%]","data-[state=open]:slide-in-from-left-[0%] data-[state=open]:slide-in-from-top-[0%]","sm:rounded-lg md:w-full","bg-dash-sidebar"),{variants:{size:{tiny:"sm:align-middle sm:w-full sm:max-w-xs",small:"sm:align-middle sm:w-full sm:max-w-sm",medium:"sm:align-middle sm:w-full sm:max-w-lg",large:"sm:align-middle sm:w-full md:max-w-xl",xlarge:"sm:align-middle sm:w-full md:max-w-3xl",xxlarge:"sm:align-middle sm:w-full md:max-w-6xl",xxxlarge:"sm:align-middle sm:w-full md:max-w-7xl"}},defaultVariants:{size:"small"}}),O=s.forwardRef(({className:e,children:s,size:a,dialogOverlayProps:r,centered:i=!0,...n},o)=>(0,t.jsx)(T,{children:(0,t.jsx)(C,{centered:i,...r,children:(0,t.jsx)(_,{ref:o,className:(0,R.cn)(L({size:a}),e),...n,children:s})})}));O.displayName=_.displayName;let $=({className:e,...s})=>(0,t.jsx)("div",{className:(0,R.cn)("flex flex-col text-left",e),...s});$.displayName="AlertDialogHeader";let D=({className:e,...s})=>(0,t.jsx)("div",{className:(0,R.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 border-t py-3 px-5",e),...s});D.displayName="AlertDialogFooter";let q=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)(j,{ref:a,className:(0,R.cn)("text-base text-foreground border-b px-5 py-3",e),...s}));q.displayName=j.displayName;let F=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)(w,{ref:a,className:(0,R.cn)("text-sm text-foreground-light px-5"," pt-3.5 pb-4",e),...s}));F.displayName=w.displayName;let M=s.forwardRef(({className:e,variant:s="primary",type:a="button",...r},i)=>(0,t.jsx)(N,{ref:i,type:a,className:(0,R.cn)((0,I.buttonVariants)({type:s,size:"tiny"}),e),...r}));M.displayName=N.displayName;let B=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)(A,{ref:a,className:(0,R.cn)((0,I.buttonVariants)({type:"default",size:"tiny"}),"mt-2 sm:mt-0",e),...s}));B.displayName=A.displayName,e.s(["AlertDialog",()=>m,"AlertDialogAction",()=>M,"AlertDialogCancel",()=>B,"AlertDialogContent",()=>O,"AlertDialogDescription",()=>F,"AlertDialogFooter",()=>D,"AlertDialogHeader",()=>$,"AlertDialogTitle",()=>q,"AlertDialogTrigger",()=>p],232520)},924529,e=>{"use strict";var t=e.i(242882),s=e.i(389959);e.i(128328);var a=e.i(86086),r=e.i(993394),i=e.i(460988),n=e.i(234745),o=e.i(912793),l=e.i(10429);let c=(e,c={},d=!0)=>{let u=(0,r.getDefaultHelper)(r.EXPLORER_DATEPICKER_HELPERS),[m,p]=(0,s.useState)({sql:c?.sql||"",iso_timestamp_start:c.iso_timestamp_start?c.iso_timestamp_start:u.calcFrom(),iso_timestamp_end:c.iso_timestamp_end?c.iso_timestamp_end:u.calcTo()}),{logsMetadata:f}=(0,o.useIsFeatureEnabled)(["logs:metadata"]);(0,s.useEffect)(()=>{p(e=>({...e,...c,sql:c?.sql??e.sql,iso_timestamp_start:c.iso_timestamp_start??e.iso_timestamp_start,iso_timestamp_end:c.iso_timestamp_end??e.iso_timestamp_end}))},[c.sql,c.iso_timestamp_start,c.iso_timestamp_end]);let g=d&&void 0!==e&&!!m.sql,h=(0,i.checkForWithClause)(m.sql||""),y=(0,i.checkForILIKEClause)(m.sql||""),{data:b,error:x,isPending:_,isRefetching:v,refetch:j}=(0,t.useQuery)({queryKey:["projects",e,"logs",m],queryFn:async({signal:t})=>{let{data:s,error:a}=await (0,n.get)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:e},query:m},signal:t});if(a)throw a;return s},enabled:g,refetchOnWindowFocus:!1}),S=x?x.message:null;return!S&&b?.error&&(S=b?.error),a.IS_PLATFORM&&(h&&(S={message:"The parser does not yet support WITH and subquery statements.",docs:`${l.DOCS_URL}/guides/platform/advanced-log-filtering#the-with-keyword-and-subqueries-are-not-supported`}),y&&(S={message:"BigQuery does not support ILIKE. Use REGEXP_CONTAINS instead.",docs:`${l.DOCS_URL}/guides/platform/advanced-log-filtering#the-ilike-and-similar-to-keywords-are-not-supported`})),{params:m,isLoading:g&&_||v,logData:(b?.result??[]).map(e=>{if(f)return e;{let{metadata:t,...s}=e;return s}}),error:S,changeQuery:(e="")=>{p(t=>({...t,sql:e}))},runQuery:()=>j(),setParams:p}};e.s(["default",0,c,"useLogsQuery",0,c])},656429,984965,e=>{"use strict";var t=e.i(242882),s=e.i(234745);let a={oauthApps:e=>[e,"oauth-apps"],authorizedApps:e=>[e,"authorized-apps"]};async function r({slug:e},t){if(!e)throw Error("Organization slug is required");let{data:a,error:r}=await (0,s.get)("/platform/organizations/{slug}/oauth/apps",{params:{path:{slug:e},query:{type:"authorized"}}});return r&&(0,s.handleError)(r),a}e.s(["oauthAppKeys",0,a],984965),e.s(["useAuthorizedAppsQuery",0,({slug:e},{enabled:s=!0,...i}={})=>(0,t.useQuery)({queryKey:a.authorizedApps(e),queryFn:({signal:t})=>r({slug:e},t),enabled:s&&void 0!==e,...i})],656429)},445469,459806,e=>{"use strict";var t=e.i(242882),s=e.i(234745);let a={list:e=>["projects",e,"jwt-signing-keys"],legacy:e=>["projects",e,"legacy-jwt-signing-key"]};async function r({projectRef:e},t){if(!e)throw Error("projectRef is required");let{data:a,error:r}=await (0,s.get)("/v1/projects/{ref}/config/auth/signing-keys/legacy",{params:{path:{ref:e}},signal:t});return r&&(0,s.handleError)(r),a}e.s(["jwtSigningKeysKeys",0,a],459806),e.s(["useLegacyJWTSigningKeyQuery",0,({projectRef:e},{enabled:s,...i}={})=>(0,t.useQuery)({queryKey:a.legacy(e),queryFn:({signal:t})=>r({projectRef:e},t),enabled:s&&!!e,retry:!1,refetchOnWindowFocus:!1,...i})],445469)},42081,e=>{"use strict";let t="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;e.s(["DEBUG_BUILD",()=>t])},580351,e=>{"use strict";var t=e.i(478902),s=e.i(79771),a=e.i(167892);e.i(128328);var r=e.i(158639),i=e.i(513826),n=e.i(10429);e.s(["default",0,({children:e})=>{let{ref:o}=(0,r.useParams)(),l=[{label:"Publishable and secret API keys",href:`/project/${o}/settings/api-keys`,id:"new-keys"},{label:"Legacy anon, service_role API keys",href:`/project/${o}/settings/api-keys/legacy`,id:"legacy-keys"}];return(0,t.jsx)(s.PageLayout,{title:"API Keys",subtitle:"Configure API keys to securely control access to your project",navigationItems:l,secondaryActions:(0,t.jsx)(i.DocsButton,{href:`${n.DOCS_URL}/guides/api/api-keys`}),children:(0,t.jsx)(a.ScaffoldContainer,{className:"flex flex-col py-8 gap-8",bottomPadding:!0,children:e})})}])},672296,e=>{"use strict";function t(e){return e.split("#")[0]}function s(e,t={}){let{maxDepth:a=3,redaction:r="[REDACTED]",truncationNotice:i="[REDACTED: max depth reached]",sensitiveKeys:n=[]}=t,o=new Set(["password","passwd","pwd","pass","secret","token","id_token","access_token","refresh_token","apikey","api_key","api-key","apiKey","key","privatekey","private_key","client_secret","clientSecret","auth","authorization","ssh_key","sshKey","bearer","session","cookie","csrf","xsrf","ip","ip_address","ipAddress","aws_access_key_id","aws_secret_access_key","gcp_service_account_key",...n].map(e=>e.toLowerCase())),l=[{re:/\b(?:(?:25[0-5]|2[0-4]\d|1?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|1?\d?\d)\b/g,reason:"ip"},{re:/\b(?:[A-Fa-f0-9]{1,4}:){2,7}[A-Fa-f0-9]{1,4}\b/g,reason:"ip6"},{re:/\b(AKI|ASI)A[0-9A-Z]{16}\b/g,reason:"aws_access_key_id"},{re:/\b[0-9A-Za-z/+]{40}\b/g,reason:"aws_secret_access_key_like"},{re:/\bBearer\s+[A-Za-z0-9\-._~+/]+=*\b/g,reason:"bearer"},{re:/\b[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\b/g,reason:"jwt_like"},{re:/\b[A-Za-z0-9_\-]{24,64}\b/g,reason:"long_token"}],c=new WeakMap;function d(e){let t=e;for(let{re:e}of l)t=t.replace(e,r);return t}function u(e){return o.has(String(e).toLowerCase())}return e.map(e=>(function e(t,s){if(null==t||"number"==typeof t||"boolean"==typeof t||"bigint"==typeof t)return t;if("string"==typeof t)return d(t);if("function"==typeof t)return"[Function]";if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(ArrayBuffer.isView(t)&&!(t instanceof DataView))return`[TypedArray byteLength=${t.byteLength}]`;if(t instanceof ArrayBuffer)return`[ArrayBuffer byteLength=${t.byteLength}]`;if(s>=a)return i;if("object"==typeof t){if(c.has(t))return"[Circular]";if(Array.isArray(t)){let a=[];c.set(t,a);for(let r=0;r<t.length;r++)a[r]=e(t[r],s+1);return a}if(function(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}(t)){let a={};for(let[i,n]of(c.set(t,a),Object.entries(t)))u(i)?a[i]=r:a[i]=e(n,s+1);return a}if(t instanceof Map){let a=[];for(let[i,n]of(c.set(t,a),t.entries())){let t=u(i)?r:e(i,s+1),o=u(i)?r:e(n,s+1);a.push([t,o])}return a}if(t instanceof Set){let a=[];for(let r of(c.set(t,a),t.values()))a.push(e(r,s+1));return a}if(t instanceof URL)return t.toString();if(t instanceof Error){let e={name:t.name,message:d(t.message),stack:i};return c.set(t,e),e}try{return d(String(t))}catch{return d(Object.prototype.toString.call(t))}}return d(String(t))})(e,0))}e.s(["sanitizeArrayOfObjects",()=>s,"sanitizeUrlHashParams",()=>t])},806379,e=>{"use strict";var t=e.i(478902),s=e.i(580351),a=e.i(448710),r=e.i(865389),i=e.i(902858),n=e.i(711789),o=e.i(867637),l=e.i(774803),c=e.i(215261),d=e.i(389959),u=e.i(355901);e.i(128328);var m=e.i(657588),p=e.i(158639),f=e.i(368315),g=e.i(246932),h=e.i(377451),y=e.i(2579),b=e.i(746301),x=e.i(95053),_=e.i(55956),v=e.i(924529);let j=({showTitle:e=!0,showNotice:s=!0,showLegacyText:a=!0})=>{let{ref:r}=(0,p.useParams)(),{data:j,isError:S,isPending:w}=(0,h.useProjectSettingsV2Query)({projectRef:r}),{data:N,isError:k,isPending:A}=(0,g.useJwtSecretUpdatingStatusQuery)({projectRef:r}),P=N?.jwtSecretUpdateStatus,{isLoading:E,can:R}=(0,y.useAsyncCheckPermissions)(i.PermissionAction.READ,"service_api_keys"),I=void 0===P||P===n.JwtSecretUpdateStatus.Updated,T=(0,d.useMemo)(()=>j?.service_api_keys??[],[j]),C=0===T.length,L=(0,m.useFlag)("showApiKeysLastUsed"),{isLoading:O,logData:$}=function({projectRef:e,enabled:t}){let s=(0,d.useRef)(new Date).current;return(0,v.default)(e,{iso_timestamp_start:new Date(s.getTime()-864e5).toISOString(),iso_timestamp_end:s.toISOString(),sql:"-- last-used-anon--service_role-api-keys\nSELECT unix_millis(max(timestamp)) as timestamp, payload.role, payload.signature_prefix FROM edge_logs cross join unnest(metadata) as m cross join unnest(m.request) as request cross join unnest(request.sb) as sb cross join unnest(sb.jwt) as jwt cross join unnest(jwt.apikey) as apikey cross join unnest(apikey.payload) as payload WHERE apikey.invalid is null and payload.issuer = 'supabase' and payload.algorithm = 'HS256' and payload.role in ('anon', 'service_role') GROUP BY payload.role, payload.signature_prefix"},t)}({projectRef:r??"",enabled:L}),D=(0,d.useMemo)(()=>{if(T.length<1||!$||$.length<1||!L)return{};try{if(T.length<1||!$||$.length<1)return{};let e=(0,_.default)();return T.reduce((t,s)=>{let a=$?.find(({role:e,signature_prefix:t})=>e&&t&&s.tags.indexOf(e)>=0&&s.api_key.split(".")[2]?.startsWith(t))?.timestamp;return a&&(t[s.api_key]=_.default.duration(e.diff((0,_.default)(a))).humanize(!1)),t},{})}catch(e){return u.toast.error("Failed to identify when the anon and service_role keys were last used"),console.error(e),{}}},[$,T,L]);return(0,t.jsxs)(f.default,{noMargin:!0,title:e&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h5",{className:"text-base",children:"Project API Keys"}),(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:["Your API is secured behind an API gateway which requires an API Key for every request.",(0,t.jsx)("br",{}),"You can use the keys below in the Supabase client libraries.",(0,t.jsx)("br",{})]})]}),children:[w||E?(0,t.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,t.jsx)(l.Loader2,{className:"animate-spin",size:16,strokeWidth:1.5}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Retrieving API keys"})]}):R?S||k?(0,t.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,t.jsx)(o.AlertCircle,{size:16,strokeWidth:1.5}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:S?"Failed to retrieve API keys":"Failed to update JWT secret"})]}):C||w||A?(0,t.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,t.jsx)(l.Loader2,{className:"animate-spin",size:16,strokeWidth:1.5}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:w||C?"Retrieving API keys":"JWT secret is being updated"})]}):T.map((e,s)=>(0,t.jsxs)(f.default.Content,{className:s>=1&&"border-t border-panel-border-interior-light [[data-theme*=dark]_&]:border-panel-border-interior-dark",children:[(0,t.jsx)(x.FormLayout,{layout:"horizontal",label:(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[e.tags?.split(",").map((e,s)=>(0,t.jsx)("code",{className:"text-code-inline",children:e},`${e}${s}`)),"service_role"===e.tags&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("code",{className:"text-code-inline !bg-destructive !text-white !border-destructive",children:"secret"})}),"anon"===e.tags&&(0,t.jsx)("code",{className:"text-code-inline",children:"public"})]}),description:"service_role"===e.tags?(0,t.jsxs)(t.Fragment,{children:["This key has the ability to bypass Row Level Security. Never share it publicly. If leaked, generate a new JWT secret immediately."," ",a&&(0,t.jsxs)("span",{children:["Prefer using"," ",(0,t.jsx)(c.default,{href:`/project/${r}/settings/api-keys/new`,className:"text-link underline",children:"Secret API keys"})," ","instead."]})]}):(0,t.jsxs)(t.Fragment,{children:["This key is safe to use in a browser if you have enabled Row Level Security for your tables and configured policies."," ",a&&(0,t.jsxs)("span",{children:["Prefer using"," ",(0,t.jsx)(c.default,{href:`/project/${r}/settings/api-keys/new`,className:"text-link underline",children:"Publishable API keys"})," ","instead."]})]}),children:(0,t.jsx)(b.Input,{readOnly:!0,className:"font-mono",copy:R&&I,reveal:"anon"!==e.tags&&R&&I,value:R?P===n.JwtSecretUpdateStatus.Failed?"JWT secret update failed, new API key may have issues":P===n.JwtSecretUpdateStatus.Updating?"Updating JWT secret...":e?.api_key??"You need additional permissions to view API keys":"You need additional permissions to view API keys",onChange:()=>{}})}),L&&(0,t.jsx)("div",{className:"pt-2 text-foreground-lighter w-full text-sm data-[invisible=true]:invisible","data-invisible":O,children:D[e.api_key]?`Last request was ${D[e.api_key]} ago.`:"No requests in the past 24 hours."})]},e.api_key)):(0,t.jsxs)("div",{className:"flex items-center py-8 px-8 space-x-2",children:[(0,t.jsx)(o.AlertCircle,{size:16,strokeWidth:1.5}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"You don't have permission to view API keys. These keys restricted to users with higher access levels."})]}),s?(0,t.jsx)(f.default.Notice,{className:"border-t",title:"API keys have moved",badgeLabel:"Changelog",description:`
  \`anon\` and \`service_role\` API keys can now be replaced with \`publishable\` and \`secret\` API keys.
  `,href:"https://github.com/orgs/supabase/discussions/29260",buttonText:"Read the announcement"}):null]})};var S=e.i(215312),w=e.i(170149),N=e.i(38429),k=e.i(356003),A=e.i(234745),P=e.i(348682);async function E(e){if(!e.projectRef)throw Error("projectRef is required");let{data:t,error:s}=await (0,A.put)("/v1/projects/{ref}/api-keys/legacy",{params:{path:{ref:e.projectRef},query:{enabled:e.enabled}}});return s&&(0,A.handleError)(s),t}var R=e.i(597541),I=e.i(445469),T=e.i(656429),C=e.i(265735),L=e.i(232520);let O=()=>{let{ref:e}=(0,p.useParams)(),{data:s}=(0,C.useSelectedOrganizationQuery)(),[a,r]=(0,d.useState)(!1),[n,o]=(0,d.useState)(!1),{can:l}=(0,y.useAsyncCheckPermissions)(i.PermissionAction.SECRETS_READ,"*"),{can:c,isSuccess:u}=(0,y.useAsyncCheckPermissions)(i.PermissionAction.SECRETS_WRITE,"*"),{data:m,isSuccess:g}=(0,R.useLegacyAPIKeysStatusQuery)({projectRef:e},{enabled:l}),{data:h}=(0,I.useLegacyJWTSigningKeyQuery)({projectRef:e},{enabled:l}),{data:b=[],isSuccess:x}=(0,T.useAuthorizedAppsQuery)({slug:s?.slug}),{enabled:_}=m||{};return g&&u&&x?(0,t.jsxs)("section",{children:[(0,t.jsx)(f.default,{children:(0,t.jsx)(f.default.Content,{children:(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("p",{className:"text-sm",children:_?"Disable legacy API keys":"Re-enabling legacy API keys"}),(0,t.jsx)("p",{className:"text-foreground-light text-sm",children:_?"Make sure you are no longer using your legacy API keys before proceeding.":"We recommend you use the new API keys whenever possible, but re-enabling is an option."})]}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)(S.ButtonTooltip,{type:"default",onClick:b?.length?()=>o(!0):()=>r(!0),disabled:!c||!_&&h?.status==="revoked",tooltip:{content:{side:"bottom",text:c?_||h?.status!=="revoked"?void 0:"The legacy JWT secret is revoked. Re-enabling is not possible until it is at least moved to previously used.":"You need additional permissions to enable or disable JWT-based API keys"}},children:m.enabled?"Disable JWT-based API keys":"Re-enable JWT-based API keys"})})]})})}),(0,t.jsx)($,{visible:a,onClose:()=>r(!1),legacyAPIKeysStatusData:m}),(0,t.jsx)(L.AlertDialog,{open:n,onOpenChange:e=>o(e),children:(0,t.jsxs)(L.AlertDialogContent,{children:[(0,t.jsxs)(L.AlertDialogHeader,{children:[(0,t.jsx)(L.AlertDialogTitle,{children:"Apps using Supabase may break"}),(0,t.jsx)(L.AlertDialogDescription,{children:"Your project uses apps that integrate with Supabase. Disabling the legacy API keys is a brand new feature and the apps youre using may not have added support for this yet. It can cause them to stop functioning. Check before continuing."})]}),(0,t.jsxs)(L.AlertDialogFooter,{children:[(0,t.jsx)(L.AlertDialogCancel,{children:"Cancel"}),(0,t.jsx)(L.AlertDialogAction,{variant:"danger",onClick:()=>r(!0),children:"Disable API keys"})]})]})})]}):null},$=({visible:e,onClose:s,legacyAPIKeysStatusData:a})=>{let{ref:r}=(0,p.useParams)(),{enabled:i}=a||{},{mutate:n,isPending:o}=(({onSuccess:e,onError:t,...s}={})=>{let a=(0,k.useQueryClient)();return(0,N.useMutation)({mutationFn:e=>E(e),async onSuccess(t,s,r){let{projectRef:i}=s;await a.invalidateQueries({queryKey:P.apiKeysKeys.status(i)}),await e?.(t,s,r)},async onError(e,s,a){void 0===t?u.toast.error(`Failed to ${s.enabled?"re-enable":"disable"} JWT-based API keys: ${e.message}`):t(e,s,a)},...s})})();return(0,t.jsx)(w.TextConfirmModal,{size:"medium",visible:e,onCancel:()=>s(),onConfirm:()=>{let e=!a?.enabled;n({projectRef:r,enabled:e},{onSuccess:()=>{u.toast.success(e?"Your anon and service_role keys have been re-enabled!":"Your anon and service_role keys have been disabled!"),s()}})},title:i?"Disable JWT-based keys":"Re-enable JWT-based keys",confirmString:i?"disable":"re-enable",confirmLabel:`Confirm to ${i?"disable":"re-enable"} anon and service_role`,confirmPlaceholder:i?"disable":"re-enable",loading:o,variant:i?"destructive":"default",alert:i?{title:"Ensure legacy keys are no longer in use before disabling",description:(0,t.jsxs)("span",{className:"prose text-sm",children:["Disabling ",(0,t.jsx)("code",{children:"anon"})," and ",(0,t.jsx)("code",{children:"service_role"})," keys while they are in use will cause downtime for your application. Ensure they are no longer in use before proceeding. If you have not created a publishable and at least one secret API key, some dashboard functionality may become unavailable.",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),(0,t.jsxs)("span",{className:"text-danger",children:["This disables API keys when used in the ",(0,t.jsx)("code",{children:"apikey"})," header. They remain valid as a JWT."]})]})}:{title:"Publishable and secret keys are preferred",description:(0,t.jsxs)("span",{className:"prose text-sm",children:["Re-enabling ",(0,t.jsx)("code",{children:"anon"})," and ",(0,t.jsx)("code",{children:"service_role"})," keys may be appropriate in certain cases, but using a publishable and secret key is more secure. We recommend against re-enabling legacy API keys."]})}})},D=()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j,{showTitle:!1,showNotice:!1}),(0,t.jsx)(O,{})]});D.getLayout=e=>(0,t.jsx)(a.default,{children:(0,t.jsx)(r.default,{children:(0,t.jsx)(s.default,{children:e})})}),e.s(["default",0,D],806379)},540388,(e,t,s)=>{let a="/project/[ref]/settings/api-keys/legacy";(window.__NEXT_P=window.__NEXT_P||[]).push([a,()=>e.r(806379)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([a])})},111410,e=>{e.v(t=>Promise.all(["static/chunks/a428d2b7e6671266.js","static/chunks/92a7c4be60dd12e3.js"].map(t=>e.l(t))).then(()=>t(677146)))},883471,e=>{e.v(t=>Promise.all(["static/chunks/69b2faaedd35af23.js"].map(t=>e.l(t))).then(()=>t(518769)))},587525,e=>{e.v(t=>Promise.all(["static/chunks/da2f61ca91d09b7f.js"].map(t=>e.l(t))).then(()=>t(127351)))},168845,e=>{e.v(t=>Promise.all(["static/chunks/99714db866f77205.js"].map(t=>e.l(t))).then(()=>t(238625)))},591393,e=>{e.v(t=>Promise.all(["static/chunks/e9ad074e72197584.js"].map(t=>e.l(t))).then(()=>t(217383)))},379416,e=>{e.v(t=>Promise.all(["static/chunks/d690909a90d04a2e.js"].map(t=>e.l(t))).then(()=>t(931066)))},15732,e=>{e.v(t=>Promise.all(["static/chunks/0d5256e667945be4.js"].map(t=>e.l(t))).then(()=>t(760545)))},957083,e=>{e.v(t=>Promise.all(["static/chunks/e7d07ff1ae210964.js"].map(t=>e.l(t))).then(()=>t(667558)))},207969,e=>{e.v(t=>Promise.all(["static/chunks/8dd7282c22f923f6.js"].map(t=>e.l(t))).then(()=>t(427328)))},992842,e=>{e.v(t=>Promise.all(["static/chunks/d064a48a1c7cf778.js"].map(t=>e.l(t))).then(()=>t(793794)))},239573,e=>{e.v(t=>Promise.all(["static/chunks/edc5d84148401903.js"].map(t=>e.l(t))).then(()=>t(210246)))},963685,e=>{e.v(t=>Promise.all(["static/chunks/92b20126e5ca0919.js"].map(t=>e.l(t))).then(()=>t(983756)))},665811,e=>{e.v(t=>Promise.all(["static/chunks/e37e25f8b82619ef.js"].map(t=>e.l(t))).then(()=>t(544836)))},369256,e=>{e.v(t=>Promise.all(["static/chunks/8296dc618dae72f0.js"].map(t=>e.l(t))).then(()=>t(930239)))},16037,e=>{e.v(t=>Promise.all(["static/chunks/3251b4bc539a554b.js"].map(t=>e.l(t))).then(()=>t(397698)))},616788,e=>{e.v(t=>Promise.all(["static/chunks/c6b81ab43a1d5d23.js"].map(t=>e.l(t))).then(()=>t(7346)))},315750,e=>{e.v(t=>Promise.all(["static/chunks/32c236321136eb7c.js"].map(t=>e.l(t))).then(()=>t(531289)))},460510,e=>{e.v(t=>Promise.all(["static/chunks/d91062943e6a7c30.js"].map(t=>e.l(t))).then(()=>t(276898)))},550265,e=>{e.v(t=>Promise.all(["static/chunks/75ff0e62b8a31d26.js"].map(t=>e.l(t))).then(()=>t(259714)))},830960,e=>{e.v(t=>Promise.all(["static/chunks/b44aa26556fee7df.js"].map(t=>e.l(t))).then(()=>t(882885)))},336744,e=>{e.v(t=>Promise.all(["static/chunks/2b0767b5c008139a.js"].map(t=>e.l(t))).then(()=>t(955268)))},63631,e=>{e.v(t=>Promise.all(["static/chunks/21a4706e1f02d90b.js"].map(t=>e.l(t))).then(()=>t(853630)))},912072,e=>{e.v(t=>Promise.all(["static/chunks/c17c80e5efc43419.js"].map(t=>e.l(t))).then(()=>t(311301)))},730314,e=>{e.v(t=>Promise.all(["static/chunks/dcadd9d46d72282e.js","static/chunks/293ae4c32f2932e0.js","static/chunks/82dddbda1a808189.js","static/chunks/d3a06a9a43f3833e.js","static/chunks/87b9766a4d16d1da.js","static/chunks/cc8130a84ee9bc2c.css"].map(t=>e.l(t))).then(()=>t(686651)))}]);

//# debugId=31253142-7602-4a31-bf9b-b1fbe63444a1
//# sourceMappingURL=6ecdb5b9eb509690.js.map