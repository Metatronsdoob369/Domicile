;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="ec4db25d-f90c-a5f1-482b-3bf5385dfd9d")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,223600,e=>{"use strict";var t=e.i(478902),r=e.i(370410),a=e.i(816467),l=e.i(389959),n=e.i(837710),s=e.i(843778),o=e.i(375761);let i=(0,l.forwardRef)(({text:e,asyncText:i,iconOnly:c=!1,children:u,onClick:d,copyLabel:p="Copy",copiedLabel:h="Copied",...f},m)=>{let[g,x]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{if(!g)return;let e=setTimeout(()=>x(!1),2e3);return()=>clearTimeout(e)},[g]),(0,t.jsx)(n.Button,{ref:m,onClick:async t=>{let r=i?await i():e;x(!0),(0,o.copyToClipboard)(r),d?.(t)},...f,className:(0,s.cn)({"px-1":c},f.className),icon:g?(0,t.jsx)(r.Check,{strokeWidth:2,className:"text-brand"}):f.icon??(0,t.jsx)(a.Copy,{}),children:!c&&(0,t.jsx)(t.Fragment,{children:u??(g?h:p)})})});i.displayName="CopyButton",e.s(["default",0,i])},271332,e=>{"use strict";var t=e.i(478902),r=e.i(389959),a=e.i(843778),l=e.i(837710),n=e.i(253214);let s=(0,r.forwardRef)(({children:e,customFooter:s,description:o,hideFooter:i=!1,alignFooter:c="left",layout:u="horizontal",loading:d=!1,cancelText:p="Cancel",onConfirm:h=()=>{},onCancel:f=()=>{},confirmText:m="Confirm",showCloseButton:g=!0,footerBackground:x,variant:y="success",visible:v=!1,size:j="large",style:b,overlayStyle:C,contentStyle:S,triggerElement:N,header:k,modal:O,defaultOpen:w,...I},E)=>{let[T,_]=r.default.useState(!!v&&v);(0,r.useEffect)(()=>{_(v)},[v]);let R=s||(0,t.jsxs)("div",{className:"flex w-full space-x-2",style:{width:"100%",justifyContent:"vertical"===u?"center":"right"===c?"flex-end":"flex-start"},children:[(0,t.jsx)(l.Button,{type:"default",onClick:f,disabled:d,children:p}),(0,t.jsx)(l.Button,{onClick:h,disabled:d,loading:d,type:"danger"===y?"danger":"warning"===y?"warning":"primary",children:m})]});return(0,t.jsxs)(n.Dialog,{open:T,defaultOpen:w,onOpenChange:function(e){void 0===v||e?_(e):f()},modal:O,children:[N&&(0,t.jsx)(n.DialogTrigger,{children:N}),(0,t.jsxs)(n.DialogContent,{ref:E,hideClose:!g,...I,size:j,children:[k||o?(0,t.jsxs)(n.DialogHeader,{className:(0,a.cn)("border-b"),padding:"small",children:[k&&(0,t.jsx)(n.DialogTitle,{children:k}),o&&(0,t.jsx)(n.DialogDescription,{children:o})]}):null,e,!i&&(0,t.jsx)(n.DialogFooter,{padding:"small",children:R})]})]})}),o=(0,r.forwardRef)(({...e},r)=>(0,t.jsx)(n.DialogSection,{ref:r,...e,padding:"small",className:(0,a.cn)(e.className)})),i=(0,r.forwardRef)(({...e},r)=>(0,t.jsx)(n.DialogSectionSeparator,{ref:r,...e}));s.Content=o,s.Separator=i,e.s(["default",0,s])},40892,e=>{"use strict";var t=e.i(271332);e.s(["Modal",()=>t.default])},388034,e=>{"use strict";let t=(0,e.i(388019).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["default",()=>t])},61187,e=>{"use strict";var t=e.i(388034);e.s(["RefreshCw",()=>t.default])},520124,e=>{"use strict";var t=e.i(460988),r=e.i(389959);e.s(["useFillTimeseriesSorted",0,(...e)=>(0,r.useMemo)(()=>{let[r,a]=e;if(!r[0]?.[a])return{data:r,error:void 0,isError:!1};try{return{data:(0,t.fillTimeseries)(...e).sort((t,r)=>new Date(t[e[1]])-new Date(r[e[1]])),error:void 0,isError:!1}}catch(e){return{data:[],error:e,isError:!0}}},[JSON.stringify(e[0]),...e])])},330287,e=>{"use strict";var t=e.i(242882),r=e.i(234745),a=e.i(10429),l=e.i(346691);async function n({projectRef:e},t){if(!e)throw Error("Project ref is required");let{data:a,error:l}=await (0,r.get)("/platform/projects/{ref}/load-balancers",{params:{path:{ref:e}},signal:t});return l&&(0,r.handleError)(l),a}e.s(["useLoadBalancersQuery",0,({projectRef:e},{enabled:r=!0,...s}={})=>(0,t.useQuery)({queryKey:l.replicaKeys.loadBalancers(e),queryFn:({signal:t})=>n({projectRef:e},t),enabled:r&&void 0!==e&&a.IS_PLATFORM,...s})])},979377,e=>{"use strict";var t=e.i(478902),r=e.i(215261),a=e.i(265735),l=e.i(837710),n=e.i(40892),s=e.i(993394);e.s(["default",0,({show:e,setShowUpgradePrompt:o,title:i="Log retention",description:c="Logs can be retained up to a duration of 3 months depending on the plan that your project is on.",source:u="logsRetentionUpgradePrompt"})=>{let{data:d}=(0,a.useSelectedOrganizationQuery)();return(0,t.jsxs)(n.Modal,{hideFooter:!0,visible:e,size:"medium",header:i,onCancel:()=>o(!1),children:[(0,t.jsx)(n.Modal.Content,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm",children:c}),(0,t.jsxs)("div",{className:"border-control bg-surface-300 rounded border",children:[(0,t.jsxs)("div",{className:"flex items-center px-4 pt-2 pb-1",children:[(0,t.jsx)("p",{className:"text-foreground-light w-[40%] text-sm",children:"Plan"}),(0,t.jsx)("p",{className:"text-foreground-light w-[60%] text-sm",children:"Retention duration"})]}),(0,t.jsxs)("div",{className:"py-1",children:[(0,t.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,t.jsx)("p",{className:"w-[40%] text-sm",children:"Free"}),(0,t.jsx)("p",{className:"w-[60%] text-sm",children:s.TIER_QUERY_LIMITS.FREE.text})]}),(0,t.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,t.jsx)("p",{className:"w-[40%] text-sm",children:"Pro"}),(0,t.jsx)("p",{className:"w-[60%] text-sm",children:s.TIER_QUERY_LIMITS.PRO.text})]}),(0,t.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,t.jsx)("p",{className:"w-[40%] text-sm",children:"Team"}),(0,t.jsx)("p",{className:"w-[60%] text-sm",children:s.TIER_QUERY_LIMITS.TEAM.text})]}),(0,t.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,t.jsx)("p",{className:"w-[40%] text-sm",children:"Enterprise"}),(0,t.jsx)("p",{className:"w-[60%] text-sm",children:s.TIER_QUERY_LIMITS.ENTERPRISE.text})]})]})]})]})}),(0,t.jsx)(n.Modal.Separator,{}),(0,t.jsxs)(n.Modal.Content,{className:"flex justify-end gap-3",children:[(0,t.jsx)(l.Button,{type:"default",onClick:()=>o(!1),children:"Close"}),(0,t.jsx)(l.Button,{asChild:!0,size:"tiny",children:(0,t.jsx)(r.default,{href:`/org/${d?.slug}/billing?panel=subscriptionPlan&source=${u}`,children:"Upgrade"})})]})]})}])},218786,e=>{"use strict";var t=e.i(478902);e.i(223600),e.i(460988);var r=e.i(867637),a=e.i(833655);e.i(55956);var l=e.i(843778);function n(e){let t=JSON.stringify(e,null,2);return(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="number text-tomato-900";return/^"/.test(e)?t=/:$/.test(e)?"key text-foreground":"string text-brand-600":/true|false/.test(e)?t="boolean text-blue-900":/null/.test(e)&&(t="null text-amber-1100"),'<span class="'+t+'">'+e+"</span>"}).split(`
`).map(e=>`<span class="line text-xs">${e}</span>`).join("\n")}e.s(["ResponseCodeFormatter",0,({value:e})=>{if(!e)return(0,t.jsx)("div",{children:(0,t.jsx)("label",{className:"text-xs text-border-stronger",children:"No data"})});let r=({children:e,className:r})=>(0,t.jsx)("div",{className:"flex h-full items-center",children:(0,t.jsx)("div",{className:(0,l.cn)("relative flex h-6 items-center rounded-md justify-center px-2 py-1 text-center",r),children:(0,t.jsx)("label",{className:"block font-mono text-sm",children:e})})});switch(e.toString().split("")[0]){case"1":return(0,t.jsx)(r,{children:e});case"2":return(0,t.jsx)(r,{className:"bg-surface-100 text-brand",children:e});case"5":return(0,t.jsx)(r,{className:"bg-red-300 text-red-1100",children:e});case"4":case"3":return(0,t.jsx)(r,{className:"bg-amber-300 text-amber-1100",children:e});default:return(0,t.jsx)(r,{className:"bg-surface-100 text-foreground-lighter",children:e})}},"RowLayout",0,({children:e})=>(0,t.jsx)("div",{className:"flex h-full w-full items-center gap-4",children:e}),"SeverityFormatter",0,({value:e,uppercase:l=!0})=>{if(!e)return(0,t.jsx)("div",{children:(0,t.jsx)("label",{className:"text-xs text-border-stronger",children:"No data"})});let n=e.toUpperCase(),s=l?n:e,o=({className:e,children:r})=>(0,t.jsx)("div",{className:`w-24 flex items-center h-full ${e}`,children:r});switch(n){case"UNCAUGHTEXCEPTION":case"PANIC":case"FATAL":case"ERROR":return(0,t.jsxs)(o,{className:"gap-1",children:[(0,t.jsx)("div",{className:" p-0.5 rounded !text-red-900",children:(0,t.jsx)(r.AlertCircle,{size:14,strokeWidth:2})}),(0,t.jsx)("span",{className:"!text-red-900 !block titlecase",children:s})]});case"INFO":case"DEBUG":return(0,t.jsxs)(o,{className:"gap-1",children:[(0,t.jsx)("div",{className:" p-0.5 rounded !text-blue-900",children:(0,t.jsx)(r.AlertCircle,{size:14,strokeWidth:2})}),(0,t.jsx)("span",{className:"!text-blue-900 !block titlecase",children:s})]});case"LOG":return(0,t.jsxs)(o,{className:"gap-1",children:[(0,t.jsx)("div",{className:" p-0.5 rounded !text-blue-900",children:(0,t.jsx)(a.Info,{size:14,strokeWidth:2})}),(0,t.jsx)("span",{className:"!text-blue-900 !block titlecase",children:s})]});case"WARNING":return(0,t.jsxs)(o,{className:"gap-1",children:[(0,t.jsx)("div",{className:" p-0.5 rounded !text-amber-900",children:(0,t.jsx)(r.AlertCircle,{size:14,strokeWidth:2})}),(0,t.jsx)("span",{className:"!text-amber-900 !block titlecase",children:s})]});default:return(0,t.jsx)(o,{children:(0,t.jsx)("div",{className:"relative rounded px-2 py-1 text-center h-6 flex justify-center items-center bg-surface-100",children:(0,t.jsx)("label",{className:"block font-mono text-sm text-foreground-lighter",children:s})})})}},"TextFormatter",0,({value:e,className:r})=>(0,t.jsx)("span",{className:(0,l.cn)("font-mono text-xs truncate select-text cursor-text",r),children:e}),"jsonSyntaxHighlight",()=>n])},238921,e=>{"use strict";var t=e.i(478902),r=e.i(55956),a=e.i(389959),l=e.i(151675),n=e.i(942032),s=e.i(30772),o=e.i(214765),i=e.i(941327),c=e.i(462273),u=e.i(843778);let d="hsl(var(--background-overlay-hover))",p="hsl(var(--brand-default))",h="hsl(var(--destructive-default))",f="hsl(var(--warning-default))";e.s(["LogsBarChart",0,({data:e,onBarClick:m,EmptyState:g,DateTimeFormat:x="MMM D, YYYY, hh:mma",isFullHeight:y=!1})=>{let[v,j]=(0,a.useState)(null);if(0===e.length)return g||null;let b=(0,r.default)(e[0].timestamp).format(x),C=(0,r.default)(e[e?.length-1]?.timestamp).format(x);return(0,t.jsxs)("div",{"data-testid":"logs-bar-chart",className:(0,u.cn)("flex flex-col gap-y-3",y?"h-full":"h-24"),children:[(0,t.jsx)(c.ChartContainer,{className:"h-full",config:{error_count:{label:"Errors"},ok_count:{label:"Ok"},warning_count:{label:"Warnings"}},children:(0,t.jsxs)(s.BarChart,{data:e,onMouseMove:e=>{e.activeTooltipIndex!==v&&j(e.activeTooltipIndex)},onMouseLeave:()=>j(null),onClick:e=>{let t=e?.activePayload?.[0]?.payload;m&&m(t,e)},children:[(0,t.jsx)(i.YAxis,{tick:!1,width:0,axisLine:{stroke:d},tickLine:{stroke:d}}),(0,t.jsx)(o.XAxis,{dataKey:"timestamp",interval:e.length-2,tick:!1,axisLine:{stroke:d},tickLine:{stroke:d}}),(0,t.jsx)(c.ChartTooltip,{content:(0,t.jsx)(c.ChartTooltipContent,{className:"text-foreground-light -mt-5",labelFormatter:e=>(0,r.default)(e).format(x)})}),(0,t.jsx)(l.Bar,{dataKey:"error_count",fill:h,maxBarSize:24,stackId:"stack",children:e?.map((e,r)=>(0,t.jsx)(n.Cell,{className:"cursor-pointer transition-colors",fill:v===r||null===v?h:"hsl(var(--destructive-500))"},`error-${r}`))}),(0,t.jsx)(l.Bar,{dataKey:"warning_count",fill:f,maxBarSize:24,stackId:"stack",children:e?.map((e,r)=>(0,t.jsx)(n.Cell,{className:"cursor-pointer transition-colors",fill:v===r||null===v?f:"hsl(var(--warning-500))"},`warning-${r}`))}),(0,t.jsx)(l.Bar,{dataKey:"ok_count",fill:p,maxBarSize:24,stackId:"stack",children:e?.map((e,r)=>(0,t.jsx)(n.Cell,{className:"cursor-pointer transition-colors",fill:v===r||null===v?p:"hsl(var(--brand-500))"},`success-${r}`))})]})}),e&&(0,t.jsxs)("div",{className:"text-foreground-lighter -mt-10 flex items-center justify-between text-[10px] font-mono",children:[(0,t.jsx)("span",{children:b}),(0,t.jsx)("span",{children:C})]})]})}])},450049,e=>{"use strict";var t=e.i(867088),r=e.i(242882),a=e.i(55956),l=e.i(389959),n=e.i(993394),s=e.i(460988),o=e.i(234745),i=e.i(520124),c=e.i(281192);e.s(["default",0,function({projectRef:e,table:u,filterOverride:d,limit:p}){let h,f,m=(0,n.getDefaultHelper)(n.PREVIEWER_DATEPICKER_HELPERS),[g,x]=(0,l.useState)(new Date().toISOString()),{timestampStart:y,timestampEnd:v,filters:j,search:b}=(0,c.useLogsUrlState)(),C=(0,l.useMemo)(()=>y||m.calcFrom(),[y,m]),S=(0,l.useMemo)(()=>v||m.calcTo(),[v,m]),N=(0,l.useMemo)(()=>({...j,...d,...b?{search_query:b}:{}}),[JSON.stringify(j),JSON.stringify(d),b]),k=(0,l.useMemo)(()=>({iso_timestamp_start:C,iso_timestamp_end:S,sql:(0,s.genDefaultQuery)(u,N,p)}),[C,S,u,N,p]),O=(0,l.useMemo)(()=>["projects",e,"logs",k],[e,k]),{data:w,isSuccess:I,isLoading:E,isRefetching:T,error:_,fetchNextPage:R,isFetchingNextPage:L,refetch:A}=(0,t.useInfiniteQuery)({queryKey:O,queryFn:async({signal:t,pageParam:r})=>{let{data:a,error:l}=await (0,o.get)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:e},query:{...k,iso_timestamp_end:r||k.iso_timestamp_end}},signal:t});if(l)throw l;return a},refetchOnWindowFocus:!1,initialPageParam:void 0,getNextPageParam(e){if((e.result?.length??0)===0)return;let t=e.result.length,{timestamp:r}=e.result[t-1];return a.default.utc(Number(r/1e3)).toISOString()}}),{logData:F,error:P,oldestTimestamp:D}=(0,l.useMemo)(()=>{let e=[],t=_?_.message:null;w?.pages?.forEach(r=>{r?.result&&(e=[...e,...r.result]),!t&&r?.error&&(t=r.error)});let r=e.length>0?e[e.length-1]?.timestamp:void 0;return{logData:e,error:t,oldestTimestamp:r}},[w?.pages]),M=(0,l.useMemo)(()=>(0,s.genCountQuery)(u,N),[u,N]),$=(0,l.useMemo)(()=>["projects",e,"logs-count",{projectRef:e,sql:M,iso_timestamp_start:g,iso_timestamp_end:S,table:u,mergedFilters:N}],[e,M,g,S,u,N]),{data:B}=(0,r.useQuery)({queryKey:$,queryFn:async({signal:t})=>{let{data:r,error:a}=await (0,o.get)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:e},query:{sql:M,iso_timestamp_start:g,iso_timestamp_end:S}},signal:t});if(a)throw a;return r},refetchOnWindowFocus:!1,refetchInterval:6e4,enabled:!!(!P&&w&&w?.pages?.length>0)}),q=B?.result?.[0]?.count??0,U=(0,l.useMemo)(()=>(0,s.genChartQuery)(u,k,N),[u,k,N]),z=(0,l.useMemo)(()=>["projects",e,"logs-chart",{projectRef:e,sql:U,iso_timestamp_start:C,iso_timestamp_end:S}],[e,U,C,S]),{data:H,refetch:K}=(0,r.useQuery)({queryKey:z,queryFn:async({signal:t})=>{let{data:r,error:a}=await (0,o.get)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:e},query:{iso_timestamp_start:C,iso_timestamp_end:S,sql:U}},signal:t});if(a)throw a;return r},refetchOnWindowFocus:!1}),W=(0,l.useCallback)(async()=>{x(new Date().toISOString()),K(),A()},[A,K]),G=(h=H?.result??[],f="timestamp",(0,l.useMemo)(()=>0!==h.length&&(0,s.isUnixMicro)(h[0][f])?h?.map(e=>(e[f]=(0,s.unixMicroToIsoTimestamp)(e[f]),e)):h,[JSON.stringify(h)])),{data:Q,error:V}=(0,i.useFillTimeseriesSorted)(G,"timestamp","count",0,C,S||new Date().toISOString());return{newCount:q,logData:F,isSuccess:I,isLoading:E||T,isLoadingOlder:L,error:P||V,filters:N,params:k,oldestTimestamp:D?String(D):void 0,eventChartData:Q,refresh:W,loadOlder:()=>R()}}],450049)},555979,e=>{"use strict";var t=e.i(478902),r=e.i(55956),a=e.i(388019);let l=(0,a.default)("Rewind",[["polygon",{points:"11 19 2 12 11 5 11 19",key:"14yba5"}],["polygon",{points:"22 19 13 12 22 5 22 19",key:"1pi1cj"}]]);var n=e.i(898452),s=e.i(389959);e.i(128328);var o=e.i(657588),i=e.i(158639),c=e.i(543851),u=e.i(890054),d=e.i(61187),p=e.i(366652),h=e.i(454931),f=e.i(975924),m=e.i(215261),g=e.i(215312),x=e.i(282492),y=e.i(106579),v=e.i(330287),j=e.i(10429),b=e.i(837710),C=e.i(171997),S=e.i(613580),N=e.i(843778),k=e.i(748356),O=e.i(993394),w=e.i(767073),I=e.i(737018),E=e.i(237002);let T=({options:e,filters:r,onFiltersChange:a,buttonClassName:l,align:n="start",isLoading:o=!1})=>{let i=e.key,[c,u]=(0,s.useState)(!1),[d,p]=(0,s.useState)(r),h=()=>u(!c),f=(0,s.useMemo)(()=>{let e=d[i];return!!("object"==typeof e&&Object.values(e).some(Boolean))},[d,i]);return(0,s.useEffect)(()=>{c||p(r)},[c,r]),(0,t.jsxs)(w.Popover,{open:c,onOpenChange:h,children:[(0,t.jsx)(w.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(b.Button,{type:f?"default":"outline",onClick:h,className:(0,N.cn)("min-w-20 border-dashed",{"border-solid":f},l),children:(0,t.jsx)("span",{children:e.label})})}),(0,t.jsx)(w.PopoverContent,{align:n,className:"p-0 w-60",portal:!0,children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation(),a(d),u(!1)},children:[e.options.map((r,a)=>(0,t.jsxs)(I.Label,{htmlFor:`${e.key}.${r.key}`,className:"flex items-start hover:bg-overlay-hover overflow-hidden p-2 m-1 rounded-sm gap-3 transition-all duration-150 ease-in-out",children:[(0,t.jsx)("div",{children:(0,t.jsx)(E.Checkbox,{value:e.key,id:`${e.key}.${r.key}`,checked:!!d?.[e.key]?.[r.key],onCheckedChange:t=>{p({...d,[e.key]:{...d[e.key],[r.key]:t}})}})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{children:r.label}),(0,t.jsx)("span",{className:"text-sm text-foreground-lighter",children:r.description})]})]},r.key)),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2 border-t border-default p-2",children:[(0,t.jsx)(b.Button,{size:"tiny",type:"default",onClick:()=>{p({[i]:{}}),a({...r,[i]:{}})},htmlType:"button",children:"Clear"}),(0,t.jsx)(b.Button,{loading:o,type:"primary",htmlType:"submit",children:"Apply"})]})]})})]})},_=({isLoading:e,newCount:r,onRefresh:a,onSearch:l=()=>{},defaultSearchValue:o="",onExploreClick:w,queryUrl:I,condensedLayout:E,isShowingEventChart:_,onToggleEventChart:R,csvData:L,onFiltersChange:A,filters:F,table:P,onSelectedDatabaseChange:D,className:M,selectedDatePickerValue:$,setSelectedDatePickerValue:B})=>{let q=(0,n.useRouter)(),{ref:U}=(0,i.useParams)(),[z,H]=(0,s.useState)(""),K=q.pathname.split("/").pop(),{data:W}=(0,v.useLoadBalancersQuery)({projectRef:U}),G=j.IS_PLATFORM&&O.LOG_ROUTES_WITH_REPLICA_SUPPORT.includes(q.pathname),Q=z!==o,V=e=>l("search-input-change",{query:e});return(0,s.useEffect)(()=>{z!==o&&H(o)},[o]),(0,t.jsxs)("div",{className:(0,N.cn)("flex w-full items-center justify-between overflow-x-scroll no-scrollbar",E?" p-3":"",M),children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-x-2 mr-2",children:[(0,t.jsx)("form",{id:"log-panel-search",onSubmit:e=>{e.preventDefault(),V(z)},children:(0,t.jsx)(C.Input,{className:"w-60",size:"tiny",placeholder:"Search events",onChange:e=>H(e.target.value),onBlur:e=>{H(e.target.value),V(e.target.value)},icon:(0,t.jsx)("div",{className:"text-foreground-lighter",children:(0,t.jsx)(p.Search,{size:14})}),value:z,actions:(0,t.jsxs)("div",{className:"flex items-center gap-x-1 mr-0.5",children:[Q&&(0,t.jsx)(g.ButtonTooltip,{icon:(0,t.jsx)("span",{children:"â†²"}),type:"text",className:"px-1 h-[20px]",onClick:()=>V(z),tooltip:{content:{side:"bottom",text:"Search for events"}}}),z.length>0&&(0,t.jsx)(g.ButtonTooltip,{icon:(0,t.jsx)(f.X,{}),type:"text",className:"p-[1px] h-[20px]",onClick:()=>V(""),tooltip:{content:{side:"bottom",text:"Clear search"}}})]})})}),(0,t.jsxs)(S.Tooltip,{children:[(0,t.jsx)(S.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(b.Button,{title:"refresh",type:"default",className:"px-1.5",icon:(0,t.jsxs)("div",{className:"relative",children:[r>0&&(0,t.jsxs)("div",{className:"absolute -top-3 right-3 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute z-20",children:(0,t.jsx)("p",{style:{fontSize:"0.6rem"},className:"text-white",children:r>1e3?`${Math.floor(r/100)/10}K`:r})}),(0,t.jsx)("div",{className:"h-4 w-4 animate-ping rounded-full bg-green-800 opacity-60"}),(0,t.jsx)("div",{className:"z-60 absolute top-0 right-0 h-full w-full rounded-full bg-green-900 opacity-80"})]}),(0,t.jsx)(d.RefreshCw,{})]}),loading:e,disabled:e,onClick:a})}),(0,t.jsx)(S.TooltipContent,{side:"bottom",className:"text-xs",children:"Refresh logs"})]}),(0,t.jsx)(k.LogsDatePicker,{helpers:O.PREVIEWER_DATEPICKER_HELPERS,onSubmit:e=>{l("datepicker-change",{to:e.to,from:e.from}),B(e)},value:$}),void 0!==O.FILTER_OPTIONS[P]&&(0,t.jsx)("div",{className:"flex items-center",children:O.FILTER_OPTIONS[P]&&Object.values(O.FILTER_OPTIONS[P]).map((e,r)=>{let a=[];Object.values(O.FILTER_OPTIONS[P]).length>=2&&(0===r?a.push("rounded-tr-none rounded-br-none"):r===Object.values(O.FILTER_OPTIONS[P]).length-1?a.push("rounded-tl-none rounded-bl-none"):a.push("rounded-none"));let l=Object.values(O.FILTER_OPTIONS[P]).length-1;return(0,t.jsx)(T,{buttonClassName:a.join(" "),options:e,onFiltersChange:A,filters:F,align:0===r?"start":r===l?"end":"center"},`${e.key}-filter`)})}),(0,t.jsx)("div",{className:"flex items-center space-x-2",children:(0,t.jsx)(b.Button,{type:"default",onClick:()=>R(),icon:_?(0,t.jsx)(c.Eye,{}):(0,t.jsx)(u.EyeOff,{}),children:"Chart"})}),!!L&&(0,t.jsx)(y.DownloadResultsButton,{iconOnly:!0,type:"default",align:"center",results:L??[],fileName:`supabase-${K}-${U}.csv`})]}),G?(0,t.jsxs)("div",{className:"flex items-center justify-center gap-x-2",children:[(0,t.jsxs)(S.Tooltip,{children:[(0,t.jsx)(S.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(b.Button,{asChild:!0,className:"px-1.5",type:"default",icon:(0,t.jsx)(h.Terminal,{}),children:(0,t.jsx)(m.default,{href:I})})}),(0,t.jsx)(S.TooltipContent,{side:"bottom",className:"text-xs",children:"Open query in Logs Explorer"})]}),(0,t.jsx)(x.DatabaseSelector,{onSelectId:D,additionalOptions:P===O.LogsTableName.EDGE&&(W??[]).length>0?[{id:`${U}-all`,name:"API Load Balancer"}]:[]})]}):(0,t.jsx)(b.Button,{asChild:!0,type:"default",onClick:w,children:(0,t.jsx)(m.default,{href:I,children:"Explore via query"})})]})};var R=e.i(744244),L=e.i(427432),A=e.i(150671),F=e.i(450049),P=e.i(281192),D=e.i(783804),M=e.i(242882),$=e.i(460988),B=e.i(234745),q=e.i(912793);let U=function({projectRef:e,id:t,queryType:r,paramsToMerge:a}){let l=r?O.LOGS_TABLES[r]:void 0,n=t&&l?(0,$.genSingleLogQuery)(l,t):"",s={...a,sql:n},o=!!(t&&l),{logsMetadata:i}=(0,q.useIsFeatureEnabled)(["logs:metadata"]),{data:c,error:u,isPending:d,isRefetching:p,refetch:h}=(0,M.useQuery)({queryKey:["projects",e,"single-log",t,r],queryFn:async({signal:t})=>{let{data:r,error:a}=await (0,B.get)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:e},query:s},signal:t});if(a)throw a;return r},enabled:o,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1}),f=u?u.message:null,m=c?.result?c.result[0]:void 0;return{data:m?{...m,metadata:i?m?.metadata:void 0}:void 0,isLoading:o&&d||p,error:f,refresh:()=>h()}};var z=e.i(265735),H=e.i(169240),K=e.i(189329),W=e.i(238921),G=e.i(651068),Q=e.i(299863),V=e.i(378277),Y=e.i(689805),J=e.i(793912),X=w;let Z=(0,a.default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);function ee(e){return"logicalOperator"in e}function et(e,t){if(0===t.length)return e;let[r,...a]=t,l=e.conditions[r];return l?0===a.length?ee(l)?l:null:ee(l)?et(l,a):null:null}function er(e,t){if(0===t.length)return null;let[r,...a]=t,l=e.conditions[r];return l?0===a.length?ee(l)?null:l:ee(l)?er(l,a):null:null}function ea(e){return"object"==typeof e&&null!==e&&"component"in e}function el(e){if(!e||Array.isArray(e)||ea(e)||"function"!=typeof e)return!1;let t=e.toString();return"AsyncFunction"===e.constructor.name||t.startsWith("async ")||t.includes("async function")}function en(e,t){if(1===t.length)return{...e,conditions:e.conditions.filter((e,r)=>r!==t[0])};let[r,...a]=t;return{...e,conditions:e.conditions.map((e,t)=>t===r?en(e,a):e)}}function es(e,t,r){if(0===t.length)return{...e,conditions:[...e.conditions,{propertyName:r.name,value:"",operator:r.operators?.[0]||"="}]};let[a,...l]=t;return{...e,conditions:e.conditions.map((e,t)=>t===a?es(e,l,r):e)}}function eo(e,t){return(0,s.useCallback)(r=>{setTimeout(()=>{let r=document.activeElement;r&&e.current&&e.current.contains(r)||r&&r.closest("[data-radix-popper-content-wrapper]")||t()},0)},[e,t])}function ei(e,t,r){let[a,l]=(0,s.useState)(0);(0,s.useEffect)(()=>{a>e-1&&l(e>0?e-1:0)},[e,a]);let n=(0,s.useCallback)(n=>{if("ArrowDown"===n.key){n.preventDefault(),l(t=>t<e-1?t+1:t);return}if("ArrowUp"===n.key){n.preventDefault(),l(e=>e>0?e-1:0);return}if("Enter"===n.key){n.preventDefault(),t(a);return}r&&r(n)},[e,a,t,r]),o=(0,s.useCallback)(()=>l(0),[]);return{highlightedIndex:a,setHighlightedIndex:l,handleKeyDown:n,reset:o}}var ec=e.i(866205),eu=e.i(703526),ed=e.i(917007),ep=e.i(549815),eh=e.i(911509);function ef({items:e,highlightedIndex:r,onSelect:a,includeIcon:l=!0}){return(0,t.jsx)(ec.Command_Shadcn_,{children:(0,t.jsxs)(eh.CommandList_Shadcn_,{children:[(0,t.jsx)(eu.CommandEmpty_Shadcn_,{children:"No results found."}),(0,t.jsx)(ed.CommandGroup_Shadcn_,{children:e.map((e,n)=>(0,t.jsxs)(ep.CommandItem_Shadcn_,{value:e.value,onSelect:()=>a(e),className:`text-xs ${n===r?"bg-surface-400":""}`,children:[l&&e.icon,e.label]},`${e.value}-${e.label}`))})]})})}function em({condition:e,filterProperties:r,id:a,isActive:l,isOperatorActive:n,isLoading:o,onOperatorChange:i,onValueChange:c,onOperatorFocus:u,onValueFocus:d,onBlur:p,onLabelClick:h,onKeyDown:m,onRemove:g,rootFilters:x,path:y,propertyOptionsCache:v,loadingOptions:j,aiApiUrl:C,onSelectMenuItem:S,setActiveInput:N}){let k=(0,s.useRef)(null),O=(0,s.useRef)(null),w=(0,s.useRef)(null),I=r.find(t=>t.name===e.propertyName),[E,T]=(0,s.useState)(!1);(0,s.useEffect)(()=>{l&&O.current?O.current.focus():n&&k.current&&k.current.focus()},[l,n]);let _=eo(w,p),R=eo(w,p);if(!I)return null;let L=(0,s.useMemo)(()=>(function(e,t,r){if(!e)return[];let a=er(t,e.path),l=r.find(e=>e.name===a?.propertyName),n=a?.operator?.toUpperCase()||"";return(l?.operators||["="]).filter(e=>e.toUpperCase().includes(n)).map(e=>({value:e,label:e}))})({type:"operator",path:y},x,r),[y,x,r]),A=(0,s.useMemo)(()=>(function(e,t,r,a,l,n){if(!e)return[];let s=er(t,e.path),o=r.find(e=>e.name===s?.propertyName),i=[];return o&&(!Array.isArray(o.options)&&ea(o.options)?i.push({value:"custom",label:o.options.label||"Custom...",isCustom:!0,customOption:o.options.component}):l[o.name]?i.push({value:"loading",label:"Loading options..."}):Array.isArray(o.options)?i.push(...function(e,t){let r=[];for(let a of e)if("string"==typeof a)a.toLowerCase().includes(t.toLowerCase())&&r.push({value:a,label:a});else"object"==typeof a&&null!==a&&"value"in a&&"label"in a?a.label.toLowerCase().includes(t.toLowerCase())&&r.push({value:a.value,label:a.label}):ea(a)&&(a.label?.toLowerCase().includes(t.toLowerCase())??!0)&&r.push({value:"custom",label:a.label||"Custom...",isCustom:!0,customOption:a.component});return r}(o.options,n)):a[o.name]&&i.push(...a[o.name].options.map(e=>"string"==typeof e?{value:e,label:e}:{value:e.value,label:e.label}))),i})({type:"value",path:y},x,r,v,j,(e.value??"").toString()),[y,x,r,v,j,e.value]),F=(0,s.useMemo)(()=>A.find(e=>e.isCustom&&e.customOption),[A]);(0,s.useEffect)(()=>{!l||o||A.length>0&&A.every(e=>e.isCustom)&&!E&&T(!0)},[l,o,A,E]);let{highlightedIndex:P,handleKeyDown:D,reset:M}=ei(L.length,e=>{L[e]&&S(L[e])}),{highlightedIndex:$,handleKeyDown:B,reset:q}=ei(A.length,e=>{let t=A[e];t&&(t.isCustom?T(!0):S(t))},m);return(0,s.useEffect)(()=>{n||M()},[n,M]),(0,s.useEffect)(()=>{l||q()},[l,q]),(0,t.jsxs)("div",{ref:w,className:"flex items-center rounded px-2 h-6 bg-muted border group shrink-0",children:[(0,t.jsx)("span",{className:"text-xs font-medium mr-1 cursor-pointer shrink-0 whitespace-nowrap",onClick:h,children:I.label}),(0,t.jsxs)(Y.Popover_Shadcn_,{open:n&&!o&&L.length>0,children:[(0,t.jsx)(X.PopoverAnchor,{asChild:!0,children:(0,t.jsx)(V.Input_Shadcn_,{ref:k,type:"text",value:e.operator,onChange:e=>i(e.target.value),onFocus:u,onBlur:_,onKeyDown:D,className:"border-none bg-transparent p-0 text-xs focus:outline-none focus:ring-0 focus:shadow-none focus-visible:ring-0 focus-visible:ring-offset-0 h-6 mr-1 text-foreground-light",style:{width:`${Math.max(e.operator.length,1)}ch`,minWidth:"1ch"},disabled:o,"aria-label":`Operator for ${I.label}`})}),(0,t.jsx)(J.PopoverContent_Shadcn_,{className:"min-w-[220px] p-0",align:"start",side:"bottom",portal:!0,onOpenAutoFocus:e=>e.preventDefault(),onCloseAutoFocus:e=>e.preventDefault(),onInteractOutside:e=>{let t=e.target;w.current&&!w.current.contains(t)&&p()},children:(0,t.jsx)(ef,{items:L,highlightedIndex:P,onSelect:S,includeIcon:!1})})]}),(0,t.jsxs)(Y.Popover_Shadcn_,{open:l&&!o&&(E||A.length>0),children:[(0,t.jsx)(X.PopoverAnchor,{asChild:!0,children:(0,t.jsx)(V.Input_Shadcn_,{ref:O,type:"text",value:(e.value??"").toString(),onChange:e=>c(e.target.value),onFocus:d,onBlur:R,onKeyDown:B,className:"border-none bg-transparent p-0 text-xs focus:outline-none focus:ring-0 focus:shadow-none focus-visible:ring-0 focus-visible:ring-offset-0 h-6 mr-1",style:{width:`${Math.max((e.value??"").toString().length,1)}ch`,minWidth:"1ch"},disabled:o,"aria-label":`Value for ${I.label}`})}),(0,t.jsx)(J.PopoverContent_Shadcn_,{className:"min-w-[220px] w-fit p-0",align:"start",onOpenAutoFocus:e=>e.preventDefault(),onCloseAutoFocus:e=>e.preventDefault(),onInteractOutside:e=>{let t=e.target;w.current&&!w.current.contains(t)&&p()},children:E&&F&&F.customOption?F.customOption({onChange:e=>{c(e),T(!1),setTimeout(()=>{N({type:"group",path:y.slice(0,-1)})},0)},onCancel:()=>{T(!1),g()},search:(e.value??"").toString()}):(0,t.jsx)(ef,{items:A,highlightedIndex:$,onSelect:e=>e.isCustom?T(!0):S(e),includeIcon:!0})})]}),(0,t.jsx)(b.Button,{type:"text",size:"tiny",icon:(0,t.jsx)(f.X,{strokeWidth:1.5,size:12,className:"group-hover:text-foreground text-foreground-light"}),onClick:g,className:"group hover:text-foreground !hover:bg-surface-600 p-0","aria-label":`Remove ${I.label} filter`})]})}var X=w;function eg({group:e,path:r,isLoading:a,rootFilters:l,activeInput:n,filterProperties:o,onOperatorChange:i,onValueChange:c,onOperatorFocus:u,onValueFocus:d,onBlur:p,onLabelClick:h,onKeyDown:f,onGroupFreeformChange:m,onGroupFreeformFocus:g,groupFreeformValue:x,isGroupFreeformActive:y,onLogicalOperatorChange:v,supportsOperators:j=!1,onRemove:b,propertyOptionsCache:C,loadingOptions:S,aiApiUrl:N,onSelectMenuItem:k,setActiveInput:O}){let[w,I]=(0,s.useState)(""),E=(0,s.useRef)(null),T=(0,s.useRef)(null),[_,R]=(0,s.useState)(!1),L=y&&n?.type==="group"&&r.length===n.path.length&&r.every((e,t)=>e===n.path[t]);(0,s.useEffect)(()=>{""===x&&I("")},[x]),(0,s.useEffect)(()=>{L&&E.current&&E.current.focus()},[L]);let A=eo(T,p),F=()=>{v?.(r)},P=()=>{R(!0)},D=()=>{R(!1)},M=(0,s.useMemo)(()=>(function(e){let{filterProperties:t,inputValue:r,aiApiUrl:a,supportsOperators:l}=e,n=[];return n.push(...t.filter(e=>e.label.toLowerCase().includes(r.toLowerCase())).map(e=>({value:e.name,label:e.label}))),l&&n.push({value:"group",label:"New Group"}),r.trim().length>0&&a&&n.push({value:"ai-filter",label:"Filter by AI",icon:s.createElement(Z,{className:"mr-2 h-4 w-4",strokeWidth:1.25})}),n})({filterProperties:o,inputValue:(L?x:w)||"",aiApiUrl:N,supportsOperators:j}),[o,L,x,w,N,j]),$=(0,s.useMemo)(()=>{if(0===r.length)return!0;let e=r.slice(0,-1),t=l;for(let r=0;r<e.length;r++){let a=e[r],l=t?.conditions?.[a];if(!l||!("logicalOperator"in l))return!1;t=l}return r[r.length-1]===(t?.conditions??[]).length-1},[r,l]),{highlightedIndex:B,handleKeyDown:q,reset:U}=ei(M.length,e=>{M[e]&&k(M[e])},f);return(0,s.useEffect)(()=>{L||U()},[L,U]),(0,t.jsx)("div",{ref:T,className:`flex items-center gap-1 rounded ${r.length>0?"before:content-['('] before:text-foreground-muted after:content-[')'] after:text-foreground-muted":""} ${$?"flex-1 min-w-0":""}`,children:(0,t.jsxs)("div",{className:`flex items-center gap-1 ${$?"flex-1 min-w-0":""}`,children:[e.conditions.map((w,I)=>{let E=[...r,I];return(0,t.jsxs)(s.default.Fragment,{children:[I>0&&j&&(0,t.jsx)("span",{className:`text-xs font-medium cursor-pointer ${_?"bg-surface-400 text-foreground dark:bg-surface-400":"text-foreground-muted"}`,onClick:F,onMouseEnter:P,onMouseLeave:D,children:e.logicalOperator}),"logicalOperator"in w?(0,t.jsx)(eg,{filterProperties:o,group:w,path:E,isLoading:a,rootFilters:l,activeInput:n,onOperatorChange:i,onValueChange:c,onOperatorFocus:u,onValueFocus:d,onBlur:p,onLabelClick:h,onKeyDown:f,onGroupFreeformChange:m,onGroupFreeformFocus:g,groupFreeformValue:x,isGroupFreeformActive:y,onLogicalOperatorChange:v,supportsOperators:j,onRemove:b,propertyOptionsCache:C,loadingOptions:S,aiApiUrl:N,onSelectMenuItem:k,setActiveInput:O}):(0,t.jsx)(em,{id:`filter-${E.join("-")}`,condition:w,isActive:!!n&&"value"===n.type&&E.length===n.path.length&&E.every((e,t)=>e===n.path[t]),isOperatorActive:!!n&&"operator"===n.type&&E.length===n.path.length&&E.every((e,t)=>e===n.path[t]),isLoading:a,onOperatorChange:e=>i(E,e),filterProperties:o,onValueChange:e=>c(E,e),onOperatorFocus:()=>u(E),onValueFocus:()=>d(E),onBlur:p,onLabelClick:()=>h(E),onKeyDown:f,onRemove:()=>b(E),rootFilters:l,path:E,propertyOptionsCache:C,loadingOptions:S,aiApiUrl:N,onSelectMenuItem:k,setActiveInput:O})]},I)}),(0,t.jsxs)(Y.Popover_Shadcn_,{open:L&&!a&&M.length>0,children:[(0,t.jsx)(X.PopoverAnchor,{asChild:!0,children:(0,t.jsx)(V.Input_Shadcn_,{ref:E,type:"text",value:L?x:w,onChange:e=>{I(e.target.value),m(r,e.target.value)},onFocus:()=>g(r),onBlur:A,onKeyDown:q,className:`border-none bg-transparent p-0 text-xs focus:outline-none focus:ring-0 focus:shadow-none focus-visible:ring-0 focus-visible:ring-offset-0 h-6 ${$?"w-full flex-1 min-w-0":""}`,placeholder:0===r.length&&0===e.conditions.length?"Search or filter...":"+",disabled:a,style:$?{width:"100%",minWidth:0}:{width:`${Math.max((L?x:w).length||1,0===r.length&&0===e.conditions.length?18:1)}ch`,minWidth:0===r.length&&0===e.conditions.length?"18ch":"1ch"}})}),(0,t.jsx)(J.PopoverContent_Shadcn_,{className:"min-w-[220px] p-0",align:"start",side:"bottom",portal:!0,onOpenAutoFocus:e=>e.preventDefault(),onCloseAutoFocus:e=>e.preventDefault(),onInteractOutside:e=>{let t=e.target;T.current&&!T.current.contains(t)&&p()},children:(0,t.jsx)(ef,{items:M,highlightedIndex:B,onSelect:k,includeIcon:!0})})]})]})})}function ex({filterProperties:e,filters:r,onFilterChange:a,freeformText:l,onFreeformTextChange:n,aiApiUrl:o,className:i,supportsOperators:c=!1}){let u=(0,s.useRef)(null),{isLoading:d,setIsLoading:h,error:f,setError:m,isCommandMenuVisible:g,setIsCommandMenuVisible:x,hideTimeoutRef:y,activeInput:v,setActiveInput:j,newPathRef:b}=function(){let[e,t]=(0,s.useState)(!1),[r,a]=(0,s.useState)(null),[l,n]=(0,s.useState)(0),[o,i]=(0,s.useState)(!1),c=(0,s.useRef)(null),[u,d]=(0,s.useState)(null),p=(0,s.useRef)([]),[h,f]=(0,s.useState)(null),[m,g]=(0,s.useState)(!1),[x,y]=(0,s.useState)(null),v=(0,s.useCallback)(()=>{a(null),n(0),i(!1),d(null),f(null),g(!1),y(null),c.current&&clearTimeout(c.current)},[]);return{isLoading:e,setIsLoading:t,error:r,setError:a,selectedCommandIndex:l,setSelectedCommandIndex:n,isCommandMenuVisible:o,setIsCommandMenuVisible:i,hideTimeoutRef:c,activeInput:u,setActiveInput:d,newPathRef:p,dialogContent:h,setDialogContent:f,isDialogOpen:m,setIsDialogOpen:g,pendingPath:x,setPendingPath:y,resetState:v}}(),{loadingOptions:C,propertyOptionsCache:S,loadPropertyOptions:k,optionsError:O,setOptionsError:w}=function(){let[e,t]=(0,s.useState)({}),[r,a]=(0,s.useState)({}),[l,n]=(0,s.useState)(null),o=(0,s.useRef)(null),i=(0,s.useCallback)(async(l,s="")=>{if(!l.options||Array.isArray(l.options)||!el(l.options))return;let i=r[l.name];i&&i.searchValue===s||(o.current&&clearTimeout(o.current),o.current=setTimeout(async()=>{if(!e[l.name])try{t(e=>({...e,[l.name]:!0}));let e=l.options,r=(await e(s)).map(e=>"string"==typeof e?{label:e,value:e}:e);a(e=>({...e,[l.name]:{options:r,searchValue:s}}))}catch(e){console.error(`Error loading options for ${l.name}:`,e),n(`Failed to load options for ${l.label}`)}finally{t(e=>({...e,[l.name]:!1}))}},300))},[e,r]);return(0,s.useEffect)(()=>()=>{o.current&&clearTimeout(o.current)},[]),{loadingOptions:e,propertyOptionsCache:r,loadPropertyOptions:i,optionsError:l,setOptionsError:n}}(),{handleAIFilter:I}=function({activeInput:e,aiApiUrl:t,freeformText:r,filterProperties:a,activeFilters:l,onFilterChange:n,onFreeformTextChange:o,setIsLoading:i,setError:c,setIsCommandMenuVisible:u}){return{handleAIFilter:(0,s.useCallback)(async()=>{if(e&&"group"===e.type&&t){i(!0),c(null);try{let s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:r,filterProperties:a,currentPath:e.path})});if(!s.ok){let e=await s.json();throw Error(e.error||"AI filtering failed")}let i=await s.json();if(!i||!Array.isArray(i.conditions))throw Error("Invalid response from AI filter");let c={logicalOperator:i.logicalOperator||"AND",conditions:function e(t,r){return t.map(t=>{if(ee(t))return{logicalOperator:t.logicalOperator,conditions:e(t.conditions,r)};{let e=r.find(e=>e.name===t.propertyName);if(!e)throw Error(`Invalid property: ${t.propertyName}`);return{propertyName:e.name,value:t.value,operator:t.operator||"="}}})}(i.conditions,a)},d=function e(t,r,a){if(0===r.length)return a;let[l,...n]=r;return{...t,conditions:t.conditions.map((t,r)=>r===l?e(t,n,a):t)}}(l,e.path,c);n(d),o(""),u(!1)}catch(e){console.error("Error in AI filtering:",e),c(e.message||"AI filtering failed. Please try again."),o("")}finally{i(!1)}}},[e,t,r,a,l,n,o,i,c,u])}}({activeInput:v,aiApiUrl:o,freeformText:l,filterProperties:e,activeFilters:r,onFilterChange:a,onFreeformTextChange:n,setIsLoading:h,setError:m,setIsCommandMenuVisible:x}),E=(0,s.useCallback)((t,l)=>{let n=function e(t,r,a){if(1===r.length)return{...t,conditions:t.conditions.map((e,t)=>t===r[0]?{...e,value:a}:e)};let[l,...n]=r;return{...t,conditions:t.conditions.map((t,r)=>r===l&&ee(t)?e(t,n,a):t)}}(r,t,l);a(n);let s=er(n,t);if(s){let t=e.find(e=>e.name===s.propertyName);t&&t.options&&!Array.isArray(t.options)&&el(t.options)&&k(t,l)}},[r,a,e,k]),T=(0,s.useCallback)((e,t)=>{a(function e(t,r,a){if(1===r.length)return{...t,conditions:t.conditions.map((e,t)=>t===r[0]?{...e,operator:a}:e)};let[l,...n]=r;return{...t,conditions:t.conditions.map((t,r)=>r===l&&ee(t)?e(t,n,a):t)}}(r,e,t))},[r,a]),{handleItemSelect:_}=function({activeInput:e,setActiveInput:t,activeFilters:r,onFilterChange:a,filterProperties:l,freeformText:n,onFreeformTextChange:o,handleInputChange:i,handleOperatorChange:c,newPathRef:u,handleAIFilter:d}){let p=(0,s.useCallback)(e=>{a(en(r,e))},[r,a]),h=(0,s.useCallback)(t=>{let r=t.value;"ai-filter"===t.value?d():"group"===t.value?f():e?.type==="value"?m(t):e?.type==="operator"?g(r):e?.type==="group"&&x(r)},[e,r,l,n,d,i,c]),f=(0,s.useCallback)(()=>{if(e&&"group"===e.type){let l=e.path,n=et(r,l);n&&(a(function e(t,r){if(0===r.length)return{...t,conditions:[...t.conditions,{logicalOperator:"AND",conditions:[]}]};let[a,...l]=r;return{...t,conditions:t.conditions.map((t,r)=>r===a?e(t,l):t)}}(r,l)),u.current=[...l,n.conditions.length],setTimeout(()=>{t({type:"group",path:u.current})},0),o(""))}},[e,r,a,t,o]),m=(0,s.useCallback)(r=>{if(!e||"value"!==e.type)return;let a=e.path;i(a,r.value),setTimeout(()=>{t({type:"group",path:a.slice(0,-1)})},0)},[e,i,t,p]),g=(0,s.useCallback)(r=>{e&&"operator"===e.type&&(c(e.path,r),t(null))},[e,c,t]),x=(0,s.useCallback)(t=>{if(!e||"group"!==e.type)return;let a=l.find(e=>e.name===t);if(!a)return void console.error(`Invalid property: ${t}`);let n=e.path,s=et(r,n);s&&(a.options&&!Array.isArray(a.options)&&ea(a.options)?y(a,n,s):v(a,n,s),o(""))},[e,l,r,a,o]),y=(0,s.useCallback)((e,l,n)=>{a(es(r,l,e));let s=[...l,n.conditions.length];setTimeout(()=>{t({type:"value",path:s})},0)},[r,a,t,p]),v=(0,s.useCallback)((e,l,n)=>{a(es(r,l,e));let s=[...l,n.conditions.length];setTimeout(()=>{t({type:"value",path:s})},0)},[r,a,t]);return{handleItemSelect:h}}({activeInput:v,setActiveInput:j,activeFilters:r,onFilterChange:a,filterProperties:e,freeformText:l,onFreeformTextChange:n,handleInputChange:E,handleOperatorChange:T,newPathRef:b,handleAIFilter:I}),{handleKeyDown:R}=function({activeInput:e,setActiveInput:t,activeFilters:r,onFilterChange:a}){let l=(0,s.useCallback)(e=>{a(en(r,e))},[r,a]),n=(0,s.useCallback)(e=>{a(en(r,e))},[r,a]),o=(0,s.useCallback)(r=>{"Backspace"===r.key?i(r):" "===r.key&&e?.type==="value"?(r.preventDefault(),t({type:"group",path:[]})):"ArrowLeft"===r.key?m(r):"ArrowRight"===r.key?g(r):"Escape"===r.key&&t(null)},[e,r]),i=(0,s.useCallback)(a=>{if(e?.type==="operator")return;let s=""===a.target.value;if(e?.type==="group"&&s){a.preventDefault();let s=et(r,e.path);s&&s.conditions.length>0?(l([...e.path,s.conditions.length-1]),t({type:"group",path:e.path})):s&&0===s.conditions.length&&(n(e.path),e.path.length>0?t({type:"group",path:e.path.slice(0,-1)}):t(null))}else if(e?.type==="value"&&s){let n=er(r,e.path);n&&!n.value&&(a.preventDefault(),l(e.path),t({type:"group",path:e.path.slice(0,-1)}))}},[e,r,l,n,t]),c=(0,s.useCallback)(e=>{let[t,a]=[e.slice(0,-1),e[e.length-1]];if(a>0){let e=[...t,a-1],l=et(r,t),n=l?.conditions[a-1];if(n&&!("logicalOperator"in n))return e;if(n&&"logicalOperator"in n)return p(e)}return t.length>0?c(t):null},[r]),u=(0,s.useCallback)(e=>{let[t,a]=[e.slice(0,-1),e[e.length-1]],l=et(r,t);if(l&&a<l.conditions.length-1){let e=[...t,a+1];return"logicalOperator"in l.conditions[a+1]?d(e):e}return t.length>0?u(t):null},[r]),d=(0,s.useCallback)(e=>{let t=et(r,e);return t&&0!==t.conditions.length?"logicalOperator"in t.conditions[0]?d([...e,0]):[...e,0]:null},[r]),p=(0,s.useCallback)(e=>{let t=et(r,e);if(!t||0===t.conditions.length)return null;let a=t.conditions[t.conditions.length-1],l=t.conditions.length-1;return"logicalOperator"in a?p([...e,l]):[...e,l]},[r]),h=(0,s.useCallback)(e=>{let t=et(r,e);if(t&&t.conditions.length>0)return p(e);if(e.length>0){let t=e.slice(0,-1),a=e[e.length-1];if(a>0){let e=[...t,a-1],l=et(r,t),n=l?.conditions[a-1];if(n)if("logicalOperator"in n)return p(e);else return e}return h(t)}return null},[r,p]),f=(0,s.useCallback)(e=>{if(e.length>0){let t=e.slice(0,-1),a=e[e.length-1],l=et(r,t);if(l&&a<l.conditions.length-1){let e=[...t,a+1];return"logicalOperator"in l.conditions[a+1]?d(e):e}return f(t)}return null},[r,d]),m=(0,s.useCallback)(r=>{if(0===r.target.selectionStart){if(r.preventDefault(),e?.type==="value"){let r=c(e.path);r&&t({type:"value",path:r})}else if(e?.type==="group"){let r=h(e.path);r&&t({type:"value",path:r})}}},[e,c,h,t]),g=(0,s.useCallback)(a=>{let l=a.target;if(l.selectionStart===l.value.length){if(a.preventDefault(),e?.type==="value"){let a=e.path.slice(0,-1),l=e.path[e.path.length-1],n=et(r,a);if(n&&l<n.conditions.length-1)if("logicalOperator"in n.conditions[l+1]){let e=d([...a,l+1]);e&&t({type:"value",path:e})}else t({type:"value",path:[...a,l+1]});else t({type:"group",path:a})}else if(e?.type==="group"){let r=f(e.path);r&&t({type:"value",path:r})}}},[e,r,et,d,f,t]);return{handleKeyDown:o}}({activeInput:v,setActiveInput:j,activeFilters:r,onFilterChange:a}),L=(0,s.useCallback)(t=>{j({type:"value",path:t}),x(!0),y.current&&clearTimeout(y.current);let a=er(r,t);if(a){let t=e.find(e=>e.name===a.propertyName);t&&t.options&&!Array.isArray(t.options)&&el(t.options)&&k(t,a.value?.toString()||"")}},[r,e,k]),A=(0,s.useCallback)(e=>{j({type:"operator",path:e}),x(!0),y.current&&clearTimeout(y.current)},[]),F=(0,s.useCallback)(e=>{j({type:"group",path:e}),x(!0),y.current&&clearTimeout(y.current)},[]),P=(0,s.useCallback)(()=>{y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{let e=document.activeElement;e&&u.current&&u.current.contains(e)||(x(!1),j(null))},0)},[x,j]),D=(0,s.useCallback)((e,t)=>{n(t)},[]),M=(0,s.useCallback)(e=>{j({type:"value",path:e})},[]),$=(0,s.useCallback)(e=>{a(function e(t,r){if(0===r.length)return{...t,logicalOperator:"AND"===t.logicalOperator?"OR":"AND"};let[a,...l]=r;return{...t,conditions:t.conditions.map((t,r)=>r===a&&ee(t)?e(t,l):t)}}(r,e))},[r,a]),B=(0,s.useCallback)(e=>{a(en(r,e)),j(null)},[r,a,j]);return(0,t.jsxs)("div",{ref:u,className:"w-full space-y-2 relative","data-filterbar-root":!0,children:[(0,t.jsxs)("div",{className:(0,N.cn)("relative flex items-center gap-2 w-full border rounded-md h-10 bg-foreground/[.026] cursor-text p-0 px-2 overflow-auto",i),children:[(0,t.jsx)(p.Search,{className:"text-foreground-muted w-4 h-4 sticky left-0 shrink-0"}),(0,t.jsx)("div",{className:"flex-1 flex flex-wrap items-center gap-1 h-full",children:(0,t.jsx)(eg,{group:r,rootFilters:r,filterProperties:e,path:[],isLoading:d,activeInput:v,onOperatorChange:T,onValueChange:E,onOperatorFocus:A,onValueFocus:L,onBlur:P,onLabelClick:M,onKeyDown:R,onGroupFreeformChange:D,onGroupFreeformFocus:F,groupFreeformValue:l,isGroupFreeformActive:v?.type==="group",onLogicalOperatorChange:c?$:void 0,supportsOperators:c,onRemove:B,propertyOptionsCache:S,loadingOptions:C,aiApiUrl:o,onSelectMenuItem:e=>_(e),setActiveInput:j})})]}),(f||O)&&(0,t.jsx)("div",{className:"text-red-500 text-xs mt-1",children:f||O})]})}function ey({onChange:e,onCancel:a}){let[l,n]=(0,s.useState)();return(0,t.jsxs)("div",{className:"w-full space-y-4",children:[(0,t.jsx)(Q.Calendar,{initialFocus:!0,mode:"range",defaultMonth:l?.from,selected:l,onSelect:n,numberOfMonths:2}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 py-3 px-4 border-t",children:[(0,t.jsx)(b.Button,{type:"default",onClick:a,children:"Cancel"}),(0,t.jsx)(b.Button,{type:"primary",onClick:()=>{if(l?.from){let t=(0,r.default)(l.from).toISOString(),a=l.to?(0,r.default)(l.to).toISOString():(0,r.default)().toISOString();e(`${t}|${a}`)}},children:"Apply"})]})]})}let ev=({isLoading:e,newCount:a,onRefresh:l,onSearch:o=()=>{},defaultSearchValue:p="",defaultFromValue:f,defaultToValue:g,onExploreClick:y,queryUrl:C,condensedLayout:k,isShowingEventChart:w,onToggleEventChart:I,csvData:E,onFiltersChange:T,filters:_,table:R,onSelectedDatabaseChange:L,className:A,selectedDatePickerValue:F,setSelectedDatePickerValue:P})=>{let D=(0,n.useRouter)(),{ref:M}=(0,i.useParams)(),{data:$}=(0,v.useLoadBalancersQuery)({projectRef:M}),B=j.IS_PLATFORM&&O.LOG_ROUTES_WITH_REPLICA_SUPPORT.includes(D.pathname),q=(0,s.useMemo)(()=>{let e=O.FILTER_OPTIONS[R];if(!e)return[];let a=[];return a.push({label:"Time Range",name:"timerange",type:"string",operators:["="],options:[{label:"Last 15 minutes",value:`${(0,r.default)().subtract(15,"minute").toISOString()}|${(0,r.default)().toISOString()}`},{label:"Last 30 minutes",value:`${(0,r.default)().subtract(30,"minute").toISOString()}|${(0,r.default)().toISOString()}`},{label:"Last hour",value:`${(0,r.default)().subtract(1,"hour").toISOString()}|${(0,r.default)().toISOString()}`},{label:"Last 3 hours",value:`${(0,r.default)().subtract(3,"hour").toISOString()}|${(0,r.default)().toISOString()}`},{label:"Last 24 hours",value:`${(0,r.default)().subtract(24,"hour").toISOString()}|${(0,r.default)().toISOString()}`},{label:"Custom Range...",component:e=>(0,t.jsx)(ey,{...e})}]}),Object.entries(e).forEach(([e,t])=>{a.push({label:t.label,name:t.key,type:"string",operators:["="],options:t.options.map(e=>({label:e.label,value:e.key,description:e.description}))})}),a},[R]),U=(0,s.useMemo)(()=>{let e=[];return(f||g)&&!_.timerange&&e.push({propertyName:"timerange",operator:"=",value:`${f||""}|${g||""}`}),Object.entries(_).forEach(([t,r])=>{if("search_query"!==t)if("object"==typeof r&&null!==r){if(0===Object.keys(r).length)return void e.push({propertyName:t,operator:"=",value:""});Object.entries(r).forEach(([r,a])=>{a&&e.push({propertyName:t,operator:"=",value:r})})}else null!=r&&e.push({propertyName:t,operator:"=",value:String(r)})}),{logicalOperator:"AND",conditions:e}},[_,f,g]);return(0,t.jsx)("div",{className:(0,N.cn)("flex w-full flex-col gap-2",k?" p-3":"",A),children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-x-2",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(ex,{filterProperties:q,filters:U,onFilterChange:e=>{let t={},r=!1;e.conditions.forEach(e=>{if(!("propertyName"in e))return;let a=e.propertyName;if(a)if("timerange"===a)if(r=!0,e.value){let r=String(e.value),[a,l]=r.split("|");t.timerange={[r]:!0},o("datepicker-change",{from:a,to:l})}else t.timerange={},o("datepicker-change",{from:"",to:""});else{if(t[a]||(t[a]={}),!e.value)return;if("string"==typeof e.value){let r=t[a],l="object"!=typeof r||null===r||Array.isArray(r)?{}:{...r};l[e.value]=!0,t[a]=l}}}),r||o("datepicker-change",{from:"",to:""}),T(t)},freeformText:p,onFreeformTextChange:e=>o("search-input-change",{query:e})})}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)(b.Button,{title:"refresh",type:"default",className:"px-1.5",icon:(0,t.jsxs)("div",{className:"relative",children:[a>0&&(0,t.jsxs)("div",{className:"absolute -top-3 right-3 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute z-20",children:(0,t.jsx)("p",{style:{fontSize:"0.6rem"},className:"text-white",children:a>1e3?`${Math.floor(a/100)/10}K`:a})}),(0,t.jsx)("div",{className:"h-4 w-4 animate-ping rounded-full bg-green-800 opacity-60"}),(0,t.jsx)("div",{className:"z-60 absolute top-0 right-0 h-full w-full rounded-full bg-green-900 opacity-80"})]}),(0,t.jsx)(d.RefreshCw,{})]}),loading:e,disabled:e,onClick:l}),(0,t.jsx)(b.Button,{type:"default",onClick:()=>I(),icon:w?(0,t.jsx)(c.Eye,{}):(0,t.jsx)(u.EyeOff,{}),children:"Chart"}),B?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(S.Tooltip,{children:[(0,t.jsx)(S.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(b.Button,{asChild:!0,className:"px-1.5",type:"default",icon:(0,t.jsx)(h.Terminal,{}),children:(0,t.jsx)(m.default,{href:C})})}),(0,t.jsx)(S.TooltipContent,{side:"bottom",className:"text-xs",children:"Open query in Logs Explorer"})]}),(0,t.jsx)(x.DatabaseSelector,{onSelectId:L,additionalOptions:R===O.LogsTableName.EDGE&&($??[]).length>0?[{id:`${M}-all`,name:"API Load Balancer"}]:[]})]}):(0,t.jsx)(b.Button,{asChild:!0,type:"default",onClick:y,children:(0,t.jsx)(m.default,{href:C,children:"Explore via query"})})]})]})})};var ej=e.i(979377),eb=e.i(280590);e.s(["LogsPreviewer",0,({projectRef:e,queryType:a,filterOverride:c,condensedLayout:u=!1,tableName:d,children:p,EmptyState:h,filterPanelClassName:f})=>{let m=(0,o.useFlag)("universalFilterBar"),g=(0,n.useRouter)(),{db:x}=(0,i.useParams)(),{data:y}=(0,z.useSelectedOrganizationQuery)(),v=(0,K.useDatabaseSelectorStateSnapshot)(),[j,C]=(0,s.useState)(!0),[S,N]=(0,s.useState)(function(){let e=g.query.iso_timestamp_start,t=g.query.iso_timestamp_end;if(e&&t)return{to:t,from:e,text:`${(0,r.default)(e).format("DD MMM, HH:mm")} - ${(0,r.default)(t).format("DD MMM, HH:mm")}`,isHelper:!1};let a=O.PREVIEWER_DATEPICKER_HELPERS.find(e=>e.default);return{to:a.calcTo(),from:a.calcFrom(),text:a.text,isHelper:!0}}()),{search:k,setSearch:w,timestampStart:I,timestampEnd:E,setTimeRange:T,filters:M,setFilters:B}=(0,P.useLogsUrlState)();(0,s.useEffect)(()=>{I&&E&&N({to:E,from:I,text:`${(0,r.default)(I).format("DD MMM, HH:mm")} - ${(0,r.default)(E).format("DD MMM, HH:mm")}`,isHelper:!1})},[I,E]);let[q,Q]=(0,D.useSelectedLog)(),{data:V,isSuccess:Y}=(0,A.useReadReplicasQuery)({projectRef:e}),J=d||O.LOGS_TABLES[a],{error:X,logData:Z,params:ee,newCount:et,isLoading:er,eventChartData:ea,isLoadingOlder:el,loadOlder:en,refresh:es}=(0,F.default)({projectRef:e,table:J,filterOverride:c}),{data:eo,isLoading:ei,error:ec}=U({projectRef:e,id:q??void 0,queryType:a,paramsToMerge:ee}),{showUpgradePrompt:eu,setShowUpgradePrompt:ed}=(0,H.useUpgradePrompt)(I),{getEntitlementNumericValue:ep}=(0,eb.useCheckEntitlements)("log.retention_days"),eh=ep(),ef=async(e,{query:t,to:r,from:a})=>{"search-input-change"===e?(w(t||""),Q(null)):"event-chart-bar-click"===e?T(a||"",r||""):"datepicker-change"===e&&((0,$.maybeShowUpgradePromptIfNotEntitled)(a||"",eh)?ed(!eu):T(a||"",r||""))};(0,s.useEffect)(()=>{I&&(0,$.maybeShowUpgradePromptIfNotEntitled)(I,eh)&&ed(!eu)},[I,y]),(0,s.useEffect)(()=>{void 0!==x?void 0!==V?.find(e=>e.identifier===x)&&v.setSelectedDatabaseId(x):void 0!==v.selectedDatabaseId&&v.selectedDatabaseId!==e&&(O.LOG_ROUTES_WITH_REPLICA_SUPPORT.includes(g.pathname)?g.push({pathname:g.pathname,query:{...g.query,db:v.selectedDatabaseId}}):v.setSelectedDatabaseId(e))},[x,Y]);let em={className:f,csvData:Z,isLoading:er,newCount:et,onRefresh:()=>{if(S.isHelper){let e=O.PREVIEWER_DATEPICKER_HELPERS.find(e=>e.text===S.text);e&&T(e.calcFrom(),E)}es()},onSearch:ef,defaultSearchValue:k,defaultToValue:E,defaultFromValue:I,queryUrl:`/project/${e}/logs/explorer?q=${encodeURIComponent(ee.sql||"")}&its=${encodeURIComponent(I)}&ite=${encodeURIComponent(E)}`,onSelectTemplate:e=>{B({...M,search_query:e.searchString})},filters:M,onFiltersChange:B,table:J,condensedLayout:u,isShowingEventChart:j,onToggleEventChart:()=>C(!j),onSelectedDatabaseChange:t=>{B({...M,database:t!==e?t:void 0});let{db:r,...a}=g.query;g.push({pathname:g.pathname,query:t!==e?{...g.query,db:t}:a})},selectedDatePickerValue:S,setSelectedDatePickerValue:N};return(0,t.jsxs)("div",{className:"flex-1 flex flex-col h-full",children:[m?(0,t.jsx)(ev,{...em}):(0,t.jsx)(_,{...em}),p,(0,t.jsx)("div",{className:"transition-all duration-500 "+(j&&Z.length>0?"mb-2 mt-1 opacity-100":"h-0 opacity-0"),children:(0,t.jsx)("div",{className:u?"px-3":"",children:j&&(0,t.jsx)(W.LogsBarChart,{data:ea,onBarClick:e=>{var t;let a,l,n,s;if(!e?.timestamp)return;let{start:o,end:i}=(t=e.timestamp,n=(0,r.default)(t).toISOString(),(s=(E?(0,r.default)(E):(0,r.default)()).diff((0,r.default)(I),"hour",!0))>=12?(a=.5,l="hour"):s>=1?(a=2.5,l="minute"):s>=1/30?(a=1,l="minute"):(a=7.5,l="second"),{start:(0,r.default)(n).subtract(a,l).toISOString(),end:(0,r.default)(n).add(a,l).toISOString()});ef("event-chart-bar-click",{query:M.search_query?.toString(),to:i,from:o})},EmptyState:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-[67px]",children:[(0,t.jsx)("p",{className:"text-foreground-light text-xs",children:"No data"}),(0,t.jsx)("p",{className:"text-foreground-lighter text-xs",children:"It may take up to 24 hours for data to refresh"})]})})})}),(0,t.jsxs)("div",{className:"relative flex flex-col flex-grow flex-1 overflow-auto",children:[(0,t.jsx)(L.default,{active:er}),(0,t.jsx)(R.default,{active:er,children:(0,t.jsx)(G.default,{projectRef:e,isLoading:er,data:Z,queryType:a,isHistogramShowing:j,onHistogramToggle:()=>C(!j),error:X,EmptyState:h,onSelectedLogChange:e=>Q(e?.id??null),selectedLog:eo,isSelectedLogLoading:ei,selectedLogError:ec??void 0})})]}),!X&&Z.length>0&&(0,t.jsxs)("div",{className:"border-t flex flex-row items-center gap-3 p-2",children:[(0,t.jsx)(b.Button,{onClick:en,icon:(0,t.jsx)(l,{}),type:"default",loading:el,disabled:el,children:"Load older"}),(0,t.jsxs)("div",{className:"text-sm text-foreground-lighter",children:["Showing ",(0,t.jsx)("span",{className:"font-mono",children:Z.length})," results"]}),(0,t.jsx)("div",{className:"flex flex-row justify-end mt-2",children:(0,t.jsx)(ej.default,{show:eu,setShowUpgradePrompt:ed})})]})]})}],555979)}]);

//# debugId=ec4db25d-f90c-a5f1-482b-3bf5385dfd9d
//# sourceMappingURL=6ac2698c1bbd0ef8.js.map