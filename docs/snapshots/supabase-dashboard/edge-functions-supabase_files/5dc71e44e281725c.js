;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="6cc6b439-f1c5-549e-cdab-136c6e705f0b")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,183110,e=>{"use strict";var s=e.i(478902),t=e.i(902858),a=e.i(809323),i=e.i(867637),r=e.i(915186),n=e.i(74244),l=e.i(389959),o=e.i(355901);e.i(128328);var c=e.i(657588),d=e.i(158639),u=e.i(170149),h=e.i(597541),x=e.i(38429),m=e.i(356003),p=e.i(234745),g=e.i(459806);async function y(e){if(!e.projectRef)throw Error("projectRef is required");let{data:s,error:t}=await (0,p.del)("/v1/projects/{ref}/config/auth/signing-keys/{id}",{params:{path:{ref:e.projectRef,id:e.keyId}}});return t&&(0,p.handleError)(t),s}async function f(e){if(!e.projectRef)throw Error("projectRef is required");let{data:s,error:t}=await (0,p.patch)("/v1/projects/{ref}/config/auth/signing-keys/{id}",{params:{path:{ref:e.projectRef,id:e.keyId}},body:{status:e.status}});return t&&(0,p.handleError)(t),s}let j=({onSuccess:e,onError:s,...t}={})=>{let a=(0,m.useQueryClient)();return(0,x.useMutation)({mutationFn:e=>f(e),async onSuccess(s,t,i){let{projectRef:r}=t;await a.invalidateQueries({queryKey:g.jwtSigningKeysKeys.list(r)}),await e?.(s,t,i)},async onError(e,t,a){void 0===s?o.toast.error(`Failed to update new JWT signing key: ${e.message}`):s(e,t,a)},...t})};var b=e.i(242882);async function k({projectRef:e},s){if(!e)throw Error("projectRef is required");let{data:t,error:a}=await (0,p.get)("/v1/projects/{ref}/config/auth/signing-keys",{params:{path:{ref:e}},signal:s});return a&&(0,p.handleError)(a),t}async function v(e){if(!e.projectRef)throw Error("projectRef is required");let{data:s,error:t}=await (0,p.post)("/v1/projects/{ref}/config/auth/signing-keys/legacy",{params:{path:{ref:e.projectRef}}});return t&&(0,p.handleError)(t),s}var S=e.i(445469),w=e.i(2579),N=e.i(635494),T=e.i(232520),C=e.i(837710),_=e.i(627069),D=e.i(253214),A=e.i(492418),R=e.i(108151),K=e.i(398696),J=e.i(644087);let P=()=>(0,s.jsx)(J.FeatureBanner,{bgAlt:!0,className:"pb-10",children:(0,s.jsxs)("div",{className:"flex flex-col gap-0 z-[2]",children:[(0,s.jsx)("p",{className:"text-sm text-foreground",children:"JWT signing keys are coming soon"}),(0,s.jsx)("p",{className:"text-sm text-foreground-lighter lg:max-w-sm 2xl:max-w-none",children:"We're rolling out JWT signing keys to better support your application needs."}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(C.Button,{type:"default",icon:(0,s.jsx)(K.Github,{}),children:(0,s.jsx)("a",{href:"https://github.com/orgs/supabase/discussions/29289",target:"_blank",rel:"noreferrer",children:"Learn more"})})})]})});var W=e.i(388019);let F=(0,W.default)("Import",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m8 11 4 4 4-4",key:"1dohi6"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4",key:"1ywtjm"}]]),H=({onClick:e,isLoading:t})=>(0,s.jsx)(J.FeatureBanner,{bgAlt:!0,children:(0,s.jsxs)("div",{className:"flex flex-col gap-0 z-[2]",children:[(0,s.jsx)("p",{className:"text-sm text-foreground",children:"Start using JWT signing keys"}),(0,s.jsx)("p",{className:"text-sm text-foreground-lighter lg:max-w-sm 2xl:max-w-none",children:"Right now your project is using the legacy JWT secret. To start taking advantage of the new JWT signing keys, migrate your project's secret to the new set up."}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(C.Button,{type:"primary",icon:(0,s.jsx)(F,{}),onClick:e,loading:t,children:"Migrate JWT secret"})})]})}),E=(0,l.forwardRef)(({title:e,description:t,buttonLabel:a,onClick:i,loading:r,icon:n,type:l,...o},c)=>(0,s.jsx)(_.Card,{className:"first:rounded-b-none last:rounded-t-none shadow-none only:rounded-lg",ref:c,...o,children:(0,s.jsxs)(_.CardHeader,{className:"lg:flex-row lg:items-center gap-3 lg:gap-10 py-4 border-0",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 flex-1 grow",children:[(0,s.jsx)(_.CardTitle,{className:"text-sm",children:e}),(0,s.jsx)(_.CardDescription,{className:"max-w-xl",children:t})]}),(0,s.jsx)("div",{className:"flex lg:justify-end flex-",children:(0,s.jsx)(C.Button,{onClick:i,loading:r,icon:n,type:l,children:a})})]})}));E.displayName="ActionPanel";var q=e.i(55956);async function I(e){if(!e.projectRef)throw Error("projectRef is required");let{data:s,error:t}=await (0,p.post)("/v1/projects/{ref}/config/auth/signing-keys",{params:{path:{ref:e.projectRef}},body:{algorithm:e.algorithm,status:e.status,...e.private_jwk?{private_jwk:e.private_jwk}:null}});return t&&(0,p.handleError)(t),s}let B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),M=" 	\n\r=".split("");function L(e,s,t){if(null!==e)for(s.queue=s.queue<<8|e,s.queuedBits+=8;s.queuedBits>=6;)t(B[s.queue>>s.queuedBits-6&63]),s.queuedBits-=6;else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;)t(B[s.queue>>s.queuedBits-6&63]),s.queuedBits-=6}let z=Array(128);for(let e=0;e<z.length;e+=1)z[e]=-1;for(let e=0;e<M.length;e+=1)z[M[e].charCodeAt(0)]=-2;for(let e=0;e<B.length;e+=1)z[B[e].charCodeAt(0)]=e;var O=e.i(587433),Q=e.i(34411),U=e.i(9679),$=e.i(451031),V=e.i(831927),Y=e.i(156722),G=e.i(719754),X=e.i(449123),Z=e.i(660908);let ee=["kty","n","e","p","q","d","dq","dp","qi"],es=["kty","crv","x","y","d"],et=({projectRef:e,onClose:t})=>{let[a,i]=(0,l.useState)("ES256"),[r,n]=(0,l.useState)(!1),[c,d]=(0,l.useState)(""),[u,h]=(0,l.useState)(!1),p=(0,l.useMemo)(()=>{let e;if(!c.replace(/\s+/g,""))return null;if("HS256"===a)return c.length<16?"Secret must be at least 16 letters long":null;try{e=JSON.parse(c)}catch(e){return"Private key is not valid JSON"}if("object"!=typeof e||!e)return"Private key must be a JSON object";if("string"!=typeof e.kty||!e.kty)return"Private key must have a kty property";if("RS256"===a){if("RSA"!==e.kty)return"Private key must be of RSA type";if("AQAB"!==e.e)return"RSA private keys must use the 65537 (AQAB) public exponent";for(let s of ee)if("string"!=typeof e[s]||!e[s])return`Incomplete RSA private key, required properties are: ${ee.join(", ")}`}else if("ES256"===a){if("EC"!==e.kty)return"Private key must be of EC type";if("P-256"!==e.crv)return"EC private keys must use P-256 curve";for(let s of es)if("string"!=typeof e[s]||!e[s])return`Incomplete EC private key, required properties are: ${es.join(", ")}`}return null},[c,a]),{mutate:y,isPending:f}=(({onSuccess:e,onError:s,...t}={})=>{let a=(0,m.useQueryClient)();return(0,x.useMutation)({mutationFn:e=>I(e),async onSuccess(s,t,i){let{projectRef:r}=t;await a.invalidateQueries({queryKey:g.jwtSigningKeysKeys.list(r)}),await e?.(s,t,i)},async onError(e,t,a){void 0===s?o.toast.error(`Failed to create new JWT signing key: ${e.message}`):s(e,t,a)},...t})})({onSuccess:()=>{o.toast.success("Standby key created successfully"),t()},onError:e=>{let s=e.message;if(s.includes("Please wait until")){let e=s.replace("Please wait until ","").replace("before attempting this request again.","").trim(),t=(0,q.default)(e);t.isValid()&&(s=`Please wait for ${t.fromNow(!0)} before attempting this request again.`)}o.toast.error(`Failed to add new standby key: ${s}`)}}),j=async()=>{let s,t,i;y({projectRef:e,algorithm:a,status:"standby",private_jwk:r?"HS256"===a?{kty:"oct",k:u?c.replace(/\s+/g,"").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""):(s=[],t=e=>{s.push(e)},i={queue:0,queuedBits:0},function(e,s){for(let t=0;t<e.length;t+=1){let a=e.charCodeAt(t);if(a>55295&&a<=56319){let s=(a-55296)*1024&65535;a=(e.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}!function(e,s){if(e<=127)return s(e);if(e<=2047){s(192|e>>6),s(128|63&e);return}if(e<=65535){s(224|e>>12),s(128|e>>6&63),s(128|63&e);return}if(e<=1114111){s(240|e>>18),s(128|e>>12&63),s(128|e>>6&63),s(128|63&e);return}throw Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}(a,s)}}(c,e=>{L(e,i,t)}),L(null,i,t),s.join(""))}:JSON.parse(c):null})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(D.DialogHeader,{children:(0,s.jsx)(D.DialogTitle,{children:"Create a new Standby Key"})}),(0,s.jsx)(D.DialogSectionSeparator,{}),(0,s.jsx)(D.DialogSection,{className:"space-y-4",children:(0,s.jsxs)("p",{className:"text-sm text-foreground-light",children:["Adds a new JSON Web Token signing key. Once all of your application's components have picked it up you can rotate the current key with it.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"This action does not invalidate existing tokens, so your users remain signed in."]})}),(0,s.jsx)(D.DialogSectionSeparator,{}),(0,s.jsxs)(D.DialogSection,{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)(U.Label_Shadcn_,{htmlFor:"algorithm",children:"Choose signing algorithm:"}),(0,s.jsxs)(X.Select_Shadcn_,{name:"algorithm",value:a,onValueChange:e=>i(e),children:[(0,s.jsx)(Y.SelectTrigger_Shadcn_,{id:"algorithm",children:(0,s.jsx)(G.SelectValue_Shadcn_,{placeholder:"Select algorithm"})}),(0,s.jsxs)($.SelectContent_Shadcn_,{children:[(0,s.jsxs)(V.SelectItem_Shadcn_,{value:"ES256",children:[(0,s.jsx)("span",{children:"ES256 (ECC)"}),(0,s.jsx)(O.Badge,{variant:"success",className:"ml-2",children:"Recommended"})]}),(0,s.jsx)(V.SelectItem_Shadcn_,{value:"RS256",children:"RS256 (RSA)"}),(0,s.jsx)(V.SelectItem_Shadcn_,{value:"HS256",children:"HS256 (Shared Secret)"})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)(U.Label_Shadcn_,{htmlFor:"byok",className:"flex items-center gap-x-2",children:[(0,s.jsx)(Q.Checkbox_Shadcn_,{id:"byok",checked:r,onCheckedChange:e=>n(!!e)}),"HS256"===a?"Import an existing secret":"Import an existing private key"]}),r&&(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(Z.Textarea,{className:"font-mono",placeholder:"HS256"===a?"Type in your JWT secret":"Add a private key in JWK (JSON Web Key) format",value:c,onChange:e=>{d(e.target.value)},autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false"}),p&&(0,s.jsx)("p",{className:"text-red-900 text-sm",children:p})]}),r&&"HS256"===a&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(U.Label_Shadcn_,{htmlFor:"base64",className:"flex items-center gap-x-2",children:[(0,s.jsx)(Q.Checkbox_Shadcn_,{id:"base64",checked:u,onCheckedChange:e=>h(!!e)}),"Secret is already Base64 encoded"]})})]})]}),(0,s.jsx)(D.DialogFooter,{children:(0,s.jsx)(C.Button,{onClick:()=>j(),disabled:f||!!p,loading:f,children:"Create standby key"})})]})},ea=(0,W.default)("FileKey",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["circle",{cx:"10",cy:"16",r:"2",key:"4ckbqe"}],["path",{d:"m16 10-4.5 4.5",key:"7p3ebg"}],["path",{d:"m15 11 1 1",key:"1bsyx3"}]]);var ei=e.i(171997);function er({selectedKey:e,restURL:t,onClose:a}){let i=(0,l.useMemo)(()=>new URL("/auth/v1/.well-known/jwks.json",t),[t]),r=(0,l.useMemo)(()=>JSON.stringify(e.public_jwk,null,2),[e]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(D.DialogHeader,{children:(0,s.jsx)(D.DialogTitle,{children:"Key Details"})}),(0,s.jsx)(D.DialogSectionSeparator,{}),(0,s.jsxs)(D.DialogSection,{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(U.Label_Shadcn_,{htmlFor:"key-id",children:"Key ID"}),(0,s.jsx)(ei.Input,{id:"key-id",value:e.id,readOnly:!0})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(U.Label_Shadcn_,{htmlFor:"discovery-url",children:"Discovery URL"}),(0,s.jsx)(ei.Input,{id:"discovery-url",value:i.href,readOnly:!0})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)(U.Label_Shadcn_,{htmlFor:"jwk",className:"flex flex-row gap-2 items-center",children:[(0,s.jsx)(ea,{className:"size-4 text-foreground-light"}),"Public Key (JSON Web Key format)"]}),(0,s.jsx)(Z.Textarea,{className:"font-mono text-sm",rows:8,value:r,readOnly:!0})]})]}),(0,s.jsx)(D.DialogFooter,{children:(0,s.jsx)(C.Button,{onClick:()=>a(),children:"OK"})})]})}var en=e.i(710377),el=e.i(17203),eo=e.i(833655),ec=e.i(546024),ed=e.i(215312),eu=e.i(240788),eh=e.i(843778),ex=e.i(903248);let em={HS256:{label:"HS256 (Shared Secret)",name:"HMAC with SHA-256",description:"JWT signatures are produced by a shared secret.",pros:["Simple to use","Verifying and creating JWTs is very fast and not resource intensive"],cons:["Usually not compatible with SOC2 and other security compliance frameworks","Requires secure key exchange","Not suitable when the verifier shouldn't be able to sign tokens","Key needs to be kept secret on both sides"],shortDescription:"HMAC with SHA-256: Fast, simple, requires secure key exchange",links:[{url:"https://datatracker.ietf.org/doc/html/rfc7518#section-3.2",label:"RFC 7518 Specification Section 3.2"}]},RS256:{label:"RSA 2048",name:"RSA with SHA-256",description:"JWT is signed with a private and verified with a public RSA key.",pros:["Compatible with SOC2 and other security compliance frameworks","RSA is widely adopted and easier to work with","Public key does not need to be kept secret"],cons:["Larger JWT sizes than other choices","Slower to create and verify JWT than other choices"],shortDescription:"RSA with SHA-256: Widely adopted, has public key, slower",links:[{url:"https://datatracker.ietf.org/doc/html/rfc7518#section-3.3",label:"RFC 7518 Specification Section 3.3"}]},ES256:{label:"ECC (P-256)",name:"ECDSA with SHA-256",description:"JWT is signed with a private and verified with a public ECC key using the NIST P-256 curve.",pros:["Compatible with SOC2 and other security compliance frameworks","Faster to create and verify signatures than RSA","Ideal tradeoff between JWT size and efficiency","Public key does not need to be kept secret"],cons:["Wide support but some libraries might make it harder to work with than RSA"],shortDescription:"ECDSA with SHA-256: Faster, more efficient alternative to RSA",links:[{url:"https://datatracker.ietf.org/doc/html/rfc7518#section-3.4",label:"RFC 7518 Specification Section 3.4"}]}},ep=Object.keys(em).reduce((e,s)=>(e[s]=em[s].label,e),{});Object.keys(em).reduce((e,s)=>(e[s]=em[s].shortDescription,e),{});var eg=e.i(265489);function ey({projectRef:e,standbyKey:t,inUseKey:a,onClose:i}){let[r,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)(!1),[h,x]=(0,l.useState)(!1),{data:m,isPending:p}=(0,eu.useEdgeFunctionsQuery)({projectRef:e}),{mutate:g,isPending:y}=j({onSuccess:()=>{o.toast.success("Signing key rotated successfully"),i()},onError:e=>{o.toast.error(`Failed to rotate signing key: ${e.message}`)}}),f=m?.filter(({verify_jwt:e})=>e)??[];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(D.DialogHeader,{children:[(0,s.jsx)(D.DialogTitle,{children:"Rotate JWT signing key"}),(0,s.jsxs)(D.DialogDescription,{children:["Change the key used by Supabase Auth to create new JSON Web Tokens. Non-expired tokens remain ",(0,s.jsx)("span",{className:"text-brand",children:"valid and accepted"}),"!"]})]}),(0,s.jsx)(D.DialogSectionSeparator,{}),(0,s.jsx)(D.DialogSection,{className:"bg",children:(0,s.jsxs)("div",{className:"grid grid-cols-[minmax(0,1fr)_auto_minmax(0,1fr)] items-center gap-x-4 gap-y-2",children:[(0,s.jsxs)(O.Badge,{className:(0,eh.cn)(eg.statusColors.standby,"px-4 py-1 gap-2 flex flex-row items-center uppercase"),children:[(0,s.jsx)(n.Timer,{size:14}),"Standby key"]}),(0,s.jsx)("div",{children:(0,s.jsx)(en.ArrowRight,{className:"size-4 text-foreground-light"})}),(0,s.jsx)("div",{children:(0,s.jsxs)(O.Badge,{className:(0,eh.cn)(eg.statusColors.in_use,"px-4 py-1 gap-2 flex flex-row items-center uppercase"),children:[(0,s.jsx)(ec.Key,{size:14}),"Current key"]})}),(0,s.jsx)("div",{className:"text-xs text-foreground-light font-mono text-center",children:ep[t.algorithm]}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{className:"col-span-3"}),(0,s.jsxs)(O.Badge,{className:(0,eh.cn)(eg.statusColors.in_use,"px-4 py-1 gap-2 flex flex-row items-center uppercase"),children:[(0,s.jsx)(ec.Key,{size:14}),"Current key"]}),(0,s.jsx)("div",{children:(0,s.jsx)(en.ArrowRight,{className:"h-4 w-4 text-foreground-light"})}),(0,s.jsxs)(O.Badge,{className:(0,eh.cn)(eg.statusColors.previously_used,"px-4 py-1 gap-2 flex flex-row items-center uppercase"),children:[(0,s.jsx)(n.Timer,{size:14}),"Previous key"]}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{className:"text-xs text-foreground-light font-mono text-center",children:ep[a.algorithm]})]})}),(0,s.jsx)(D.DialogSectionSeparator,{}),(0,s.jsx)(D.DialogSection,{className:"flex flex-col gap-4",children:p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ex.Skeleton,{className:"h-4 w-full"}),(0,s.jsx)(ex.Skeleton,{className:"h-4 w-full"}),(0,s.jsx)(ex.Skeleton,{className:"h-4 w-full"}),(0,s.jsx)(ex.Skeleton,{className:"h-4 w-full"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-sm",children:"To proceed please confirm:"}),(0,s.jsxs)(U.Label_Shadcn_,{htmlFor:"understands-standby",className:"flex items-top gap-4 text-sm leading-none",children:[(0,s.jsx)(Q.Checkbox_Shadcn_,{id:"understands-standby",className:"mt-0.5",checked:r,onCheckedChange:e=>c(!!e)}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"All of my application's components have picked up the standby key."}),(0,s.jsx)(ed.ButtonTooltip,{type:"default",icon:(0,s.jsx)(eo.Info,{}),className:"px-1.5 py-2 mt-0.5",tooltip:{content:{className:"max-w-[320px] p-4",text:(0,s.jsxs)("p",{children:["If your application verifies JWTs on its own in backend servers, functions, lambdas or other such components, ensure that they've picked up and are verifying tokens against the standby key.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"Recommendation: Periodically fetch the public keys from the project's"," ",(0,s.jsx)("code",{children:"jwks.json"})," endpoint."]})}}})]}),(0,s.jsxs)(U.Label_Shadcn_,{htmlFor:"understands-previously-used",className:"flex items-top gap-4 text-sm leading-none",children:[(0,s.jsx)(Q.Checkbox_Shadcn_,{className:"mt-0.5",id:"understands-previously-used",checked:d,onCheckedChange:e=>u(!!e)}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"To invalidate non-expired JWTs I need to explicitly revoke the currently used key."}),(0,s.jsx)(ed.ButtonTooltip,{type:"default",icon:(0,s.jsx)(eo.Info,{}),className:"px-1.5 py-2 mt-0.5",tooltip:{content:{className:"max-w-[320px] p-4",text:(0,s.jsxs)("p",{children:["Rotating the signing key only changes what key is used by Supabase Auth to issue ",(0,s.jsx)("em",{className:"text-brand not-italic",children:"new tokens"}),".",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"To prevent users from being prematurely signed out, you have to manually revoke the current in use key after rotation.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"Recommendation: If your JWT expiry time is 1 hour, wait at least 1 hour and 15 minutes before revoking the key."]})}}})]}),f.length>0&&(0,s.jsxs)(U.Label_Shadcn_,{htmlFor:"edge-functions-verify-jwt",className:"flex gap-4 text-sm",children:[(0,s.jsx)(Q.Checkbox_Shadcn_,{id:"edge-functions-verify-jwt",className:"mt-0.5",checked:h,onCheckedChange:e=>x(!!e)}),(0,s.jsxs)("p",{className:"text-sm text-foreground-light",children:["The following Edge Functions may stop functioning for signed-in users as they verify the legacy JWT secret:"," ",f.map(({name:e})=>(0,s.jsxs)("a",{className:"",href:`../../functions/${e}/details`,target:"_blank",title:e,children:[(0,s.jsx)(el.ExternalLink,{className:"size-3 inline-block"})," ",(0,s.jsx)("code",{children:e})]})).reduce((e,s)=>e.length>0?[...e,", ",s]:[s],[])]}),(0,s.jsx)(ed.ButtonTooltip,{type:"default",icon:(0,s.jsx)(eo.Info,{}),className:"px-1.5 py-2 mt-0.5",tooltip:{content:{className:"max-w-[320px] p-4",text:(0,s.jsxs)("p",{children:["Some of your Edge Functions are set up to require a JWT in the"," ",(0,s.jsx)("code",{children:"Authorization"})," header signed with the"," ",(0,s.jsx)("em",{className:"text-brand not-italic",children:"legacy JWT secret"}),". Rotation causes"," ",(0,s.jsx)("em",{className:"text-brand not-italic",children:"invocations by signed-in users"})," ","to fail with HTTP 401 Unauthorized, as the JWT no longer meets this requirement.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"Recommendation: Change all of your Edge Functions to no longer verify JWT and implement the verification logic in the function's code yourself by using the Supabase client library or any other library for working with JWT."]})}}})]})]})}),(0,s.jsx)(D.DialogFooter,{children:(0,s.jsx)(C.Button,{onClick:()=>g({projectRef:e,keyId:t.id,status:"in_use"}),disabled:p||!d||!r||!!f.length&&!h,loading:y,children:"Rotate signing key"})})]})}var ef=e.i(265100);let ej=(0,W.default)("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);var eb=e.i(154971),eb=eb,ek=e.i(543851),ev=e.i(471998),eS=e.i(999918),ew=e.i(432946),eN=e.i(423782),eT=e.i(874311),eC=e.i(955909),e_=e.i(382490);let eD=(0,W.default)("LockKeyholeOpen",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{width:"18",height:"12",x:"3",y:"10",rx:"2",key:"l0tzu3"}],["path",{d:"M7 10V7a5 5 0 0 1 9.33-2.5",key:"car5b7"}]]),eA=(0,W.default)("RectangleEllipsis",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M17 12h.01",key:"1m0b6t"}],["path",{d:"M7 12h.01",key:"eqddd0"}]]);var eR=e.i(71049);let eK=({algorithm:e,legacy:t})=>{let a=em[e];return(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:["HS256"===e?(0,s.jsx)(eA,{className:"flex-shrink-0",size:14}):(0,s.jsx)(eD,{className:"flex-shrink-0",size:14}),(0,s.jsx)("p",{children:t?`Legacy ${a.label}`:a.label}),(0,s.jsxs)(eR.HoverCard,{closeDelay:50,openDelay:300,children:[(0,s.jsx)(eR.HoverCardTrigger,{className:"min-w-0",children:(0,s.jsx)(e_.HelpCircle,{size:14,className:"text-foreground-lighter"})}),(0,s.jsx)(eR.HoverCardContent,{className:"w-[22rem] flex items-start gap-3",side:"right",align:"center",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"font-semibold truncate",children:a.name}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 text-sm text-foreground-light",children:[(0,s.jsx)("p",{children:a.description}),(0,s.jsxs)("p",{children:["Pros:",(0,s.jsx)("ul",{className:"list-disc pl-6",children:a.pros.map((e,t)=>(0,s.jsx)("li",{children:e},t))})]}),(0,s.jsxs)("p",{children:["Cons:"," ",(0,s.jsx)("ul",{className:"list-disc pl-6",children:a.cons.map((e,t)=>(0,s.jsx)("li",{children:e},t))}),(0,s.jsx)("br",{})]})]}),(0,s.jsx)("div",{className:"space-y-1 mt-2",children:a.links.map((e,t)=>(0,s.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-brand hover:text-brand-600 flex items-center",children:[(0,s.jsx)(el.ExternalLink,{className:"w-3 h-3 mr-1 flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate",children:e.label})]},t))})]})})]})]})},eJ=ef.motion.create(A.TableRow),eP=({signingKey:e,setSelectedKey:t,setShownDialog:a,handlePreviouslyUsedKey:i,handleStandbyKey:r,legacyKey:l,standbyKey:o,isLoading:c=!1})=>(0,s.jsxs)(eJ,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto",transition:{duration:.2}},exit:{opacity:0,height:0},className:(0,eh.cn)("in_use"!==e.status?"border-b border-dashed border-border":"border-b"),children:[(0,s.jsx)(A.TableCell,{className:"w-[150px] pr-0 py-2",children:(0,s.jsx)("div",{className:"flex -space-x-px items-center",children:(0,s.jsxs)(O.Badge,{className:(0,eh.cn)(eg.statusColors[e.status],"rounded-r-none","gap-2 w-full h-6","uppercase font-mono","border-r-0"),children:["standby"===e.status?(0,s.jsx)(n.Timer,{className:"flex-shrink-0",size:14}):(0,s.jsx)(ec.Key,{className:"flex-shrink-0",size:14}),(0,s.jsx)("span",{className:"truncate text-xs",children:eg.statusLabels[e.status]})]})})}),(0,s.jsx)(A.TableCell,{className:"font-mono truncate w-[315px] pl-0 py-2",children:(0,s.jsx)("div",{className:"min-w-0 flex",children:(0,s.jsx)(O.Badge,{className:(0,eh.cn)("bg-opacity-100 bg-200 border-foreground-muted","rounded-l-none","gap-2 py-2 h-6 min-w-0 overflow-hidden flex items-center flex-1"),children:(0,s.jsx)("span",{className:"truncate flex-1 text-xs",title:e.id,children:e.id})})})}),(0,s.jsx)(A.TableCell,{className:"truncate py-2",children:(0,s.jsx)(eK,{algorithm:e.algorithm,legacy:e.id===l?.id})}),"previously_used"===e.status||"revoked"===e.status?(0,s.jsx)(A.TableCell,{className:"max-w-[100px] text-right py-2 text-sm text-foreground-light whitespace-nowrap hidden lg:table-cell",children:(0,s.jsx)(eC.TimestampInfo,{className:"text-sm",utcTimestamp:e.updated_at,label:(0,q.default)(e.updated_at).fromNow()})}):(0,s.jsx)(A.TableCell,{}),(0,s.jsx)(A.TableCell,{className:"text-right py-2",children:("in_use"!==e.status||"HS256"!==e.algorithm)&&(0,s.jsxs)(eT.DropdownMenu,{children:[(0,s.jsx)(eT.DropdownMenuTrigger,{asChild:!0,children:(0,s.jsx)(C.Button,{type:"text",className:"px-1.5",loading:c,icon:(0,s.jsx)(ev.MoreVertical,{className:"size-4"})})}),(0,s.jsxs)(eT.DropdownMenuContent,{align:"end",className:"w-52",children:["HS256"!==e.algorithm&&(0,s.jsxs)(eT.DropdownMenuItem,{onSelect:()=>{t(e),a("key-details")},children:[(0,s.jsx)(ek.Eye,{className:"mr-2 size-4"}),"View key details"]}),"standby"===e.status&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(eT.DropdownMenuItem,{onSelect:()=>i(e.id),className:"text-destructive",children:[(0,s.jsx)(ej,{className:"mr-2 size-4"}),"Move to previously used"]})}),"previously_used"===e.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(eN.DropdownMenuItemTooltip,{disabled:!!o,onSelect:()=>r(e.id),tooltip:{content:{side:"left",text:o?"You may only have one standby key at a time":void 0}},children:[(0,s.jsx)(eb.default,{className:"mr-2 size-4"}),"Move to standby key"]}),(0,s.jsxs)(eT.DropdownMenuItem,{onSelect:()=>{t(e),a("revoke")},className:"text-destructive",children:[(0,s.jsx)(eS.ShieldOff,{className:"mr-2 size-4"}),"Revoke key"]})]}),"revoked"===e.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(eN.DropdownMenuItemTooltip,{disabled:!!o,onSelect:()=>r(e.id),tooltip:{content:{side:"left",text:o?"You may only have one standby key at a time":void 0}},children:[(0,s.jsx)(eb.default,{className:"mr-2 size-4"}),"Move to standby key"]}),(0,s.jsxs)(eT.DropdownMenuItem,{onSelect:()=>{t(e),a("delete")},className:"text-destructive",disabled:l?.id===e.id,children:[(0,s.jsx)(ew.Trash2,{className:"mr-2 size-4"}),"Delete permanently"]})]})]})]})})]},e.id),eW=()=>{let{ref:e}=(0,d.useParams)(),{data:p,isPending:f}=(0,N.useSelectedProjectQuery)(),K=(0,c.useFlag)("newJwtSecrets"),[J,W]=(0,l.useState)(),[F,q]=(0,l.useState)(),[I,B]=(0,l.useState)(),{can:M,isLoading:L}=(0,w.useAsyncCheckPermissions)(t.PermissionAction.SECRETS_READ,"*"),{data:z,isPending:O}=(({projectRef:e},{enabled:s,...t}={})=>(0,b.useQuery)({queryKey:g.jwtSigningKeysKeys.list(e),queryFn:({signal:s})=>k({projectRef:e},s),enabled:s&&!!e,...t}))({projectRef:e},{enabled:M}),{data:Q,isPending:U}=(0,S.useLegacyJWTSigningKeyQuery)({projectRef:e},{enabled:M}),{data:$,isPending:V}=(0,h.useLegacyAPIKeysStatusQuery)({projectRef:e},{enabled:M}),{mutate:Y,isPending:G}=(({onSuccess:e,onError:s,...t}={})=>{let a=(0,m.useQueryClient)();return(0,x.useMutation)({mutationFn:e=>v(e),async onSuccess(s,t,i){let{projectRef:r}=t;await a.invalidateQueries({queryKey:g.jwtSigningKeysKeys.legacy(r)}),await a.invalidateQueries({queryKey:g.jwtSigningKeysKeys.list(r)}),await e?.(s,t,i)},async onError(e,t,a){void 0===s?o.toast.error(`Failed to enable use of JWT signing keys with legacy JWT secret: ${e.message}`):s(e,t,a)},...t})})({onSuccess:()=>{B(void 0),o.toast.success("Successfully migrated JWT secret!")}}),{mutate:X,isPending:Z}=j({onSuccess:()=>{ed(),q(void 0)}}),{mutate:ee,isPending:es}=(({onSuccess:e,onError:s,...t}={})=>{let a=(0,m.useQueryClient)();return(0,x.useMutation)({mutationFn:e=>y(e),async onSuccess(s,t,i){let{projectRef:r}=t;await a.invalidateQueries({queryKey:g.jwtSigningKeysKeys.list(r)}),await e?.(s,t,i)},async onError(e,t,a){void 0===s?o.toast.error(`Failed to delete JWT signing key: ${e.message}`):s(e,t,a)},...t})})({onSuccess:()=>ed(),onError:()=>ed()}),ea=Z||es||G,ei=(0,l.useMemo)(()=>z&&Array.isArray(z.keys)?z.keys.sort((e,s)=>{let t={standby:0,in_use:1,previously_used:2,revoked:3};return t[e.status]-t[s.status]||new Date(s.created_at).getTime()-new Date(e.created_at).getTime()}):[],[z]),en=(0,l.useMemo)(()=>ei.find(e=>"standby"===e.status),[ei]),el=(0,l.useMemo)(()=>ei.find(e=>"in_use"===e.status),[ei]),eo=(0,l.useMemo)(()=>ei.filter(e=>"previously_used"===e.status),[ei]),ec=(0,l.useMemo)(()=>ei.filter(e=>"revoked"===e.status),[ei]),ed=()=>{W(void 0),B(void 0)},eu=async s=>{q(s),X({projectRef:e,keyId:s,status:"previously_used"},{onSuccess:()=>o.toast.success("Successfully moved key to previously used")})},eh=s=>{q(s),X({projectRef:e,keyId:s,status:"standby"},{onSuccess:()=>o.toast.success("Successfully moved key to standby")})};return M||L?f||O||U||V?(0,s.jsx)(R.GenericSkeletonLoader,{}):K?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"-space-y-px",children:M?Q?(0,s.jsxs)(s.Fragment,{children:[en&&(0,s.jsx)(E,{title:"Rotate Signing Key",description:"Switch the standby key to in use. All new JSON Web Tokens issued by Supabase Auth will be signed with this key.",buttonLabel:"Rotate keys",onClick:()=>B("rotate"),loading:Z,icon:(0,s.jsx)(r.RotateCw,{className:"size-4"}),type:"primary"}),!en&&(0,s.jsx)(E,{title:"Create standby key",description:"Set up a new key which you can switch to once it has been picked up by all components of your application.",buttonLabel:"Create Standby Key",onClick:()=>B("create"),loading:ea,type:"primary",icon:(0,s.jsx)(n.Timer,{className:"size-4"})})]}):(0,s.jsx)(H,{onClick:()=>B("legacy"),isLoading:G}):null}),ei.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:(0,s.jsx)(_.Card,{className:"w-full overflow-hidden bg-surface-100 border rounded-md",children:(0,s.jsx)(_.CardContent,{className:"p-0",children:(0,s.jsxs)(A.Table,{className:"p-5",children:[(0,s.jsx)(A.TableHeader,{className:"bg-200",children:(0,s.jsxs)(A.TableRow,{children:[(0,s.jsx)(A.TableHead,{className:"text-left font-mono uppercase text-xs text-foreground-muted h-auto py-2 pr-0 w-20",children:"Status"}),(0,s.jsx)(A.TableHead,{className:"text-left font-mono uppercase text-xs text-foreground-muted h-auto py-2 pl-0",children:"Key ID"}),(0,s.jsx)(A.TableHead,{className:"text-left font-mono uppercase text-xs text-foreground-muted h-auto py-2",children:"Type"}),(0,s.jsx)(A.TableHead,{}),(0,s.jsx)(A.TableHead,{className:"text-right font-mono uppercase text-xs text-foreground-muted h-auto py-2",children:"Actions"})]})}),(0,s.jsx)(A.TableBody,{children:(0,s.jsxs)(a.AnimatePresence,{children:[en&&(0,s.jsx)(eP,{signingKey:en,legacyKey:Q,standbyKey:en,isLoading:F===en.id&&Z,setSelectedKey:W,setShownDialog:B,handleStandbyKey:eh,handlePreviouslyUsedKey:eu},en.id),el&&(0,s.jsx)(eP,{signingKey:el,setSelectedKey:W,setShownDialog:B,handleStandbyKey:eh,handlePreviouslyUsedKey:eu,legacyKey:Q,standbyKey:en},el.id)]})})]})})})}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("h2",{children:"Previously used keys"}),(0,s.jsxs)("p",{className:"text-sm text-foreground-lighter",children:["These JWT signing keys are still used to"," ",(0,s.jsx)("em",{className:"text-brand not-italic",children:"verify tokens"})," that are yet to expire. Revoke once all tokens have expired."]})]}),(0,s.jsx)(_.Card,{className:"overflow-hidden",children:(0,s.jsx)(_.CardContent,{className:"p-0",children:eo.length>0?(0,s.jsxs)(A.Table,{className:"p-5",children:[(0,s.jsx)(A.TableHeader,{className:"bg-200",children:(0,s.jsxs)(A.TableRow,{children:[(0,s.jsx)(A.TableHead,{className:"text-left font-mono uppercase text-xs text-foreground-muted h-auto py-2 pr-0 w-20",children:"Status"}),(0,s.jsx)(A.TableHead,{className:"text-left font-mono uppercase text-xs text-foreground-muted h-auto py-2 pl-0",children:"Key ID"}),(0,s.jsx)(A.TableHead,{className:"text-left font-mono uppercase text-xs text-foreground-muted h-auto py-2",children:"Type"}),(0,s.jsx)(A.TableHead,{className:"text-right font-mono uppercase text-xs text-foreground-muted h-auto py-2 hidden lg:table-cell",children:"Last rotated at"}),(0,s.jsx)(A.TableHead,{className:"text-right font-mono uppercase text-xs text-foreground-muted h-auto py-2",children:"Actions"})]})}),(0,s.jsx)(A.TableBody,{children:(0,s.jsx)(a.AnimatePresence,{children:eo.map(e=>(0,s.jsx)(eP,{signingKey:e,legacyKey:Q,standbyKey:en,isLoading:F===e.id&&Z,setSelectedKey:W,setShownDialog:B,handleStandbyKey:eh,handlePreviouslyUsedKey:eu},e.id))})})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center text-center text-foreground-light p-8 gap-2",children:[(0,s.jsx)(n.Timer,{className:"size-6 text-foreground-lighter"}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"No previously used keys"}),(0,s.jsx)("p",{className:"text-xs text-foreground-lighter",children:"Rotated keys will appear here for verification of existing tokens"})]})]})})})]})]}),ec.length>0&&(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("h2",{children:"Revoked keys"}),(0,s.jsx)("p",{className:"text-sm text-foreground-lighter",children:"These keys are no longer used to verify or sign JWTs."})]}),(0,s.jsx)(_.Card,{className:"overflow-hidden",children:(0,s.jsx)(_.CardContent,{className:"p-0",children:(0,s.jsxs)(A.Table,{className:"p-5",children:[(0,s.jsx)(A.TableHeader,{className:"bg-200",children:(0,s.jsxs)(A.TableRow,{children:[(0,s.jsx)(A.TableHead,{className:"text-left font-mono uppercase text-xs text-foreground-muted h-auto py-2 pr-0 w-20",children:"Status"}),(0,s.jsx)(A.TableHead,{className:"text-left font-mono uppercase text-xs text-foreground-muted h-auto py-2 pl-0",children:"Key ID"}),(0,s.jsx)(A.TableHead,{className:"text-left font-mono uppercase text-xs text-foreground-muted h-auto py-2",children:"Type"}),(0,s.jsx)(A.TableHead,{className:"text-right font-mono uppercase text-xs text-foreground-muted h-auto py-2 hidden lg:table-cell",children:"Last rotated at"}),(0,s.jsx)(A.TableHead,{className:"text-right font-mono uppercase text-xs text-foreground-muted h-auto py-2",children:"Actions"})]})}),(0,s.jsx)(A.TableBody,{children:(0,s.jsx)(a.AnimatePresence,{children:ec.map(e=>(0,s.jsx)(eP,{signingKey:e,setSelectedKey:W,setShownDialog:B,handleStandbyKey:eh,handlePreviouslyUsedKey:eu,legacyKey:Q,standbyKey:en},e.id))})})]})})})]}),(0,s.jsx)(D.Dialog,{open:"legacy"===I,onOpenChange:ed,children:(0,s.jsxs)(D.DialogContent,{className:"sm:max-w-[425px]",children:[(0,s.jsx)(D.DialogHeader,{children:(0,s.jsx)(D.DialogTitle,{children:"Start using new JWT signing keys"})}),(0,s.jsx)(D.DialogSectionSeparator,{}),(0,s.jsxs)(D.DialogSection,{className:"flex flex-col gap-2 text-sm text-foreground-light",children:[(0,s.jsx)("p",{children:"Your project today uses a legacy symmetric JWT secret to create JWTs. To be able to use an asymmetric JWT signing key you first have to migrate it to the new approach."}),(0,s.jsx)("p",{children:"This change does not cause any downtime on your project."})]}),(0,s.jsx)(D.DialogFooter,{children:(0,s.jsx)(C.Button,{loading:G,onClick:()=>Y({projectRef:e}),children:"Migrate JWT secret"})})]})}),(0,s.jsx)(D.Dialog,{open:"create"===I,onOpenChange:ed,children:(0,s.jsx)(D.DialogContent,{className:"sm:max-w-[425px]",children:(0,s.jsx)(et,{projectRef:e,onClose:ed})})}),en&&el&&e&&(0,s.jsx)(D.Dialog,{open:"rotate"===I,onOpenChange:ed,children:(0,s.jsx)(D.DialogContent,{className:"sm:max-w-[425px]",children:(0,s.jsx)(ey,{projectRef:e,standbyKey:en,inUseKey:el,onClose:ed})})}),J&&p&&(0,s.jsx)(D.Dialog,{open:"key-details"===I,onOpenChange:ed,children:(0,s.jsx)(D.DialogContent,{className:"sm:max-w-lg",children:(0,s.jsx)(er,{selectedKey:J,restURL:p.restUrl,onClose:ed})})}),J&&"previously_used"===J.status&&(Q?.id!==J.id||!$?.enabled)&&(0,s.jsx)(u.TextConfirmModal,{visible:"revoke"===I,loading:ea,onConfirm:()=>{X({projectRef:e,keyId:J.id,status:"revoked"},{onSuccess:()=>o.toast.success("Successfully revoked key")})},onCancel:ed,title:`Revoke ${J.id}`,confirmString:J.id,confirmLabel:"Yes, revoke this signing key",confirmPlaceholder:"Type the ID of the key to confirm",variant:"destructive",alert:{title:"This key will no longer be trusted!",description:"By revoking a signing key, all applications trusting it will no longer do so. If there are JWTs (access tokens) that are valid at the time of revocation, they will no longer be trusted, causing users with such JWTs to be signed out."}}),J&&"previously_used"===J.status&&Q?.id===J.id&&($?.enabled??!0)&&(0,s.jsx)(T.AlertDialog,{open:"revoke"===I,onOpenChange:()=>ed(),children:(0,s.jsxs)(T.AlertDialogContent,{children:[(0,s.jsx)(T.AlertDialogHeader,{children:(0,s.jsx)(T.AlertDialogTitle,{children:"Disable JWT-based legacy API keys first"})}),(0,s.jsx)(T.AlertDialogDescription,{children:"It's not possible to revoke the legacy JWT secret unless you have already disabled JWT-based legacy API keys. This is because revoking the JWT secret invalidates the JWT-based legacy API keys."}),(0,s.jsx)(T.AlertDialogFooter,{children:(0,s.jsx)(T.AlertDialogCancel,{children:"OK"})})]})}),J&&"revoked"===J.status&&(0,s.jsx)(u.TextConfirmModal,{visible:"delete"===I,loading:ea,onConfirm:()=>{ee({projectRef:e,keyId:J.id},{onSuccess:()=>o.toast.success("Successfully deleted key")})},onCancel:ed,title:`Permanently delete ${J.id}`,confirmString:J.id,confirmLabel:"Yes, permanently delete this key",confirmPlaceholder:"Type the ID of the key to confirm",variant:"destructive",alert:{title:"This key will be permanently deleted.",description:"The private key and all information about this key will be permanently deleted from our records. This action cannot be undone."}})]}):(0,s.jsx)(P,{}):(0,s.jsx)("div",{className:"bg-surface-100 rounded-md border shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center py-8 px-8 space-x-2",children:[(0,s.jsx)(i.AlertCircle,{size:16,strokeWidth:1.5}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"You don't have permission to view JWT signing keys. These keys are restricted to users with higher access levels."})]})})};var eF=e.i(448710),eH=e.i(806345),eE=e.i(865389),eq=e.i(693241);let eI=()=>{let{can:e,isSuccess:a}=(0,w.useAsyncCheckPermissions)(t.PermissionAction.READ,"auth_signing_keys");return(0,s.jsx)(s.Fragment,{children:a?e?(0,s.jsx)(eW,{}):(0,s.jsx)(eq.default,{isFullPage:!0,resourceText:"access your project's API keys"}):(0,s.jsx)(R.GenericSkeletonLoader,{})})};eI.getLayout=e=>(0,s.jsx)(eF.default,{children:(0,s.jsx)(eE.default,{children:(0,s.jsx)(eH.default,{children:e})})}),e.s(["default",0,eI],183110)},623557,(e,s,t)=>{let a="/project/[ref]/settings/jwt";(window.__NEXT_P=window.__NEXT_P||[]).push([a,()=>e.r(183110)]),s.hot&&s.hot.dispose(function(){window.__NEXT_P.push([a])})}]);

//# debugId=6cc6b439-f1c5-549e-cdab-136c6e705f0b
//# sourceMappingURL=fa195022be485a51.js.map