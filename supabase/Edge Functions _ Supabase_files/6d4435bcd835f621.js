;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="cc978182-8f87-26f2-f9d3-e1fe1f421882")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,421778,e=>{"use strict";var t=e.i(478902),s=e.i(55956),a=e.i(215261),r=e.i(389959);e.i(128328);var i=e.i(158639),l=e.i(787845),n=e.i(17203),o=e.i(857889),c=e.i(775114),d=e.i(296003),u=e.i(494031),h=e.i(215618),m=e.i(215312),p=e.i(438824),x=e.i(230052),f=e.i(317040),g=e.i(441081),j=e.i(602089),b=e.i(627069),y=e.i(492418),v=e.i(500850),N=e.i(283606),_=e.i(314805),S=e.i(408279),w=e.i(108151);let C=()=>{let e,{ref:s}=(0,i.useParams)(),[C,k]=(0,r.useState)("security"),{data:A,isPending:T}=(0,p.useProjectLintsQuery)({projectRef:s}),{data:E,isLoading:I}=(0,u.useQueryPerformanceQuery)({preset:"slowestExecutionTime"}),L=(0,f.useAiAssistantStateSnapshot)(),{openSidebar:R}=(0,g.useSidebarManagerSnapshot)(),{setSelectedItem:P}=(0,x.useAdvisorStateSnapshot)(),D=(0,r.useMemo)(()=>(A??[]).filter(e=>e.categories.includes("SECURITY")),[A]),M=(0,r.useMemo)(()=>(A??[]).filter(e=>e.categories.includes("PERFORMANCE")),[A]),U=D.filter(e=>e.level===c.LINTER_LEVELS.ERROR).length,O=D.filter(e=>e.level===c.LINTER_LEVELS.WARN).length,z=M.filter(e=>e.level===c.LINTER_LEVELS.ERROR).length,$=M.filter(e=>e.level===c.LINTER_LEVELS.WARN).length,H=(0,r.useMemo)(()=>(E??[]).slice(0,5),[E]),B=(0,r.useCallback)(e=>{P(e.cache_key,"lint"),R(h.SIDEBAR_KEYS.ADVISOR_PANEL)},[P,R]),F=U+O+z+$,q=U>0||z>0,W=O>0||$>0;if(0===F)e=(0,t.jsx)("h2",{children:"No issues available"});else{let s=1===F?"issue":"issues",a=F.toString(),r="";q?r="text-destructive":W&&(r="text-warning"),e=(0,t.jsxs)("h2",{children:[a," ",s," need",1===F?"s":""," ",(0,t.jsx)("span",{className:r,children:"attention"})]})}let Q=(e,s,a,r,i)=>{let l=s.filter(e=>e.level===c.LINTER_LEVELS.ERROR||e.level===c.LINTER_LEVELS.WARN).sort((e,t)=>e.level===c.LINTER_LEVELS.ERROR?-1:1);return(0,t.jsxs)("div",{className:"h-full",children:[i&&(0,t.jsxs)("div",{className:"flex flex-col p-4 gap-2",children:[(0,t.jsx)(w.ShimmeringLoader,{}),(0,t.jsx)(w.ShimmeringLoader,{className:"w-3/4"}),(0,t.jsx)(w.ShimmeringLoader,{className:"w-1/2"})]}),!i&&(a>0||r>0)&&(0,t.jsx)("ul",{children:l.map(e=>{let s=e.detail?e.detail:e.title;return(0,t.jsx)("li",{className:"text-sm w-full border-b my-0 last:border-b-0 group px-4 ",children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full group",children:[(0,t.jsxs)("button",{onClick:()=>B(e),className:"flex items-center gap-2 transition truncate flex-1 min-w-0 py-3 text-left",children:[(0,t.jsx)(d.EntityTypeIcon,{type:e.metadata?.type}),(0,t.jsx)("p",{className:"flex-1 font-mono text-xs leading-6 text-xs text-foreground-light group-hover:text-foreground truncate",children:s.replace(/\\`/g,"`")})]}),(0,t.jsx)(m.ButtonTooltip,{type:"text",className:"px-1 opacity-0 group-hover:opacity-100 w-7",icon:(0,t.jsx)(j.AiIconAnimation,{size:16}),onClick:t=>{t.stopPropagation(),t.preventDefault(),R(h.SIDEBAR_KEYS.AI_ASSISTANT),L.newChat({name:"Summarize lint",initialInput:(0,d.createLintSummaryPrompt)(e)})},tooltip:{content:{side:"bottom",text:"Help me fix this issue"}}})]})},e.cache_key)})}),!i&&0===a&&0===r&&(0,t.jsxs)("div",{className:"flex-1 flex flex-col h-full items-center justify-center gap-2",children:[(0,t.jsx)(o.Shield,{size:20,strokeWidth:1.5,className:"text-foreground-muted"}),(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:["No ",e.toLowerCase()," issues found"]})]})]})};return(0,t.jsxs)("div",{className:"@container",children:[T?(0,t.jsx)(w.ShimmeringLoader,{className:"w-96 mb-6"}):(0,t.jsx)("div",{className:"flex justify-between items-center mb-6",children:e}),(0,t.jsxs)("div",{className:"grid grid-cols-1 @xl:grid-cols-2 gap-4",children:[(0,t.jsx)(b.Card,{className:"h-80",children:(0,t.jsxs)(v.Tabs_Shadcn_,{value:C,className:"h-full flex flex-col",children:[(0,t.jsxs)(b.CardHeader,{className:"h-10 py-0 pl-4 pr-2 flex flex-row items-center justify-between flex-0",children:[(0,t.jsxs)(_.TabsList_Shadcn_,{className:"flex justify-start rounded-none gap-x-4 border-b-0 !mt-0 pt-0",children:[(0,t.jsxs)(S.TabsTrigger_Shadcn_,{value:"security",onClick:()=>k("security"),className:"flex items-center gap-2 text-xs py-3 border-b-[1px] font-mono uppercase",children:["Security"," ",U+O>0&&(0,t.jsx)("div",{className:"rounded bg-warning text-warning-100 px-1",children:U+O})]}),(0,t.jsxs)(S.TabsTrigger_Shadcn_,{value:"performance",onClick:()=>k("performance"),className:"flex items-center gap-2 text-xs py-3 border-b-[1px] font-mono uppercase",children:["Performance"," ",z+$>0&&(0,t.jsx)("div",{className:"rounded bg-warning text-warning-100 px-1",children:z+$})]})]}),(0,t.jsx)(m.ButtonTooltip,{asChild:!0,type:"text",className:"!mt-0 w-7",icon:(0,t.jsx)(n.ExternalLink,{}),tooltip:{content:{side:"bottom",text:`Open ${C} Advisor`,className:"capitalize"}},children:(0,t.jsx)(a.default,{href:`/project/${s}/advisors/${C}`})})]}),(0,t.jsxs)(b.CardContent,{className:"!p-0 mt-0 flex-1 overflow-y-auto",children:[(0,t.jsx)(N.TabsContent_Shadcn_,{value:"security",className:"p-0 mt-0 h-full",children:Q("Security",D,U,O,T)}),(0,t.jsx)(N.TabsContent_Shadcn_,{value:"performance",className:"p-0 mt-0 h-full",children:Q("Performance",M,z,$,T)})]})]})}),(0,t.jsxs)(b.Card,{className:"h-80 flex flex-col",children:[(0,t.jsxs)(b.CardHeader,{className:"h-10 flex-row items-center justify-between py-0 pl-4 pr-2",children:[(0,t.jsx)(b.CardTitle,{children:"Slow Queries"}),(0,t.jsx)(m.ButtonTooltip,{asChild:!0,type:"text",className:"!mt-0 w-7",icon:(0,t.jsx)(n.ExternalLink,{}),tooltip:{content:{side:"bottom",text:"Open Query Performance Advisor"}},children:(0,t.jsx)(a.default,{href:`/project/${s}/reports/query-performance`})})]}),(0,t.jsx)(b.CardContent,{className:"!p-0 flex-1 overflow-y-auto",children:I?(0,t.jsxs)("div",{className:"space-y-2 p-4",children:[(0,t.jsx)(w.ShimmeringLoader,{}),(0,t.jsx)(w.ShimmeringLoader,{className:"w-3/4"}),(0,t.jsx)(w.ShimmeringLoader,{className:"w-1/2"}),(0,t.jsx)(w.ShimmeringLoader,{className:"w-3/4"}),(0,t.jsx)(w.ShimmeringLoader,{className:"w-1/2"})]}):0===H.length?(0,t.jsxs)("div",{className:"flex-1 flex flex-col h-full items-center justify-center gap-2",children:[(0,t.jsx)(l.Activity,{strokeWidth:1.5,size:20,className:"text-foreground-muted"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"No slow queries found in the selected period"})]}):(0,t.jsxs)(y.Table,{className:"text-xs font-mono max-w-full",children:[(0,t.jsx)(y.TableHeader,{children:(0,t.jsxs)(y.TableRow,{children:[(0,t.jsx)(y.TableHead,{className:"text-foreground-lighter truncate py-2 h-auto",children:"Query"}),(0,t.jsx)(y.TableHead,{className:"text-foreground-lighter truncate py-2 h-auto",children:"Avg time"}),(0,t.jsx)(y.TableHead,{className:"text-foreground-lighter truncate py-2 h-auto",children:"Calls"})]})}),(0,t.jsx)(y.TableBody,{children:H.map((e,s)=>(0,t.jsxs)(y.TableRow,{className:"py-2",children:[(0,t.jsx)(y.TableCell,{className:"font-mono truncate max-w-xs",children:e.query}),(0,t.jsx)(y.TableCell,{className:"font-mono truncate max-w-xs",children:"number"==typeof e.mean_time?`${(e.mean_time/1e3).toFixed(2)}s`:"N/A"}),(0,t.jsx)(y.TableCell,{className:"font-mono truncate max-w-xs",children:e.calls})]},s))})]})})]})]})]})};var k=e.i(346600),A=e.i(236610),T=e.i(707820),E=e.i(655605),I=e.i(513826),L=e.i(937942),R=e.i(368315),P=e.i(92332),D=e.i(912793);e.i(481541);var M=e.i(755191),U=e.i(114970),O=e.i(360765),z=e.i(171137),$=e.i(499536),H=e.i(71981),B=e.i(10429),F=e.i(837710),q=e.i(405374),W=e.i(843778);let Q=()=>(0,t.jsx)("div",{className:"w-[10%] h-full flex items-center border-r border-default px-2",children:(0,t.jsx)("div",{className:"w-3 h-3 rounded border border-control"})}),G=({className:e,col1:s,col2:a,col3:r})=>(0,t.jsxs)("div",{className:(0,W.cn)("h-[30px] flex items-center bg-studio border-b border-default",e),children:[(0,t.jsx)(Q,{}),(0,t.jsx)("div",{className:"w-[15%] h-full flex items-center border-r border-default px-2",children:(0,t.jsx)("p",{className:"text-xs",children:s})}),(0,t.jsx)("div",{className:"w-[45%] h-full flex items-center border-r border-default px-2",children:(0,t.jsx)("p",{className:"text-xs",children:a})}),(0,t.jsx)("div",{className:"w-[30%] h-full flex items-center px-2",children:(0,t.jsx)("p",{className:"text-xs",children:r})})]}),Y=()=>(0,t.jsxs)("div",{className:"w-full max-w-[500px] h-full pb-10 lg:pb-0 relative pointer-events-none",children:[(0,t.jsxs)("div",{className:(0,W.cn)("w-[290px] lg:w-[400px] h-[180px] bg-alternative border border-default","rounded-t px-4 py-3 space-y-1 overflow-hidden"),children:[(0,t.jsxs)("div",{className:"text-xs font-mono space-x-4 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"1"}),(0,t.jsxs)("p",{className:"text-blue-900",children:["create table ",(0,t.jsxs)("span",{className:"text-foreground",children:["todos ","("]})]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"2"}),(0,t.jsxs)("p",{className:"text-foreground",children:["id ",(0,t.jsx)("span",{className:"text-blue-900",children:"bigint generated by default"}),","]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"3"}),(0,t.jsxs)("p",{className:"text-foreground",children:["task ",(0,t.jsx)("span",{className:"text-blue-900",children:"text"}),","]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"4"}),(0,t.jsxs)("p",{className:"text-foreground",children:["status ",(0,t.jsx)("span",{className:"text-blue-900",children:"status default 'Not Started'"}),","]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"5"}),(0,t.jsxs)("p",{className:"text-foreground",children:["user_id ",(0,t.jsx)("span",{className:"text-blue-900",children:"uuid references auth.users not null"}),","]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"6"}),(0,t.jsxs)("p",{className:"text-foreground",children:["inserted_at ",(0,t.jsx)("span",{className:"text-blue-900",children:"timestamp with time zone"}),","]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"7"}),(0,t.jsxs)("p",{className:"text-foreground",children:["updated_at ",(0,t.jsx)("span",{className:"text-blue-900",children:"timestamp with time zone"}),","]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-4 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"8"}),(0,t.jsx)("p",{className:"text-blue-900",children:");"})]})]}),(0,t.jsxs)("div",{className:(0,W.cn)("w-[260px] lg:w-[320px] h-[160px] lg:h-[220px] bg-surface-100 border border-default","absolute right-0 top-[50px] lg:-top-[40px] rounded-t overflow-y-hidden"),children:[(0,t.jsx)(G,{col1:"id",col2:"task",col3:"status",className:"h-[24px] bg-surface-100"}),(0,t.jsx)(G,{col1:"1",col2:"Create a project",col3:"Complete"}),(0,t.jsx)(G,{col1:"2",col2:"Read documentation",col3:"Complete"}),(0,t.jsx)(G,{col1:"3",col2:"Build application",col3:"In progress"}),(0,t.jsx)(G,{col1:"4",col2:"Connect Supabase",col3:"In progress"}),(0,t.jsx)(G,{col1:"5",col2:"Deploy project",col3:"Not started"}),(0,t.jsx)(G,{col1:"6",col2:"Get users",col3:"Not started"}),(0,t.jsx)(G,{col1:"7",col2:"Upgrade to Pro",col3:"Not started"})]})]}),V=()=>{let{ref:e}=(0,i.useParams)(),{projectAuthAll:s,projectEdgeFunctionAll:r,projectStorageAll:l}=(0,D.useIsFeatureEnabled)(["project_auth:all","project_edge_function:all","project_storage:all"]);return(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-4 lg:gap-20",children:[(0,t.jsx)("div",{className:"col-span-12",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-12 md:space-y-20",children:[(0,t.jsx)("div",{className:"flex h-full flex-col justify-between",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h2",{children:"Welcome to your new project"}),(0,t.jsx)("p",{className:"text-base text-foreground-light",children:"Your project has been deployed on its own instance, with its own API all set up and ready to use."})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-4",children:[(0,t.jsxs)("div",{className:"col-span-12 flex flex-col justify-center space-y-8 lg:col-span-7",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h2",{children:"Build out your database"}),(0,t.jsx)("p",{className:"text-base text-foreground-light",children:"Start building your app by creating tables and inserting data. Our Table Editor makes Postgres as easy to use as a spreadsheet, but there's also our SQL Editor if you need something more."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)(F.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(H.TableEditor,{strokeWidth:1.5}),children:(0,t.jsx)(P.EditorIndexPageLink,{projectRef:e,children:"Table Editor"})}),(0,t.jsx)(F.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(z.SqlEditor,{strokeWidth:1.5}),children:(0,t.jsx)(a.default,{href:`/project/${e}/sql/new`,children:"SQL Editor"})}),(0,t.jsx)(F.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(n.ExternalLink,{}),children:(0,t.jsx)(a.default,{href:`${B.DOCS_URL}/guides/database`,target:"_blank",rel:"noreferrer",children:"About Database"})})]})]}),(0,t.jsx)("div",{className:"col-span-12 lg:col-span-5",children:(0,t.jsx)(Y,{})})]}),s&&r&&l&&(0,t.jsxs)("div",{className:"flex h-full flex-col justify-between space-y-6",children:[(0,t.jsxs)("div",{className:"max-w-2xl space-y-2",children:[(0,t.jsx)("h2",{children:"Explore our other products"}),(0,t.jsx)("p",{className:"text-base text-foreground-light",children:"Supabase provides all the backend features you need to build a product. You can use it completely, or just the features you need."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4 md:gap-y-0 xl:grid-cols-4",children:[(0,t.jsx)(R.default,{children:(0,t.jsxs)(R.default.Content,{className:"flex flex-col space-y-4 md:px-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(M.Auth,{size:16,strokeWidth:1.5})}),(0,t.jsx)("h5",{children:"Authentication"})]}),(0,t.jsx)("div",{className:"flex flex-grow md:min-h-[50px] xl:min-h-[75px]",children:(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"A complete user management system that works without any additional tools."})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(F.Button,{type:"default",asChild:!0,children:(0,t.jsx)(a.default,{href:`/project/${e}/auth/users`,children:"Explore Auth"})}),(0,t.jsx)(F.Button,{className:"translate-y-[1px]",icon:(0,t.jsx)(n.ExternalLink,{}),type:"default",asChild:!0,children:(0,t.jsx)(a.default,{href:`${B.DOCS_URL}/guides/auth`,target:"_blank",rel:"noreferrer",children:"About Auth"})})]})]})}),(0,t.jsx)(R.default,{children:(0,t.jsxs)(R.default.Content,{className:"flex flex-col space-y-4 md:px-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)($.Storage,{size:16,strokeWidth:1.5})}),(0,t.jsx)("h5",{children:"Storage"})]}),(0,t.jsx)("div",{className:"flex md:min-h-[50px] xl:min-h-[75px]",children:(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Store, organize, and serve any file types of any size from multiple buckets."})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(F.Button,{type:"default",asChild:!0,children:(0,t.jsx)(a.default,{href:`/project/${e}/storage/buckets`,children:"Explore Storage"})}),(0,t.jsx)(F.Button,{className:"translate-y-[1px]",icon:(0,t.jsx)(n.ExternalLink,{}),type:"default",asChild:!0,children:(0,t.jsx)(a.default,{href:`${B.DOCS_URL}/guides/storage`,target:"_blank",rel:"noreferrer",children:"About Storage"})})]})]})}),(0,t.jsx)(R.default,{children:(0,t.jsxs)(R.default.Content,{className:"flex flex-col space-y-4 md:px-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(U.EdgeFunctions,{size:16,strokeWidth:1.5})}),(0,t.jsx)("h5",{children:"Edge Functions"})]}),(0,t.jsx)("div",{className:"flex md:min-h-[50px] xl:min-h-[75px]",children:(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Write custom code without deploying or scaling servers, with fast deploy times and low latency."})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(F.Button,{type:"default",asChild:!0,children:(0,t.jsx)(a.default,{href:`/project/${e}/functions`,children:"Explore Functions"})}),(0,t.jsx)(F.Button,{className:"translate-y-[1px]",icon:(0,t.jsx)(n.ExternalLink,{}),type:"default",asChild:!0,children:(0,t.jsx)(a.default,{href:`${B.DOCS_URL}/guides/functions`,target:"_blank",rel:"noreferrer",children:"About Functions"})})]})]})}),(0,t.jsx)(R.default,{children:(0,t.jsxs)(R.default.Content,{className:"flex flex-col space-y-4 md:px-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(O.Realtime,{size:16,strokeWidth:1.5})}),(0,t.jsx)("h5",{children:"Realtime"})]}),(0,t.jsx)("div",{className:"flex md:min-h-[50px] xl:min-h-[75px]",children:(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Listen to your PostgreSQL database in realtime via websockets."})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(F.Button,{type:"default",asChild:!0,children:(0,t.jsx)(a.default,{href:`/project/${e}/realtime/inspector`,children:"Explore Realtime"})}),(0,t.jsx)(F.Button,{className:"translate-y-[1px]",icon:(0,t.jsx)(n.ExternalLink,{}),type:"default",asChild:!0,children:(0,t.jsx)(a.default,{href:`${B.DOCS_URL}/guides/realtime`,target:"_blank",rel:"noreferrer",children:"About Realtime"})})]})]})})]})]})]})}),(0,t.jsx)("div",{className:"col-span-12 lg:col-span-4",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h2",{children:"Connect to your project"}),(0,t.jsxs)("p",{className:"text-base text-foreground-light text-balance",children:["Interact with your database through the"," ",(0,t.jsx)(L.InlineLink,{href:`${B.DOCS_URL}/reference`,children:"Supabase client libraries"})," and your API keys."]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(F.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(E.Settings,{size:16,strokeWidth:1.5}),children:(0,t.jsx)(a.default,{href:`/project/${e}/settings/api`,children:"API settings"})}),(0,t.jsx)(I.DocsButton,{href:`${B.DOCS_URL}/guides/database/api`})]})]})}),(0,t.jsx)("div",{className:"col-span-12 lg:col-span-8",children:(0,t.jsx)(q.APIKeys,{})})]})};var K=e.i(867637),J=e.i(655876),X=e.i(102703),Z=e.i(242882),ee=e.i(234745),et=e.i(510334);async function es({projectRef:e},t){if(!e)throw Error("projectRef is required");let{data:s,error:a}=await (0,ee.get)("/platform/projects/{ref}/analytics/endpoints/usage.api-requests-count",{params:{path:{ref:e}},signal:t});return a&&(0,ee.handleError)(a),s}async function ea({projectRef:e,interval:t},s){if(!e)throw Error("projectRef is required");if(!t)throw Error("interval is required");let{data:a,error:r}=await (0,ee.get)("/platform/projects/{ref}/analytics/endpoints/usage.api-counts",{params:{path:{ref:e},query:{interval:t}},signal:s});return r&&(0,ee.handleError)(r),a}let er=({projectRef:e,interval:t},{enabled:s=!0,...a}={})=>(0,Z.useQuery)({queryKey:et.analyticsKeys.usageApiCounts(e,t),queryFn:({signal:s})=>ea({projectRef:e,interval:t},s),enabled:s&&void 0!==e&&void 0!==t,...a});var ei=e.i(635494),el=e.i(733957),en=e.i(983529),eo=e.i(88816),ec=e.i(898452),ed=e.i(886554),eu=e.i(520124),eh=e.i(25123),em=e.i(265735),ep=e.i(874311),ex=e.i(787902),ef=e.i(613580);let eg={free:1,pro:7,team:28,enterprise:90,platform:1},ej=[{key:"1hr",label:"Last 60 minutes",startValue:1,startUnit:"hour",format:"MMM D, h:mma",availableIn:["free","pro","team","enterprise","platform"]},{key:"1day",label:"Last 24 hours",startValue:24,startUnit:"hour",format:"MMM D, ha",availableIn:["free","pro","team","enterprise","platform"]},{key:"7day",label:"Last 7 days",startValue:7,startUnit:"day",format:"MMM D",availableIn:["pro","team","enterprise"]}],eb=()=>{let e=(0,ec.useRouter)(),{ref:a}=(0,i.useParams)(),{data:l}=(0,em.useSelectedOrganizationQuery)(),{projectAuthAll:n,projectStorageAll:o}=(0,D.useIsFeatureEnabled)(["project_auth:all","project_storage:all"]),{plan:c}=(0,eh.useCurrentOrgPlan)(),d=c?.id==="free"?"1hr":"1day",[u,h]=(0,r.useState)(d),{data:m,isPending:p}=er({projectRef:a,interval:u}),x=ej.find(e=>e.key===u)||ej[1],f=(0,s.default)().subtract(x.startValue,x.startUnit),g=(0,s.default)(),{data:j}=(0,eu.useFillTimeseriesSorted)(m?.result||[],"timestamp",["total_auth_requests","total_rest_requests","total_storage_requests","total_realtime_requests"],0,f.toISOString(),g.toISOString(),5),b=x.format||"MMM D, ha",y=(t,r)=>{let i=x.startUnit,l=(0,s.default)(t?.timestamp),n=l.add(1,i);"rest"===r?e.push(`/project/${a}/logs/edge-logs?its=${l.toISOString()}&ite=${n.toISOString()}`):e.push(`/project/${a}/logs/edge-logs?its=${l.toISOString()}&ite=${n.toISOString()}&f=${JSON.stringify({product:{[r]:!0}})}`)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,t.jsxs)(ep.DropdownMenu,{children:[(0,t.jsx)(ep.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(F.Button,{type:"default",iconRight:(0,t.jsx)(eo.ChevronDown,{size:14}),children:(0,t.jsx)("span",{children:x.label})})}),(0,t.jsx)(ep.DropdownMenuContent,{side:"bottom",align:"start",className:"w-40",children:(0,t.jsx)(ep.DropdownMenuRadioGroup,{value:u,onValueChange:e=>h(e),children:ej.map(e=>{if(e.availableIn?.includes(c?.id||"free"))return(0,t.jsx)(ep.DropdownMenuRadioItem,{value:e.key,children:e.label},e.key);{let s=eg[c?.id??"free"];return(0,t.jsxs)(ef.Tooltip,{children:[(0,t.jsx)(ef.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(ep.DropdownMenuRadioItem,{disabled:!0,value:e.key,className:"!pointer-events-auto",children:e.label})}),(0,t.jsxs)(ef.TooltipContent,{side:"right",children:[(0,t.jsxs)("p",{children:[c?.name," plan only includes up to ",s," day",s>1?"s":""," of log retention"]}),(0,t.jsxs)("p",{className:"text-foreground-light",children:[(0,t.jsx)(L.InlineLink,{className:"text-foreground-light hover:text-foreground",href:`/org/${l?.slug}/billing?panel=subscriptionPlan`,children:"Upgrade your plan"})," ","to increase log retention and view statistics for the"," ",e.label.toLowerCase()]})]})]},e.key)}})})})]}),(0,t.jsxs)("span",{className:"text-xs text-foreground-light",children:["Statistics for ",x.label.toLowerCase()]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 @md:grid-cols-2 gap-4 @2xl:grid-cols-4",children:[(0,t.jsx)(R.default,{className:"mb-0",children:(0,t.jsxs)(R.default.Content,{className:"space-y-4",children:[(0,t.jsx)(ey,{icon:(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(el.Database,{strokeWidth:1.5,size:16})}),title:"Database",href:`/project/${a}/editor`}),(0,t.jsx)(ex.Loading,{active:p,children:(0,t.jsx)(ed.default,{title:"REST Requests",data:j,xAxisKey:"timestamp",yAxisKey:"total_rest_requests",onBarClick:e=>y(e,"rest"),customDateFormat:b,highlightedValue:(0,en.default)(j,"total_rest_requests")})})]})}),n&&(0,t.jsx)(R.default,{className:"mb-0 md:mb-0",children:(0,t.jsxs)(R.default.Content,{className:"space-y-4",children:[(0,t.jsx)(ey,{icon:(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(M.Auth,{strokeWidth:1.5,size:16})}),title:"Auth",href:`/project/${a}/auth/users`}),(0,t.jsx)(ex.Loading,{active:p,children:(0,t.jsx)(ed.default,{title:"Auth Requests",data:j,xAxisKey:"timestamp",yAxisKey:"total_auth_requests",onBarClick:e=>y(e,"auth"),customDateFormat:b,highlightedValue:(0,en.default)(j||[],"total_auth_requests")})})]})}),o&&(0,t.jsx)(R.default,{className:"mb-0 md:mb-0",children:(0,t.jsxs)(R.default.Content,{className:"space-y-4",children:[(0,t.jsx)(ey,{icon:(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)($.Storage,{strokeWidth:1.5,size:16})}),title:"Storage",href:`/project/${a}/storage/buckets`}),(0,t.jsx)(ex.Loading,{active:p,children:(0,t.jsx)(ed.default,{title:"Storage Requests",data:j,xAxisKey:"timestamp",yAxisKey:"total_storage_requests",onBarClick:e=>y(e,"storage"),customDateFormat:b,highlightedValue:(0,en.default)(j,"total_storage_requests")})})]})}),(0,t.jsx)(R.default,{className:"mb-0 md:mb-0",children:(0,t.jsxs)(R.default.Content,{className:"space-y-4",children:[(0,t.jsx)(ey,{icon:(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(O.Realtime,{strokeWidth:1.5,size:16})}),title:"Realtime"}),(0,t.jsx)(ex.Loading,{active:p,children:(0,t.jsx)(ed.default,{title:"Realtime Requests",data:j,xAxisKey:"timestamp",yAxisKey:"total_realtime_requests",onBarClick:e=>y(e,"realtime"),customDateFormat:b,highlightedValue:(0,en.default)(j,"total_realtime_requests")})})]})})]})]})},ey=e=>{let s=e?.href?a.default:"div";return(0,t.jsx)(s,{href:e.href,children:(0,t.jsxs)("div",{className:"flex items-center space-x-3 opacity-80 transition "+(e.href?"cursor-pointer hover:text-gray-1200 hover:opacity-100":""),children:[(0,t.jsx)("div",{children:e.icon}),(0,t.jsx)("span",{className:"flex items-center space-x-1",children:(0,t.jsx)("h4",{className:"mb-0 text-lg",children:e.title})})]})})},ev=()=>{let{data:e}=(0,ei.useSelectedProjectQuery)(),{error:s,isPending:a}=(({projectRef:e},{enabled:t=!0,...s}={})=>(0,Z.useQuery)({queryKey:et.analyticsKeys.usageApiRequestsCount(e),queryFn:({signal:t})=>es({projectRef:e},t),enabled:t&&void 0!==e,...s}))({projectRef:e?.ref}),{isPending:r}=er({projectRef:e?.ref,interval:"1hr"});return a||r?(0,t.jsx)(J.ProjectUsageLoadingState,{}):s?(0,t.jsx)(X.default,{hideCollapse:!0,defaultVisibility:!0,icon:(0,t.jsx)(K.AlertCircle,{size:18,strokeWidth:2}),title:"There was an issue loading the usage details of your project"}):(0,t.jsx)(eb,{})};var eN=e.i(217444),e_=e.i(624982),eS=e.i(416050),ew=e.i(774803),eC=e.i(109);async function ek(e){try{let t=await fetch("https://obuldanrptloktxcffvn.supabase.co/functions/v1/health-check",{method:"GET",signal:e});return await t.json()}catch(e){return{healthy:!1}}}let eA=({projectRef:e},{enabled:t=!0,...s}={})=>(0,Z.useQuery)({queryKey:["projects",e,"service-status","edge-functions"],queryFn:({signal:e})=>ek(e),enabled:t&&void 0!==e,...s});async function eT({projectRef:e},t){if(!e)throw Error("projectRef is required");let{data:s,error:a}=await (0,ee.get)("/v1/projects/{ref}/health",{params:{path:{ref:e},query:{services:["auth","realtime","rest","storage","db"]}},signal:t});return a&&(0,ee.handleError)(a),s}let eE=({projectRef:e},{enabled:t=!0,...s}={})=>(0,Z.useQuery)({queryKey:["projects",e,"service-status"],queryFn:({signal:t})=>eT({projectRef:e},t),enabled:t&&void 0!==e,...s});var eI=e.i(877555),eL=e.i(793912),eR=e.i(135144),eP=e.i(689805);let eD=({status:e,isLoading:t,isProjectNew:s})=>t?"Checking status":"DISABLED"===e?"Disabled":"UNHEALTHY"===e?"Unhealthy":"COMING_UP"===e?"Coming up...":"ACTIVE_HEALTHY"===e?"Healthy":s?"Coming up...":e||"Unable to connect",eM={size:18,strokeWidth:1.5},eU=()=>(0,t.jsx)(ew.Loader2,{...eM,className:"animate-spin"}),eO=()=>(0,t.jsx)(eN.AlertTriangle,{...eM}),ez=()=>(0,t.jsx)(e_.CheckCircle2,{...eM,className:"text-brand"}),e$=({isLoading:e,isProjectNew:s,projectStatus:a})=>"ACTIVE_HEALTHY"===a?(0,t.jsx)(ez,{}):"DISABLED"===a?(0,t.jsx)(eO,{}):"COMING_UP"===a||e||s?(0,t.jsx)(eU,{}):(0,t.jsx)(eO,{}),eH=e=>{if(e?.info&&"db_schema"in e.info)return e.info.db_schema},eB=()=>{let{ref:e}=(0,i.useParams)(),{data:l}=(0,ei.useSelectedProjectQuery)(),[n,o]=(0,r.useState)(!1),{projectAuthAll:c,projectEdgeFunctionAll:d,realtimeAll:u,projectStorageAll:h}=(0,D.useIsFeatureEnabled)(["project_auth:all","project_edge_function:all","realtime:all","project_storage:all"]),m=l?.parentRef!==l?.ref,{data:p,isPending:x}=(0,eC.useBranchesQuery)({projectRef:m?l?.parentRef:void 0},{enabled:m,refetchInterval:t=>{let s=t.state.data;if(!s)return!1;let a=s.find(t=>t.project_ref===e);return!["FUNCTIONS_DEPLOYED","MIGRATIONS_FAILED","FUNCTIONS_FAILED"].includes(a?.status||"")&&5e3}}),f=m?p?.find(t=>t.project_ref===e):void 0,{data:g,isPending:j,refetch:b}=eE({projectRef:e},{refetchInterval:e=>{let t=e.state.data;return!!t?.some(e=>("rest"!==e.name||""!==eH(e))&&"ACTIVE_HEALTHY"!==e.status)&&5e3}}),{data:y,refetch:v}=eA({projectRef:e},{refetchInterval:e=>{let t=e.state.data;return!t?.healthy&&5e3}}),N=g?.find(e=>"auth"===e.name),_=g?.find(e=>"rest"===e.name),S=g?.find(e=>"realtime"===e.name),w=g?.find(e=>"storage"===e.name),C=g?.find(e=>"db"===e.name),k=[{name:"Database",error:void 0,docsUrl:void 0,isLoading:j,status:C?.status??"UNHEALTHY",logsUrl:"/logs/postgres-logs"},{name:"PostgREST",error:_?.error,docsUrl:void 0,isLoading:j,status:""===eH(_)?"DISABLED":_?.status??"UNHEALTHY",logsUrl:"/logs/postgrest-logs"},...c?[{name:"Auth",error:N?.error,docsUrl:void 0,isLoading:j,status:N?.status??"UNHEALTHY",logsUrl:"/logs/auth-logs"}]:[],...u?[{name:"Realtime",error:S?.error,docsUrl:void 0,isLoading:j,status:S?.status??"UNHEALTHY",logsUrl:"/logs/realtime-logs"}]:[],...h?[{name:"Storage",error:w?.error,docsUrl:void 0,isLoading:j,status:w?.status??"UNHEALTHY",logsUrl:"/logs/storage-logs"}]:[],...d?[{name:"Edge Functions",error:void 0,docsUrl:`${B.DOCS_URL}/guides/functions/troubleshooting`,isLoading:j,status:y?.healthy?"ACTIVE_HEALTHY":j?"COMING_UP":"UNHEALTHY",logsUrl:"/logs/edge-functions-logs"}]:[],...m?[{name:"Migrations",error:void 0,docsUrl:void 0,isLoading:x,status:f?.status==="FUNCTIONS_DEPLOYED"?"ACTIVE_HEALTHY":f?.status==="FUNCTIONS_FAILED"||f?.status==="MIGRATIONS_FAILED"?"UNHEALTHY":"COMING_UP",logsUrl:"/branches"}]:[]],A=x||f?.status==="CREATING_PROJECT"||f?.status==="RUNNING_MIGRATIONS",T=k.some(e=>e.isLoading),E=k.every(e=>"ACTIVE_HEALTHY"===e.status||"DISABLED"===e.status),I=5>s.default.utc().diff(s.default.utc(l?.inserted_at),"minute")||l?.status==="COMING_UP";return(0,r.useEffect)(()=>{let e;return I&&(e=setTimeout(()=>{b(),v()},1e3*(300-s.default.utc().diff(s.default.utc(l?.inserted_at),"seconds")))),()=>{clearTimeout(e)}},[I]),(0,t.jsxs)(eP.Popover_Shadcn_,{modal:!1,open:n,onOpenChange:o,children:[(0,t.jsx)(eR.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsxs)(F.Button,{type:"default",icon:T||!E&&I&&A?(0,t.jsx)(eU,{}):(0,t.jsx)("div",{className:`w-2 h-2 rounded-full ${E?"bg-brand":"bg-warning"}`}),children:[m?"Branch":"Project"," Status"]})}),(0,t.jsxs)(eL.PopoverContent_Shadcn_,{portal:!0,className:"p-0 w-56",side:"bottom",align:"center",children:[k.map(s=>(0,t.jsxs)(a.default,{href:`/project/${e}${s.logsUrl}`,className:"transition px-3 py-2 text-xs flex items-center justify-between border-b last:border-none group relative hover:bg-surface-300",children:[(0,t.jsxs)("div",{className:"flex gap-x-2",children:[(0,t.jsx)(e$,{isLoading:s.isLoading,isProjectNew:I,projectStatus:s.status}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{children:s.name}),(0,t.jsx)("p",{className:"text-foreground-light flex items-center gap-1",children:(0,t.jsx)(eD,{isLoading:s.isLoading,isProjectNew:I,status:s.status})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-1 transition opacity-0 group-hover:opacity-100",children:[(0,t.jsx)("span",{className:"text-xs text-foreground",children:"View logs"}),(0,t.jsx)(eS.ChevronRight,{size:14,className:"text-foreground"})]})]},s.name)),!E&&(0,t.jsxs)("div",{className:"flex gap-2 text-xs text-foreground-light px-3 py-2",children:[(0,t.jsx)("div",{className:"mt-0.5",children:(0,t.jsx)(eI.InfoIcon,{})}),(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsxs)("p",{children:[I?"New":"Recently restored"," projects can take up to"," ",5," minutes to become fully operational."]}),(0,t.jsxs)("p",{children:["If services stay unhealthy, refer to our"," ",(0,t.jsx)(L.InlineLink,{href:`${B.DOCS_URL}/guides/troubleshooting/project-status-reports-unhealthy-services`,children:"docs"})," ","for more information."]})]})]})]})]})};var eF=e.i(800556),eq=e.i(297306),eW=e.i(711789),eQ=e.i(975924),eG=e.i(902858),eY=e.i(196621),eV=e.i(838055),eK=e.i(93472);let eJ=()=>{let{ref:e}=(0,i.useParams)(),{data:a}=(0,eV.useProjectUpgradingStatusQuery)({projectRef:e},{enabled:B.IS_PLATFORM}),{status:l,initiated_at:n,latest_status_at:o,error:c}=a?.databaseUpgradeStatus??{},d=`supabase-upgrade-${e}-${n}`,[u,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{h(localStorage?.getItem(d)==="true")},[d]);let m=l===eW.DatabaseUpgradeStatus.Failed,p=s.default.utc(n??0).tz(s.default.tz.guess()).format("DD MMM YYYY HH:mm:ss"),x=`Upgrade information:%0A• Initiated at: ${n}%0A• Error: ${c}`,f=encodeURIComponent(s.default.utc(n??0).format("YYYY-MM-DDTHH:mm:ss")),g=encodeURIComponent(s.default.utc(o??0).utcOffset(0).format("YYYY-MM-DDTHH:mm:ss")),j=`its=${f}&ite=${g}`;return!m||u?null:(0,t.jsx)("div",{className:"max-w-7xl",children:(0,t.jsxs)(eK.Alert,{withIcon:!0,variant:"warning",title:`Postgres version upgrade was not successful (Initiated at ${p})`,actions:(0,t.jsxs)("div",{className:"flex items-center h-full space-x-4",children:[(0,t.jsx)(F.Button,{asChild:!0,type:"default",children:(0,t.jsx)(eY.SupportLink,{queryParams:{category:eG.SupportCategories.DATABASE_UNRESPONSIVE,projectRef:e,subject:"Upgrade%20failed%20for%20project",message:x},children:"Contact support"})}),(0,t.jsx)(F.Button,{type:"text",className:"px-1",icon:(0,t.jsx)(eQ.X,{size:16,strokeWidth:1.5}),onClick:()=>void(h(!0),localStorage.setItem(d,"true"))})]}),children:[(0,t.jsx)("div",{children:"Your project and its data are not affected. Please reach out to us via our support form for assistance with the upgrade."}),(0,t.jsxs)("div",{children:["You may also view logs related to the failed upgrade in your"," ",(0,t.jsx)(L.InlineLink,{href:`/project/${e}/logs/pg-upgrade-logs?${j}`,children:"project's logs"}),"."]})]})})};var eX=e.i(240788),eZ=e.i(164045),e0=e.i(150671),e1=e.i(738196),e2=e.i(276093),e4=e.i(837508),e5=e.i(876298),e6=e.i(587433);let e3=()=>{let{data:e}=(0,ei.useSelectedProjectQuery)(),{data:l}=(0,em.useSelectedOrganizationQuery)(),{data:n}=(0,eZ.useProjectDetailQuery)({ref:e?.parent_project_ref}),o=(0,ei.useIsOrioleDb)(),c=(0,e5.useAppStateSnapshot)(),{ref:d,enableBranching:u}=(0,i.useParams)(),{projectHomepageExampleProjects:h,projectHomepageClientLibraries:m}=(0,e2.useCustomContent)(["project_homepage:example_projects","project_homepage:client_libraries"]),{projectHomepageShowInstanceSize:p,projectHomepageShowExamples:x}=(0,D.useIsFeatureEnabled)(["project_homepage:show_instance_size","project_homepage:show_examples"]),f=(0,r.useRef)(!1),g=e?.status===e4.PROJECT_STATUS.INACTIVE,j=(0,s.default)(e?.inserted_at).isAfter((0,s.default)().subtract(2,"day"));(0,r.useEffect)(()=>{u&&!f.current&&(f.current=!0,c.setShowCreateBranchModal(!0))},[u]);let{data:b,isPending:y}=(0,e1.useTablesQuery)({projectRef:e?.ref,connectionString:e?.connectionString,schema:"public"}),{data:E,isPending:I}=(0,eX.useEdgeFunctionsQuery)({projectRef:e?.ref}),{data:R,isPending:P}=(0,e0.useReadReplicasQuery)({projectRef:e?.ref}),{data:M}=(0,eC.useBranchesQuery)({projectRef:e?.parent_project_ref??e?.ref}),U=M?.find(e=>e.is_default),O=M?.find(t=>t.project_ref===e?.ref),z=O?.name===U?.name,$="Welcome to your project";O&&!z?$=O?.name:e?.name&&($=e?.name);let H=Math.max(0,b?.length??0),F=Math.max(0,E?.length??0),q=Math.max(0,(R?.length??1)-1);return g?(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(eF.ProjectPausedState,{})}):(0,t.jsxs)("div",{className:"w-full px-4",children:[(0,t.jsx)("div",{className:(0,W.cn)("py-16 ",!g&&"border-b border-muted "),children:(0,t.jsxs)("div",{className:"mx-auto max-w-7xl flex flex-col gap-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-6 justify-between w-full",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end gap-3 w-full",children:[(0,t.jsxs)("div",{children:[!z&&(0,t.jsx)(a.default,{href:`/project/${n?.ref}`,className:"text-sm text-foreground-light",children:n?.name}),(0,t.jsx)("h1",{className:"text-3xl",children:$})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2 mb-1",children:[o&&(0,t.jsxs)(ef.Tooltip,{children:[(0,t.jsx)(ef.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(e6.Badge,{variant:"warning",children:"OrioleDB"})}),(0,t.jsxs)(ef.TooltipContent,{side:"bottom",align:"start",className:"max-w-80 text-center",children:["This project is using Postgres with OrioleDB which is currently in preview and not suitable for production workloads. View our"," ",(0,t.jsx)(L.InlineLink,{href:`${B.DOCS_URL}/guides/database/orioledb`,children:"documentation"})," ","for all limitations."]})]}),p&&(0,t.jsx)(eq.ComputeBadgeWrapper,{projectRef:e?.ref,slug:l?.slug,cloudProvider:e?.cloud_provider,computeSize:e?.infra_compute_size})]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[e?.status===e4.PROJECT_STATUS.ACTIVE_HEALTHY&&(0,t.jsxs)("div",{className:"flex items-center gap-x-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsx)(a.default,{href:`/project/${d}/editor`,className:"transition text-foreground-light hover:text-foreground text-sm",children:"Tables"}),y?(0,t.jsx)(w.ShimmeringLoader,{className:"w-full h-[32px] w-6 p-0"}):(0,t.jsx)("p",{className:"text-2xl tabular-nums",children:H})]}),B.IS_PLATFORM&&(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsx)(a.default,{href:`/project/${d}/functions`,className:"transition text-foreground-light hover:text-foreground text-sm",children:"Functions"}),I?(0,t.jsx)(w.ShimmeringLoader,{className:"w-full h-[32px] w-6 p-0"}):(0,t.jsx)("p",{className:"text-2xl tabular-nums",children:F})]}),B.IS_PLATFORM&&(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsx)(a.default,{href:`/project/${d}/settings/infrastructure`,className:"transition text-foreground-light hover:text-foreground text-sm",children:"Replicas"}),P?(0,t.jsx)(w.ShimmeringLoader,{className:"w-full h-[32px] w-6 p-0"}):(0,t.jsx)("p",{className:"text-2xl tabular-nums",children:q})]})]}),B.IS_PLATFORM&&e?.status===e4.PROJECT_STATUS.ACTIVE_HEALTHY&&(0,t.jsx)("div",{className:"ml-6 border-l flex items-center w-[145px] justify-end",children:(0,t.jsx)(eB,{})})]})]}),(0,t.jsx)(eJ,{})]})}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"py-16 border-b border-muted",children:(0,t.jsxs)("div",{className:"mx-auto max-w-7xl space-y-16 @container",children:[B.IS_PLATFORM&&e?.status!==e4.PROJECT_STATUS.INACTIVE&&(0,t.jsx)(t.Fragment,{children:j?(0,t.jsx)(V,{}):(0,t.jsx)(ev,{})}),!j&&e?.status!==e4.PROJECT_STATUS.INACTIVE&&(0,t.jsx)(C,{})]})}),(0,t.jsx)("div",{className:"bg-surface-100/5 py-16",children:(0,t.jsx)("div",{className:"mx-auto max-w-7xl space-y-16 @container",children:e?.status!==e4.PROJECT_STATUS.INACTIVE&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("h2",{className:"text-lg",children:"Client libraries"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-x-8 gap-y-8 md:gap-12 mb-12 md:grid-cols-3",children:m.map(e=>(0,t.jsx)(k.ClientLibrary,{...e},e.language))})]}),x&&(0,t.jsxs)("div",{className:"flex flex-col gap-y-8",children:[(0,t.jsx)("h4",{className:"text-lg",children:"Example projects"}),h?(0,t.jsx)("div",{className:"grid gap-2 md:gap-8 md:grid-cols-2 lg:grid-cols-3",children:h.sort((e,t)=>e.title.localeCompare(t.title)).map(e=>(0,t.jsx)(A.ExampleProject,{...e},e.url))}):(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsxs)(v.Tabs_Shadcn_,{defaultValue:"app",className:"w-full",children:[(0,t.jsxs)(_.TabsList_Shadcn_,{className:"flex gap-4 mb-8",children:[(0,t.jsx)(S.TabsTrigger_Shadcn_,{value:"app",children:"App Frameworks"}),(0,t.jsx)(S.TabsTrigger_Shadcn_,{value:"mobile",children:"Mobile Frameworks"})]}),(0,t.jsx)(N.TabsContent_Shadcn_,{value:"app",children:(0,t.jsx)("div",{className:"grid gap-2 md:gap-8 md:grid-cols-2 lg:grid-cols-3",children:T.EXAMPLE_PROJECTS.filter(e=>"app"===e.type).sort((e,t)=>e.title.localeCompare(t.title)).map(e=>(0,t.jsx)(A.ExampleProject,{...e},e.url))})}),(0,t.jsx)(N.TabsContent_Shadcn_,{value:"mobile",children:(0,t.jsx)("div",{className:"grid gap-2 md:gap-8 md:grid-cols-2 lg:grid-cols-3",children:T.EXAMPLE_PROJECTS.filter(e=>"mobile"===e.type).sort((e,t)=>e.title.localeCompare(t.title)).map(e=>(0,t.jsx)(A.ExampleProject,{...e},e.url))})})]})})]})]})})})]})]})};var e8=e.i(731394),e7=e.i(960547),e9=e.i(86086),te=e.i(527947);let tt=({id:e,children:s})=>{let{attributes:a,listeners:r,setNodeRef:i,transform:l,transition:n,isDragging:o}=(0,e7.useSortable)({id:e}),c={transform:l?`translate3d(${Math.round(l.x)}px, ${Math.round(l.y)}px, 0)`:void 0,transition:n};return(0,t.jsxs)("div",{ref:i,style:c,className:"relative will-change-transform",children:[(0,t.jsx)("button",{"aria-label":"Drag to reorder section",className:"absolute -left-6 top-2 text-foreground-muted hover:text-foreground focus:outline-none cursor-grab active:cursor-grabbing",...a,...r,children:(0,t.jsx)(te.GripVertical,{size:14})}),(0,t.jsx)("div",{className:(0,W.cn)(o&&"opacity-70"),children:s})]})};var ts=e.i(264903),ta=e.i(421549),tr=e.i(667042),ti=e.i(300906),tl=e.i(162082);let tn=({icon:e,label:s,value:r,className:i,href:l,onClick:n,trackingProperties:o})=>{let{mutate:c}=(0,tl.useSendEventMutation)(),{data:d}=(0,ei.useSelectedProjectQuery)(),{data:u}=(0,em.useSelectedOrganizationQuery)(),h=(0,t.jsxs)("div",{className:`group flex items-center gap-4 p-0 text-base justify-start ${i||""}`,children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-md bg-surface-75 group-hover:bg-muted border flex items-center justify-center",children:e}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-left heading-meta text-foreground-light",children:s}),(0,t.jsx)("div",{className:"text-foreground truncate h-[34px] flex items-center capitalize-sentence",children:r})]})]});return l?(0,t.jsx)(a.default,{className:"group block",href:l,onClick:()=>{o&&d?.ref&&u?.slug&&c({action:"home_activity_stat_clicked",properties:o,groups:{project:d.ref,organization:u.slug}})},children:h}):n?(0,t.jsx)("button",{className:"group",onClick:n,children:h}):h};var to=e.i(685509),tc=e.i(993720),td=e.i(745457),tu=e.i(903248),th=e.i(955909);let tm=()=>{let{ref:e}=(0,i.useParams)(),{data:r}=(0,ei.useSelectedProjectQuery)(),{projectAuthAll:l,projectEdgeFunctionAll:n,realtimeAll:o,projectStorageAll:c}=(0,D.useIsFeatureEnabled)(["project_auth:all","project_edge_function:all","realtime:all","project_storage:all"]),d=r?.parentRef!==r?.ref,{data:u,isPending:h}=(0,eC.useBranchesQuery)({projectRef:d?r?.parentRef:void 0},{enabled:d}),m=d?u?.find(t=>t.project_ref===e):void 0,{data:p,isPending:x}=eE({projectRef:e},{refetchInterval:e=>{let t=e.state.data;return!!t?.some(e=>("rest"!==e.name||""!==eH(e))&&"ACTIVE_HEALTHY"!==e.status)&&5e3}}),{data:f}=eA({projectRef:e},{refetchInterval:e=>!e.state.data?.healthy&&5e3}),g=p?.find(e=>"auth"===e.name),j=p?.find(e=>"rest"===e.name),b=p?.find(e=>"realtime"===e.name),y=p?.find(e=>"storage"===e.name),v=p?.find(e=>"db"===e.name),N=r?.status==="COMING_UP"||d&&(h||m?.status==="CREATING_PROJECT"||m?.status==="RUNNING_MIGRATIONS"),_=[{name:"Database",error:void 0,docsUrl:void 0,isLoading:x,status:v?.status??"UNHEALTHY",logsUrl:"/logs/postgres-logs"},{name:"PostgREST",error:j?.error,docsUrl:void 0,isLoading:x,status:""===eH(j)?"DISABLED":j?.status??"UNHEALTHY",logsUrl:"/logs/postgrest-logs"},...l?[{name:"Auth",error:g?.error,docsUrl:void 0,isLoading:x,status:g?.status??"UNHEALTHY",logsUrl:"/logs/auth-logs"}]:[],...o?[{name:"Realtime",error:b?.error,docsUrl:void 0,isLoading:x,status:b?.status??"UNHEALTHY",logsUrl:"/logs/realtime-logs"}]:[],...c?[{name:"Storage",error:y?.error,docsUrl:void 0,isLoading:x,status:y?.status??"UNHEALTHY",logsUrl:"/logs/storage-logs"}]:[],...n?[{name:"Edge Functions",error:void 0,docsUrl:`${B.DOCS_URL}/guides/functions/troubleshooting`,isLoading:x,status:f?.healthy?"ACTIVE_HEALTHY":x?"COMING_UP":"UNHEALTHY",logsUrl:"/logs/edge-functions-logs"}]:[],...d?[{name:"Migrations",error:void 0,docsUrl:void 0,isLoading:h,status:d?m?.status==="FUNCTIONS_DEPLOYED"?"ACTIVE_HEALTHY":m?.status==="FUNCTIONS_FAILED"||m?.status==="MIGRATIONS_FAILED"?"UNHEALTHY":"COMING_UP":N?"COMING_UP":"ACTIVE_HEALTHY",logsUrl:d?"/branches":"/logs/database-logs"}]:[]],S=_.some(e=>e.isLoading),w=_.every(e=>"ACTIVE_HEALTHY"===e.status||"DISABLED"===e.status),C=5>s.default.utc().diff(s.default.utc(r?.inserted_at),"minute")||r?.status==="COMING_UP"||d&&(m?.status==="CREATING_PROJECT"||m?.status==="RUNNING_MIGRATIONS"||N),k=_.some(e=>"UNHEALTHY"===e.status),A=_.some(e=>"COMING_UP"===e.status),T=r?.status==="COMING_UP";return(0,t.jsxs)(eP.Popover_Shadcn_,{children:[(0,t.jsx)(eR.PopoverTrigger_Shadcn_,{children:(0,t.jsx)(tn,{icon:T?(0,t.jsx)(ew.Loader2,{className:"animate-spin",size:18}):(0,t.jsx)("div",{className:"grid grid-cols-3 gap-1",children:_.map((e,s)=>(0,t.jsx)("div",{className:(0,W.cn)("w-1.5 h-1.5 rounded-full",e.isLoading||"COMING_UP"===e.status||C&&"ACTIVE_HEALTHY"!==e.status?"bg-foreground-lighter animate-pulse":"ACTIVE_HEALTHY"===e.status?"bg-brand":"bg-selection")},`${e.name}-${s}`))}),label:(0,t.jsx)("span",{children:"Status"}),value:(0,t.jsx)("span",{children:S?"Checking...":A?"Coming up...":k?"Unhealthy":"Healthy"})})}),(0,t.jsxs)(eL.PopoverContent_Shadcn_,{portal:!0,className:"p-0 w-60",side:"bottom",align:"start",children:[_.map(s=>(0,t.jsxs)(a.default,{href:`/project/${e}${s.logsUrl}`,className:"transition px-3 py-2 text-xs flex items-center justify-between border-b last:border-none group relative hover:bg-surface-300",children:[(0,t.jsxs)("div",{className:"flex gap-x-2",children:[(0,t.jsx)(e$,{isLoading:s.isLoading,isProjectNew:C,projectStatus:s.status}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{children:s.name}),(0,t.jsx)("p",{className:"text-foreground-light flex items-center gap-1",children:(0,t.jsx)(eD,{isLoading:s.isLoading,isProjectNew:C,status:s.status})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-1 transition opacity-0 group-hover:opacity-100",children:[(0,t.jsx)("span",{className:"text-xs text-foreground",children:"View logs"}),(0,t.jsx)(eS.ChevronRight,{size:14,className:"text-foreground"})]})]},s.name)),!w&&(0,t.jsxs)("div",{className:"flex gap-2 text-xs text-foreground-light px-3 py-2",children:[(0,t.jsx)("div",{className:"mt-0.5",children:(0,t.jsx)(eI.InfoIcon,{})}),(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsxs)("p",{children:[C?"New":"Recently restored"," projects can take up to"," ",5," minutes to become fully operational."]}),(0,t.jsxs)("p",{children:["If services stay unhealthy, refer to our"," ",(0,t.jsx)(L.InlineLink,{href:`${B.DOCS_URL}/guides/troubleshooting/project-status-reports-unhealthy-services`,children:"docs"})," ","for more information."]})]})]})]})]})},tp=()=>{let{ref:e}=(0,i.useParams)(),{data:a}=(0,ei.useSelectedProjectQuery)(),{data:l,isPending:n}=(0,eC.useBranchesQuery)({projectRef:a?.parent_project_ref??a?.ref}),o=a?.parent_project_ref===void 0,c=(0,r.useMemo)(()=>(l??[]).find(t=>t.project_ref===e),[l,e]),d=(0,r.useMemo)(()=>{let e=(l??[]).filter(e=>!e.is_default);if(0!==e.length)return e.slice().sort((e,t)=>new Date(t.created_at??t.updated_at).valueOf()-new Date(e.created_at??e.updated_at).valueOf())[0]},[l]),{data:u,isPending:h}=(0,tc.useMigrationsQuery)({projectRef:a?.ref,connectionString:a?.connectionString}),m=(0,r.useMemo)(()=>(u??[])[0],[u]),{data:p,isPending:x}=(0,to.useBackupsQuery)({projectRef:a?.ref}),f=(0,r.useMemo)(()=>{let e=p?.backups??[];if(0!==e.length)return e.slice().sort((e,t)=>new Date(t.inserted_at).valueOf()-new Date(e.inserted_at).valueOf())[0]},[p]),[g,j]=(0,r.useMemo)(()=>{let e=m?.version,t=(0,td.parseMigrationVersion)(e);return t?[t.fromNow(),t.toISOString()]:[void 0,void 0]},[m]),b=g&&j,y=u&&u.length>0?"Unknown":"No migrations";return(0,t.jsx)("div",{className:"@container",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 @md:grid-cols-2 gap-2 @md:gap-6 flex-wrap",children:[(0,t.jsx)(tm,{}),(0,t.jsx)(tn,{href:`/project/${e}/database/migrations`,icon:(0,t.jsx)(tr.Database,{size:18,strokeWidth:1.5,className:"text-foreground"}),label:(0,t.jsx)("span",{children:"Last migration"}),trackingProperties:{stat_type:"migrations",stat_value:u?.length??0},value:h?(0,t.jsx)(tu.Skeleton,{className:"h-6 w-24"}):b?(0,t.jsx)(th.TimestampInfo,{className:"text-base",label:g,utcTimestamp:j}):(0,t.jsx)("p",{className:"text-foreground-lighter",children:y})}),(0,t.jsx)(tn,{href:`/project/${e}/database/backups/scheduled`,icon:(0,t.jsx)(ta.Archive,{size:18,strokeWidth:1.5,className:"text-foreground"}),label:(0,t.jsx)("span",{children:"Last backup"}),trackingProperties:{stat_type:"backups",stat_value:p?.backups?.length??0},value:x?(0,t.jsx)(tu.Skeleton,{className:"h-6 w-24"}):p?.pitr_enabled?(0,t.jsx)("p",{children:"PITR enabled"}):f?(0,t.jsx)(th.TimestampInfo,{className:"text-base",displayAs:"utc",label:(0,s.default)(f.inserted_at).fromNow(),utcTimestamp:f.inserted_at}):(0,t.jsx)("p",{className:"text-foreground-lighter",children:"No backups"})}),(0,t.jsx)(tn,{href:`/project/${e}/branches`,icon:(0,t.jsx)(ti.GitBranch,{size:18,strokeWidth:1.5,className:"text-foreground"}),label:(0,t.jsx)("span",{children:o?"Recent branch":"Branch Created"}),trackingProperties:{stat_type:"branches",stat_value:l?.length??0},value:n?(0,t.jsx)(tu.Skeleton,{className:"h-6 w-24"}):o?(0,t.jsx)("p",{className:(0,W.cn)("truncate",!d&&"text-foreground-lighter truncate"),children:d?.name??"No branches"}):c?.created_at?(0,t.jsx)(th.TimestampInfo,{className:"text-base",label:(0,s.default)(c.created_at).fromNow(),utcTimestamp:c.created_at}):(0,t.jsx)("p",{className:"text-foreground-lighter",children:"Unknown"})})]})})};var tx=e.i(554056);let tf=()=>{let e=(0,ei.useIsOrioleDb)(),{data:s}=(0,ei.useSelectedProjectQuery)(),{data:r}=(0,em.useSelectedOrganizationQuery)(),{data:i}=(0,eZ.useProjectDetailQuery)({ref:s?.parent_project_ref}),{data:l}=(0,eC.useBranchesQuery)({projectRef:s?.parent_project_ref??s?.ref}),n=l?.find(e=>e.is_default),o=l?.find(e=>e.project_ref===s?.ref),c=o?.name===n?.name,d=s?.status===e4.PROJECT_STATUS.INACTIVE,u=o&&!c?o.name:s?.name?s.name:"Welcome to your project";return d?(0,t.jsx)(eF.ProjectPausedState,{}):(0,t.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 py-0 w-full items-center",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"flex flex-row flex-wrap items-center gap-4 w-full",children:[(0,t.jsxs)("div",{children:[!c&&(0,t.jsx)(a.default,{href:`/project/${i?.ref}`,className:"text-sm text-foreground-light",children:i?.name}),(0,t.jsx)("h1",{className:"text-3xl",children:u})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[e&&(0,t.jsxs)(ef.Tooltip,{children:[(0,t.jsx)(ef.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(e6.Badge,{variant:"warning",children:"OrioleDB"})}),(0,t.jsxs)(ef.TooltipContent,{side:"bottom",align:"start",className:"max-w-80 text-center",children:["This project is using Postgres with OrioleDB which is currently in preview and not suitable for production workloads. View our"," ",(0,t.jsx)(L.InlineLink,{href:`${B.DOCS_URL}/guides/database/orioledb`,children:"documentation"})," ","for all limitations."]})]}),(0,t.jsx)(eq.ComputeBadgeWrapper,{projectRef:s?.ref,slug:r?.slug,cloudProvider:s?.cloud_provider,computeSize:s?.infra_compute_size})]})]}),(0,t.jsx)("div",{className:"mt-8",children:(0,t.jsx)(tp,{})})]}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:(0,W.cn)("w-full h-[400px] md:h-[500px] border border-muted rounded-md overflow-hidden flex flex-col relative"),children:(0,t.jsx)(ts.ReactFlowProvider,{children:(0,t.jsx)(tx.InstanceConfiguration,{diagramOnly:!0})})})})]}),(0,t.jsx)(eJ,{})]})};var tg=e.i(167892),tj=e.i(124416),tb=e.i(78023),ty=e.i(967052),tv=e.i(954676);let tN=(0,r.forwardRef)(function({columns:e,children:s,className:a,gap:i=16,showArrows:l=!0,scrollBehavior:n="smooth",...o},c){let d=(0,r.useRef)(null),u=(0,r.useMemo)(()=>Array.isArray(s)?s:[s],[s]),[h,m]=(0,r.useState)(0),p=(e=>{let[t,s]=(0,r.useState)(null);return(0,r.useLayoutEffect)(()=>{let t=e.current;if(!t)return;let a=t.getBoundingClientRect().width;if(s(e=>e===a?e:a),"undefined"!=typeof ResizeObserver){let e=0,a=new ResizeObserver(t=>{let a=t[0]?.contentRect.width??0;e&&cancelAnimationFrame(e),e=requestAnimationFrame(()=>{s(e=>e===a?e:a)})});return a.observe(t),()=>{e&&cancelAnimationFrame(e),a.disconnect()}}{let e=()=>{let e=t.getBoundingClientRect().width;s(t=>t===e?t:e)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}},[e]),t})(d),x=(0,r.useMemo)(()=>(t=>{if(!Array.isArray(e))return e;let[s,a,r]=e;return t>=1024?s:t>=768?a:r})(p??0),[p,e]),f=e=>{let t=d.current;if(!t)return;let s=((p??t.getBoundingClientRect().width)-(x-1)*i)/x+i;m(t=>{let a=Math.max(0,Math.min(b,t+e*s));return a===t?t:a})},g=()=>f(-1),j=()=>f(1),b=(0,r.useMemo)(()=>{if(null==p)return -1;let e=(p-(x-1)*i)/x;return Math.max(0,u.length*e+(u.length-1)*i-p)},[p,x,u.length,i]),y=h>0,v=h<b,N=u.length>x,_=(0,r.useRef)(0),S=(0,r.useRef)(0);return(0,r.useEffect)(()=>{m(e=>{let t=Math.min(e,b);return t===e?e:t})},[b]),(0,t.jsxs)("div",{ref:c,className:(0,W.cn)("relative w-full",a),...o,children:[l&&y&&(0,t.jsx)(F.Button,{type:"default",onClick:g,className:"absolute w-8 h-8 left-0 top-1/2 -translate-y-1/2 z-10 rounded-full p-2","aria-label":"Scroll left",children:(0,t.jsx)(tv.ChevronLeft,{className:"w-4 h-4"})}),l&&v&&N&&(0,t.jsx)(F.Button,{type:"default",onClick:j,className:"absolute w-8 h-8 right-0 top-1/2 -translate-y-1/2 z-10 rounded-full p-2","aria-label":"Scroll right",children:(0,t.jsx)(eS.ChevronRight,{className:"w-4 h-4"})}),(0,t.jsx)("div",{ref:d,className:"w-full overflow-visible focus:outline-none",tabIndex:0,role:"region","aria-roledescription":"carousel","aria-label":"Horizontally scrollable content",style:{overscrollBehaviorX:"contain"},onWheel:e=>{if(0===e.deltaX)return;let t=2*Math.abs(e.deltaX)*(e.deltaX>0?1:-1);S.current+=t,_.current||(_.current=requestAnimationFrame(()=>{_.current=0;let e=S.current;S.current=0,m(t=>{let s=Math.max(0,Math.min(b,t+e));return s===t?t:s})}))},onKeyDown:e=>{"ArrowLeft"===e.key&&y?(e.preventDefault(),g()):"ArrowRight"===e.key&&v&&(e.preventDefault(),j())},children:(0,t.jsx)("div",{className:"flex items-stretch min-w-full transition-transform duration-300 ease-out",style:{gap:`${i}px`,"--column-width":`calc((100% - ${(x-1)*i}px) / ${x})`,transform:`translateX(-${h}px)`,willChange:"transform"},children:u.map((e,s)=>(0,t.jsx)("div",{className:"flex-shrink-0",style:{width:"var(--column-width)"},children:e},s))})})]})});tN.displayName="Row";var t_=e.i(592383);let tS=({showEmptyState:e=!1})=>{let{ref:s}=(0,i.useParams)(),{data:a,isPending:l}=(0,p.useProjectLintsQuery)({projectRef:s},{enabled:!e}),n=(0,ty.useTrack)(),u=(0,f.useAiAssistantStateSnapshot)(),{openSidebar:y}=(0,g.useSidebarManagerSnapshot)(),{setSelectedItem:v}=(0,x.useAdvisorStateSnapshot)(),N=(0,r.useMemo)(()=>a?.filter(e=>e.level===c.LINTER_LEVELS.ERROR)??[],[a]),_=N.length,S=(0,r.useMemo)(()=>{if(0===_)return(0,t.jsx)("h2",{children:"Advisor found no issues"});let e=1===_?"issue":"issues",s=_.toString();return(0,t.jsxs)("h2",{children:["Advisor found ",s," ",e]})},[_]),C=(0,r.useCallback)(()=>{y(h.SIDEBAR_KEYS.AI_ASSISTANT),n("advisor_assistant_button_clicked",{origin:"homepage",issuesCount:_})},[n,y,_]),k=(0,r.useCallback)(e=>{v(e.cache_key,"lint"),y(h.SIDEBAR_KEYS.ADVISOR_PANEL),n("advisor_detail_opened",{origin:"homepage",advisorSource:"lint",advisorCategory:e.categories[0],advisorType:e.name,advisorLevel:e.level})},[n,v,y]);return e?(0,t.jsx)(tw,{}):(0,t.jsxs)("div",{children:[l?(0,t.jsx)(w.ShimmeringLoader,{className:"w-96 mb-6"}):(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[S,(0,t.jsx)(F.Button,{type:"default",icon:(0,t.jsx)(j.AiIconAnimation,{}),onClick:C,children:"Ask Assistant"})]}),l?(0,t.jsxs)("div",{className:"flex flex-col p-4 gap-2",children:[(0,t.jsx)(w.ShimmeringLoader,{}),(0,t.jsx)(w.ShimmeringLoader,{className:"w-3/4"}),(0,t.jsx)(w.ShimmeringLoader,{className:"w-1/2"})]}):N.length>0?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(tN,{columns:[3,2,1],children:N.map(e=>(0,t.jsxs)(b.Card,{className:"min-h-full flex flex-col items-stretch cursor-pointer h-64",onClick:()=>{k(e)},children:[(0,t.jsxs)(b.CardHeader,{className:"border-b-0 shrink-0 flex flex-row gap-2 space-y-0 justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-3",children:["SECURITY"===e.categories[0]?(0,t.jsx)(o.Shield,{size:16,strokeWidth:1.5,className:"text-foreground-muted"}):(0,t.jsx)(tb.BarChart,{size:16,strokeWidth:1.5,className:"text-foreground-muted"}),(0,t.jsx)(b.CardTitle,{className:"text-foreground-light",children:e.categories[0]})]}),(0,t.jsx)(m.ButtonTooltip,{type:"text",className:"w-7 h-7",icon:(0,t.jsx)(j.AiIconAnimation,{size:16}),onClick:t=>{t.stopPropagation(),t.preventDefault(),y(h.SIDEBAR_KEYS.AI_ASSISTANT),u.newChat({name:"Summarize lint",initialInput:(0,d.createLintSummaryPrompt)(e)}),n("advisor_assistant_button_clicked",{origin:"homepage",advisorCategory:e.categories[0],advisorType:e.name,advisorLevel:e.level})},tooltip:{content:{side:"bottom",text:"Help me fix this issue"}}})]}),(0,t.jsxs)(b.CardContent,{className:"p-6 pt-16 flex flex-col justify-end flex-1 overflow-auto",children:[(0,t.jsx)("h3",{className:"mb-1",children:e.title}),(0,t.jsx)(t_.Markdown,{className:"leading-6 text-sm text-foreground-light",children:e.detail&&e.detail.replace(/\\`/g,"`")})]})]},e.cache_key))})}):(0,t.jsx)(tw,{})]})};function tw(){return(0,t.jsx)(b.Card,{className:"bg-transparent h-64",children:(0,t.jsxs)(b.CardContent,{className:"flex flex-col items-center justify-center gap-2 p-16 h-full",children:[(0,t.jsx)(o.Shield,{size:20,strokeWidth:1.5,className:"text-foreground-muted"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light text-center",children:"No security or performance errors found"})]})})}var tC=e.i(479232),tk=e.i(61187),tA=e.i(355901),tT=e.i(202584),tE=e.i(201844),tI=e.i(669653),tL=e.i(364850),tR=e.i(866205),tP=e.i(917007),tD=e.i(920432),tM=e.i(549815),tU=e.i(911509),tO=e.i(396831);let tz=({projectRef:e,trigger:s,side:i="bottom",align:l="end",className:n,autoFocus:o=!1,onSelect:c})=>{let d=(0,ec.useRouter)(),u=(0,r.useRef)(null),[h,m]=(0,r.useState)(!1),[p,x]=(0,r.useState)(""),f=(0,tT.useDebounce)(p,500),{data:g,isPending:j,hasNextPage:b,fetchNextPage:y,isFetchingNextPage:v}=(0,tI.useContentInfiniteQuery)({projectRef:e,type:"sql",limit:tL.SNIPPET_PAGE_LIMIT,name:0===p.length?p:f},{placeholderData:tE.keepPreviousData}),N=(0,r.useMemo)(()=>g?.pages.flatMap(e=>e.content)??[],[g?.pages]),[_,S]=(0,tT.useIntersectionObserver)({root:u.current,threshold:0,rootMargin:"0px"});return(0,r.useEffect)(()=>{S?.isIntersecting&&b&&!v&&!j&&y()},[S?.isIntersecting,b,v,j,y]),(0,t.jsxs)(ep.DropdownMenu,{open:h,onOpenChange:m,children:[(0,t.jsx)(ep.DropdownMenuTrigger,{asChild:!0,children:s}),(0,t.jsx)(ep.DropdownMenuContent,{side:i,align:l,className:["w-80 p-0",n].filter(Boolean).join(" "),children:(0,t.jsxs)(tR.Command_Shadcn_,{shouldFilter:!1,children:[(0,t.jsx)(tD.CommandInput_Shadcn_,{showResetIcon:!0,autoFocus:o,placeholder:"Search snippets...",value:p,onValueChange:x,handleReset:()=>x("")}),(0,t.jsxs)(tU.CommandList_Shadcn_,{ref:u,children:[j?(0,t.jsx)("p",{className:"text-xs text-center text-foreground-lighter py-3",children:"Loading..."}):p.length>0&&0===N.length?(0,t.jsx)("p",{className:"text-xs text-center text-foreground-lighter py-3",children:"No snippets found"}):(0,t.jsx)(tP.CommandGroup_Shadcn_,{children:(0,t.jsxs)(tO.ScrollArea,{className:N.length>7?"h-[210px]":"",children:[N.map(e=>(0,t.jsx)(tM.CommandItem_Shadcn_,{value:e.id,onSelect:()=>c({id:e.id,name:e.name}),children:e.name},e.id)),(0,t.jsx)("div",{ref:_,className:"h-1 -mt-1"}),b&&(0,t.jsx)("div",{className:"px-2 py-1",children:(0,t.jsx)(w.ShimmeringLoader,{className:"py-2"})})]})}),(0,t.jsx)("div",{className:"h-px bg-border-overlay -mx-1"}),(0,t.jsx)(tP.CommandGroup_Shadcn_,{children:(0,t.jsx)(tM.CommandItem_Shadcn_,{className:"cursor-pointer w-full",onSelect:()=>{m(!1),d.push(`/project/${e}/sql/new`)},onClick:()=>m(!1),children:(0,t.jsxs)(a.default,{href:`/project/${e}/sql/new`,onClick:()=>{m(!1)},className:"w-full flex items-center gap-2",children:[(0,t.jsx)(tC.Plus,{size:14,strokeWidth:1.5}),(0,t.jsx)("p",{children:"Create a report block with SQL"})]})})})]})]})})]})};var t$=e.i(238411),tH=e.i(888738),tB=e.i(344616),tF=e.i(356003),tq=e.i(420985),tW=e.i(2579),tQ=e.i(48189),tG=e.i(432478),tY=e.i(189329);function tV(){let e,a=(0,s.default)().subtract(7,"day").toISOString(),l=(0,s.default)().toISOString(),{ref:n}=(0,i.useParams)(),{profile:o}=(0,tG.useProfile)(),c=(0,tY.useDatabaseSelectorStateSnapshot)(),{data:d}=(0,em.useSelectedOrganizationQuery)(),{mutate:u}=(0,tl.useSendEventMutation)(),{invalidateInfraMonitoringQuery:h}=(e=(0,tF.useQueryClient)(),{invalidateInfraMonitoringQuery:(t,{attribute:s,startDate:a,endDate:r,interval:i,databaseIdentifier:l})=>{e.invalidateQueries({queryKey:et.analyticsKeys.infraMonitoring(t,{attribute:s,startDate:a,endDate:r,interval:i,databaseIdentifier:l})})}}),{data:p}=(0,ei.useSelectedProjectQuery)(),[x,f]=(0,r.useState)(!1),{data:g}=(0,tI.useContentInfiniteQuery)({projectRef:n,type:"report",name:"Home",limit:1},{placeholderData:tE.keepPreviousData}),j=g?.pages?.[0]?.content?.[0],b=j?.content,[y,v]=(0,r.useState)(b),[N,_]=(0,r.useState)(!1),{can:S}=(0,tW.useAsyncCheckPermissions)(eG.PermissionAction.CREATE,"user_content",{resource:{type:"report",owner_id:o?.id},subject:{id:o?.id}}),{can:w}=(0,tW.useAsyncCheckPermissions)(eG.PermissionAction.UPDATE,"user_content",{resource:{type:"report",visibility:j?.visibility,owner_id:j?.owner_id},subject:{id:o?.id}}),{mutate:C}=(0,tq.useContentUpsertMutation)(),k=(0,r.useCallback)(e=>{n&&j&&C({projectRef:n,payload:{...j,content:e}})},[j,n,C]),A=(0,e8.useSensors)((0,e8.useSensor)(e8.PointerSensor,{activationConstraint:{distance:8}})),T=(0,r.useCallback)(e=>e.map((e,t)=>({...e,x:t%2,y:Math.floor(t/2),w:1,h:1})),[]),E=(0,r.useCallback)(e=>{let{active:t,over:s}=e;if(!y||!t||!s||t.id===s.id)return;let a=y.layout.map(e=>String(e.id)),r=a.indexOf(String(t.id)),i=a.indexOf(String(s.id));if(-1===r||-1===i)return;let l=T((0,e7.arrayMove)(y.layout,r,i)),n={...y,layout:l};v(n),k(n)},[y,k,T]),I=(0,r.useCallback)(e=>{let t=new Set(e.map(e=>`${e.y}-${e.x}`)),s=0;for(;;s++){let e=t.has(`${s}-0`),a=t.has(`${s}-1`);if(!e||!a)return{x:+!!e,y:s}}},[]),L=(0,r.useCallback)((e,t)=>({x:t.x,y:t.y,w:1,h:1,id:e.id,label:e.name,attribute:`snippet_${e.id}`,provider:"daily-stats",chart_type:"bar",chartConfig:tB.DEFAULT_CHART_CONFIG}),[]),R=(0,r.useCallback)(e=>{if(y?.layout?.some(t=>String(t.id)===String(e.id)||String(t.attribute)===`snippet_${e.id}`))return void(0,tA.toast)("This block is already in your report");if(!y||!j){if(!n||!o)return;let t={schema_version:1,period_start:{time_period:"7d",date:""},period_end:{time_period:"today",date:""},interval:"1d",layout:[L(e,{x:0,y:0})]};v(t),C({projectRef:n,payload:{id:(0,tQ.uuidv4)(),type:"report",name:"Home",description:"",visibility:"project",owner_id:o.id,content:t}}),n&&d?.slug&&u({action:"home_custom_report_block_added",properties:{block_id:e.id,position:0},groups:{project:n,organization:d.slug}});return}let t=[...y.layout],{x:s,y:a}=I(t);t.push(L(e,{x:s,y:a}));let r={...y,layout:t};v(r),k(r),n&&d?.slug&&u({action:"home_custom_report_block_added",properties:{block_id:e.id,position:t.length-1},groups:{project:n,organization:d.slug}})},[y,j,n,o,C,d,u,I,L,k]),P=({metric:e})=>{if(!y)return;let t=y.layout.find(t=>t.attribute===e.key),s=y.layout.filter(t=>t.attribute!==e.key),a={...y,layout:s};v(a),k(a),n&&d?.slug&&t&&u({action:"home_custom_report_block_removed",properties:{block_id:String(t.id)},groups:{project:n,organization:d.slug}})},D=(0,r.useCallback)(async e=>{if(e.preventDefault(),_(!1),!n||!o||!p)return;let t=e.dataTransfer.getData("application/json");if(!t)return;let{label:s,sql:a}=JSON.parse(t);if(!s||!a)return;let r=tA.toast.loading(`Creating new query: ${s}`),i=(0,tH.createSqlSnippetSkeletonV2)({name:s,sql:a,owner_id:o.id,project_id:p.id});C({projectRef:n,payload:i}),tA.toast.success(`Successfully created new query: ${s}`,{id:r}),R({id:i.id,name:s}),u({action:"custom_report_assistant_sql_block_added",groups:{project:n,organization:d?.slug??"Unknown"}})},[n,o,p,C,R,u,d]),M=e=>{_(!0),e.preventDefault()},U=()=>{_(!1)},O=(0,r.useMemo)(()=>y?.layout??[],[y]);return(0,r.useEffect)(()=>{b&&v(b)},[b]),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"heading-section",children:"Reports"}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[O.length>0&&(0,t.jsx)(m.ButtonTooltip,{type:"default",icon:(0,t.jsx)(tk.RefreshCw,{className:x?"animate-spin":""}),className:"w-7",disabled:x,tooltip:{content:{side:"bottom",text:"Refresh report"}},onClick:()=>{if(!n)return;f(!0);let e=y?.layout.filter(e=>"infra-monitoring"===e.provider||"daily-stats"===e.provider);e?.forEach(e=>{h(n,{attribute:e.attribute,startDate:a,endDate:l,interval:y?.interval||"1d",databaseIdentifier:c.selectedDatabaseId})}),setTimeout(()=>f(!1),1e3)}}),w||S?(0,t.jsx)(tz,{projectRef:n,onSelect:R,trigger:(0,t.jsx)(F.Button,{type:"default",icon:(0,t.jsx)(tC.Plus,{}),children:"Add block"}),side:"bottom",align:"end",autoFocus:!0}):null]})]}),(0,t.jsxs)("div",{className:"relative",children:[N&&(0,t.jsx)("div",{className:"absolute inset-0 rounded bg-brand/10 pointer-events-none z-10"}),0===O.length?(0,t.jsxs)("div",{className:"h-64 flex flex-col items-center justify-center rounded border-2 border-dashed p-16 transition-colors",onDrop:D,onDragOver:M,onDragLeave:U,children:[(0,t.jsx)("h4",{children:"Build a custom report"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light mb-4",children:"Keep track of your most important metrics"}),w||S?(0,t.jsx)(tz,{projectRef:n,onSelect:R,trigger:(0,t.jsx)(F.Button,{type:"default",iconRight:(0,t.jsx)(tC.Plus,{size:14}),children:"Add your first block"}),side:"bottom",align:"center",autoFocus:!0}):(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"No charts set up yet in report"})]}):(0,t.jsx)(e8.DndContext,{sensors:A,collisionDetection:e8.closestCenter,onDragStart:()=>{},onDragEnd:E,children:(0,t.jsx)(e7.SortableContext,{items:(y?.layout??[]).map(e=>String(e.id)),strategy:e7.rectSortingStrategy,children:(0,t.jsx)(tN,{columns:[3,2,1],onDrop:D,onDragOver:M,onDragLeave:U,children:O.map(e=>(0,t.jsx)(tK,{id:String(e.id),children:(0,t.jsx)("div",{className:"h-64",children:(0,t.jsx)(t$.ReportBlock,{item:e,startDate:a,endDate:l,interval:y?.interval??"1d",disableUpdate:!1,isRefreshing:x,onRemoveChart:P,onUpdateChart:t=>((e,{chart:t,chartConfig:s})=>{if(!y)return;let a=y.layout.find(t=>t.id===e);if(!a)return;let r={...a,...t??{}};s&&(r.chartConfig={...a.chartConfig??{},...s});let i=y.layout.map(t=>t.id===e?r:t),l={...y,layout:i};v(l),k(l)})(e.id,t)},e.id)})},e.id))})})})]})]})}function tK({id:e,children:s}){let{attributes:a,listeners:r,setNodeRef:i,transform:l,transition:n,isDragging:o}=(0,e7.useSortable)({id:e}),c={transform:l?`translate3d(${Math.round(l.x)}px, ${Math.round(l.y)}px, 0)`:void 0,transition:n};return(0,t.jsx)("div",{ref:i,style:c,className:o?"opacity-70 will-change-transform":"will-change-transform",...a,...r??{},children:s})}var tJ=e.i(454370),tX=e.i(219195),tZ=e.i(736025),t0=e.i(666555),t1=e.i(703526),t2=e.i(881685),t4=e.i(370410),t5=e.i(882087);let t6=({value:e,onChange:s,items:a,className:i})=>{let[l,n]=(0,r.useState)(!1),o=a.find(t=>t.key===e);return(0,t.jsxs)(eP.Popover_Shadcn_,{open:l,onOpenChange:n,modal:!1,children:[(0,t.jsx)("div",{className:(0,W.cn)("flex",i),children:(0,t.jsx)(eR.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsx)(F.Button,{size:"tiny",type:"default",className:"gap-0",iconRight:(0,t.jsx)(eo.ChevronDown,{strokeWidth:1.5}),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[o?.icon?(0,t.jsx)(t5.ConnectionIcon,{icon:o.icon}):(0,t.jsx)(t2.Box,{size:12}),o?.label]})})})}),(0,t.jsx)(eL.PopoverContent_Shadcn_,{className:"p-0 max-w-48",side:"bottom",align:"start",portal:!0,onOpenAutoFocus:e=>e.preventDefault(),children:(0,t.jsxs)(tR.Command_Shadcn_,{children:[(0,t.jsx)(tD.CommandInput_Shadcn_,{placeholder:"Search..."}),(0,t.jsxs)(tU.CommandList_Shadcn_,{children:[(0,t.jsx)(t1.CommandEmpty_Shadcn_,{children:"No results found."}),(0,t.jsx)(tP.CommandGroup_Shadcn_,{children:a.map(a=>(0,t.jsxs)(tM.CommandItem_Shadcn_,{value:a.key,onSelect:()=>{s(a.key),n(!1)},className:"flex gap-2 items-center",children:[a.icon?(0,t.jsx)(t5.ConnectionIcon,{icon:a.icon}):(0,t.jsx)(t2.Box,{size:12}),a.label,(0,t.jsx)(t4.Check,{size:15,className:(0,W.cn)("ml-auto",a.key===e?"opacity-100":"opacity-0")})]},a.key))})]})]})})]})};var t3=e.i(405554),t8=e.i(795019);function t7({steps:e,onStepClick:s}){let i=e.length>0&&e.every(e=>"complete"===e.status),[l,n]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(0===e.length)return void n(null);if(!(l&&e.some(e=>e.key===l)))if(i)n(null);else{let t=e.find(e=>"complete"!==e.status);n(t?.key??e[0]?.key??null)}},[e,i,l]);let o=l?e.find(e=>e.key===l):null,c=o?e.findIndex(e=>e.key===o.key):-1,d=c>0?e[c-1]:null,u=c>-1&&c<e.length-1?e[c+1]:null,h=i&&!o;return(0,t.jsx)(b.Card,{className:"overflow-hidden @container",children:(0,t.jsxs)("div",{className:"flex flex-col @2xl:flex-row",children:[(0,t.jsx)("aside",{className:"hidden border-r @2xl:block @2xl:w-[calc(1/3*100%-16px)]",children:(0,t.jsx)("ol",{children:e.map((e,s)=>{let a=!!o&&e.key===o.key,r="complete"===e.status;return(0,t.jsx)("li",{className:"border-b last:border-b-0 truncate",children:(0,t.jsx)(F.Button,{type:"text",onClick:()=>n(e.key),className:(0,W.cn)("pl-1 block justify-start w-full rounded-none h-auto text-left text-foreground-light",a&&"bg-muted text-foreground"),children:(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm w-full",children:[(0,t.jsx)("span",{className:(0,W.cn)("text-xs shrink-0 font-mono text-foreground-light w-7 h-7 bg border flex items-center justify-center rounded-md"),children:r?(0,t.jsx)(t4.Check,{size:16,strokeWidth:1.5,className:"text-brand-link"}):s+1}),(0,t.jsx)("span",{className:(0,W.cn)("flex-1 block truncate",a?"text-foreground":"group-hover:text-foreground",r&&"line-through"),children:e.title}),(0,t.jsx)(eS.ChevronRight,{size:16,strokeWidth:1.5,className:"text-foreground-lighter"})]})})},e.key)})})}),(0,t.jsx)(b.CardContent,{className:"flex flex-1 flex-col gap-0 p-0 overflow-y-auto border-b-0",children:h?(0,t.jsx)("div",{className:"relative w-full flex-1 min-h-[100px] shrink-0 overflow-hidden bg-200 flex flex-col justify-end",children:(0,t.jsxs)("div",{className:"p-10",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-md bg-brand/15 flex items-center justify-center shrink-0 mb-4",children:(0,t.jsx)(t4.Check,{size:16,strokeWidth:1.5,className:"text-brand-link"})}),(0,t.jsx)("div",{className:"flex flex-row items-center gap-4 mb-1",children:(0,t.jsx)("h3",{children:"All steps complete"})}),(0,t.jsx)("p",{className:"text-foreground-light max-w-prose mb-4 text-balance",children:"Drop into our Discord community to share your progress and learn from fellow developers."}),(0,t.jsx)(F.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(t8.IconDiscord,{size:14}),className:"text-foreground-light hover:text-foreground",children:(0,t.jsx)(a.default,{href:"https://discord.supabase.com/",target:"_blank",children:"Join our Discord"})})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 border-b px-2 py-2 @2xl:hidden",children:[(0,t.jsx)("span",{className:"text-xs shrink-0 font-mono text-foreground-light w-7 h-7 bg border flex items-center justify-center rounded-md",children:c+1}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(F.Button,{type:"outline",onClick:()=>{d&&n(d.key)},disabled:!d,className:"gap-2","aria-label":"Previous step",children:(0,t.jsx)(tv.ChevronLeft,{size:16,strokeWidth:1.5})}),(0,t.jsx)(F.Button,{type:"outline",onClick:()=>{u&&n(u.key)},disabled:!u,className:"gap-2","aria-label":"Next step",children:(0,t.jsx)(eS.ChevronRight,{size:16,strokeWidth:1.5})})]})]}),(0,t.jsxs)("div",{className:"relative w-full flex-1 min-h-[100px] shrink-0 overflow-hidden",children:[o?.image?(0,t.jsx)(t3.default,{className:"w-full select-none invert dark:invert-0",src:o.image,fill:!0,objectFit:"cover",objectPosition:"top",alt:o.title}):(0,t.jsxs)("div",{className:"absolute top-0 left-0 right-0 overflow-hidden",children:[(0,t.jsx)("img",{src:`${B.BASE_PATH}/img/reports/bg-grafana-dark.svg`,alt:"Supabase Grafana",className:"w-full h-full object-cover object-right hidden dark:block user-select-none"}),(0,t.jsx)("img",{src:`${B.BASE_PATH}/img/reports/bg-grafana-light.svg`,alt:"Supabase Grafana",className:"w-full h-full object-cover object-right dark:hidden user-select-none"})]}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-background-surface-100 to-transparent"})]}),(0,t.jsx)("div",{className:"p-10",children:o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-4 mb-1",children:[(0,t.jsx)("h3",{children:o.title}),(0,t.jsx)(e6.Badge,{variant:"complete"===o.status?"success":"default",className:"capitalize hidden @2xl:inline-flex",children:o.status})]}),(0,t.jsx)("p",{className:"text-foreground-light max-w-prose mb-4 text-balance",children:o.description}),(0,t.jsx)("div",{className:"mt-auto flex flex-wrap gap-2 pt-2",children:o.actions.map((e,r)=>{if(e.component)return(0,t.jsx)("div",{children:e.component},`${o.key}-action-${r}`);let i=e.label?.toLowerCase().includes("do it for me")||e.label?.toLowerCase().includes("generate")||e.label?.toLowerCase().includes("create policies for me")?"ai_assist":e.href&&!e.href.startsWith("/project/")?"external_link":"primary";return e.href?(0,t.jsx)(F.Button,{asChild:!0,type:e.variant??"default",icon:e.icon,className:"text-foreground-light hover:text-foreground",children:(0,t.jsx)(a.default,{href:e.href,onClick:()=>{s({stepIndex:c,stepTitle:o.title,actionType:i,wasCompleted:"complete"===o.status})},children:e.label})},`${o.key}-action-${r}`):(0,t.jsx)(F.Button,{type:e.variant??"default",icon:e.icon,onClick:()=>{e.onClick?.(),s({stepIndex:c,stepTitle:o.title,actionType:i,wasCompleted:"complete"===o.status})},className:"text-foreground-light hover:text-foreground",children:e.label},`${o.key}-action-${r}`)})})]})})]})})]})})}let t9=(0,e.i(388019).default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var se=e.i(495486),st=e.i(194213),ss=e.i(432639),sa=e.i(672044);let sr=tZ.FRAMEWORKS[0]?.key??"nextjs";var si=e.i(14703),sl=e.i(360608),sn=e.i(302372),so=e.i(148210);function sc({value:e,onChange:s}){let a=(0,ec.useRouter)(),{ref:l}=(0,i.useParams)(),{data:n}=(0,ei.useSelectedProjectQuery)(),{data:c}=(0,em.useSelectedOrganizationQuery)(),{mutate:d}=(0,tl.useSendEventMutation)(),u=(0,f.useAiAssistantStateSnapshot)(),{openSidebar:m}=(0,g.useSidebarManagerSnapshot)(),[p,x]=(0,r.useState)(sr),y="code"===e||"no-code"===e?e:null,[v,N]=(0,r.useState)(null),_=(()=>{let{data:e}=(0,ei.useSelectedProjectQuery)(),{data:t}=(0,em.useSelectedOrganizationQuery)(),s=e?.ref,a=e?.connectionString,i=e?.status===e4.PROJECT_STATUS.ACTIVE_HEALTHY,{data:l}=(0,e1.useTablesQuery)({projectRef:s,connectionString:a,schema:"public"},{enabled:!!s&&i}),{data:n}=(0,e1.useTablesQuery)({projectRef:s,connectionString:a,schema:"storage"},{enabled:!!s&&i}),{data:o}=(0,sn.useDatabasePoliciesQuery)({projectRef:s,connectionString:a,schema:"public"},{enabled:!!s&&!!a&&i}),{data:c}=(0,si.useAuthConfigQuery)({projectRef:s},{enabled:!!s&&i}),{data:d}=(0,sl.useUsersCountQuery)({projectRef:s,connectionString:a},{enabled:!!s&&!!a&&i}),{data:u}=(0,eX.useEdgeFunctionsQuery)({projectRef:s},{enabled:!!s&&i}),{data:h}=(0,tI.useContentInfiniteQuery)({projectRef:s,type:"report",limit:1},{enabled:!!s&&i}),{data:m}=(0,tc.useMigrationsQuery)({projectRef:s,connectionString:a},{enabled:!!s&&!!a&&i}),{data:p}=er({projectRef:s,interval:"1day"},{enabled:!!s&&i}),{data:x}=(0,so.useGitHubConnectionsQuery)({organizationId:t?.id},{enabled:!!s&&!!t?.id});return(0,r.useMemo)(()=>{let e=(l?.length??0)>0,t=(m?.length??0)>0,a=(l??[]).some(e=>Number(e?.live_rows_estimate??0)>0),r=(o?.length??0)>0;c&&c.DISABLE_SIGNUP,c?.EXTERNAL_EMAIL_ENABLED;let i=!!d&&!d.is_estimate&&d.count>0,f=(n??[]).some(e=>"objects"===e.name&&Number(e?.live_rows_estimate??0)>0),g=(u?.length??0)>0,j=(h?.pages?.[0]?.content?.length??0)>0,b=x?.some(e=>e.project.ref===s)??!1;return{hasTables:e,hasCliSetup:t,hasSampleData:a,hasRlsPolicies:r,hasAppConnected:p?.result?.some(e=>[e.total_auth_requests,e.total_storage_requests,e.total_rest_requests,e.total_realtime_requests].some(e=>(e??0)>0))??!1,hasFirstUser:i,hasStorageObjects:f,hasEdgeFunctions:g,hasReports:j,hasGitHubConnection:b}},[c,u,x,m,o,h,n,l,p,d,s])})(),S=(0,r.useCallback)((e,t)=>{m(h.SIDEBAR_KEYS.AI_ASSISTANT),u.newChat({name:e,initialInput:t})},[u,m]),w=(0,r.useMemo)(()=>{let e,t,s=a.asPath.split("?")[0],r=tZ.FRAMEWORKS.find(e=>e.key===p);if(!r)return[{label:"Connect",href:`${s}?showConnect=true&connectTab=frameworks`}];if(r.children&&r.children.length>0)if("nextjs"===r.key){let s=r.children.find(e=>"app"===e.key)||r.children[0];e=s?.key,t=s?.children?.[0]?.key}else e=r.children[0]?.key,t=r.children[0]?.children?.[0]?.key;let i=new URLSearchParams({showConnect:"true",connectTab:"frameworks",framework:r.key});return e&&i.set("using",e),t&&i.set("with",t),[{label:"Connect",href:`${s}?${i.toString()}`}]},[a.asPath,p]),C=(0,r.useMemo)(()=>[{label:"Framework selector",component:(0,t.jsx)(t6,{value:p,onChange:x,items:tZ.FRAMEWORKS})},...w.map(e=>({label:"Connect",href:e.href,variant:"primary"}))],[w,p]),k=(0,r.useMemo)(()=>(({ref:e,openAiChat:s,connectActions:a,statuses:r})=>{let{hasTables:i,hasCliSetup:l,hasSampleData:n,hasRlsPolicies:c,hasAppConnected:d,hasFirstUser:u,hasStorageObjects:h,hasEdgeFunctions:m,hasReports:p,hasGitHubConnection:x}=r;return[{key:"install-cli",status:l?"complete":"incomplete",title:"Install the Supabase CLI",icon:(0,t.jsx)(tJ.Code,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"To get started, install the Supabase CLI—our command-line toolkit for managing projects locally, handling migrations, and seeding data—using the npm command below to add it to your workspace.",actions:[{label:"Install via npm",component:(0,t.jsx)(sa.CodeBlock,{className:"w-full text-xs p-3 !bg",language:"bash",children:"npm install supabase --save-dev"})}]},{key:"design-db",status:i?"complete":"incomplete",title:"Design your database schema",icon:(0,t.jsx)(tr.Database,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Next, create a schema file that defines the structure of your database, either following our declarative schema guide or asking the AI assistant to generate one for you.",actions:[{label:"Create schema file",href:`${B.DOCS_URL}/guides/local-development/declarative-database-schemas`,variant:"default"},{label:"Generate it",variant:"default",icon:(0,t.jsx)(j.AiIconAnimation,{size:14}),onClick:()=>s("Design my database","Help me create a schema file for my database. We will be using Supabase declarative schemas which you can learn about by searching docs for declarative schema.")}]},{key:"add-data",status:n?"complete":"incomplete",title:"Seed your database with data",icon:(0,t.jsx)(se.Table,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Now, create a seed file to populate your database with initial data, using the docs for guidance or letting the AI assistant draft realistic inserts.",actions:[{label:"Create a seed file",href:`${B.DOCS_URL}/guides/local-development/seeding-your-database`,variant:"default"},{label:"Generate data",variant:"default",icon:(0,t.jsx)(j.AiIconAnimation,{size:14}),onClick:()=>s("Generate seed data","Generate SQL INSERT statements for realistic seed data that I can run via the Supabase CLI.")}]},{key:"add-rls-policies",status:c?"complete":"incomplete",title:"Secure your data with RLS policies",icon:(0,t.jsx)(o.Shield,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Let's secure your data by enabling Row Level Security (per-row access rules that decide who can read or write specific records) and defining policies in a migration file, either configuring them manually or letting the AI assistant draft policies for your tables.",actions:[{label:"Create a migration file",href:`/project/${e}/auth/policies`,variant:"default"},{label:"Create policies for me",variant:"default",icon:(0,t.jsx)(j.AiIconAnimation,{size:14}),onClick:()=>s("Generate RLS policies","Generate RLS policies for my existing tables in the public schema and guide me through the process of adding them as migration files to my codebase ")}]},{key:"connect-app",status:d?"complete":"incomplete",title:"Connect your application",icon:(0,t.jsx)(tJ.Code,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Your project is ready; use the framework selector to preview starter code and launch the Connect flow with the client library you prefer.",actions:a},{key:"signup-first-user",status:u?"complete":"incomplete",title:"Sign up your first user",icon:(0,t.jsx)(ss.UserPlus,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Test your authentication setup by creating the first user account, following the docs if you need a step-by-step walkthrough.",actions:[{label:"Read docs",href:`${B.DOCS_URL}/guides/auth`,variant:"default"}]},{key:"upload-file",status:h?"complete":"incomplete",title:"Upload a file",icon:(0,t.jsx)(st.Upload,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Integrate file storage by creating a bucket via SQL and uploading a file using our client libraries.",actions:[{label:"Create a bucket via SQL",href:`${B.DOCS_URL}/guides/storage/buckets/creating-buckets?queryGroups=language&language=sql`,variant:"default"},{label:"Upload a file",href:`${B.DOCS_URL}/guides/storage/uploads/standard-uploads`,variant:"default"}]},{key:"create-edge-function",status:m?"complete":"incomplete",title:"Deploy an Edge Function",icon:(0,t.jsx)(tJ.Code,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Add server-side logic by creating and deploying your first Edge Function—a lightweight TypeScript or JavaScript function that runs close to your users—then revisit the list to monitor and iterate on it.",actions:[{label:"Create and deploy via CLI",href:`${B.DOCS_URL}/guides/functions/quickstart`,variant:"default"},{label:"View functions",href:`/project/${e}/functions`,variant:"default"}]},{key:"monitor-progress",status:p?"complete":"incomplete",title:"Monitor your project's usage",icon:(0,t.jsx)(t9,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Track your project's activity by creating custom reports for API, database, and auth events right from the reports dashboard.",actions:[{label:"Reports",href:`/project/${e}/reports`,variant:"default"}]},{key:"connect-github",status:x?"complete":"incomplete",title:"Connect to GitHub",icon:(0,t.jsx)(ti.GitBranch,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Link this project to a GitHub repository to keep production in sync and spin up preview branches from pull requests.",actions:[{label:"Connect to GitHub",href:`/project/${e}/settings/integrations`,variant:"default"}]}]})({ref:l,openAiChat:S,connectActions:C,statuses:_}),[C,S,l,_]),A=(0,r.useMemo)(()=>(({ref:e,openAiChat:s,connectActions:a,statuses:r})=>{let{hasTables:i,hasSampleData:l,hasRlsPolicies:n,hasAppConnected:c,hasFirstUser:d,hasStorageObjects:u,hasEdgeFunctions:h,hasReports:m,hasGitHubConnection:p}=r;return[{key:"design-db",status:i?"complete":"incomplete",title:"Create your first table",icon:(0,t.jsx)(tr.Database,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"To kick off your new project, let's start by creating your very first database table using either the table editor or the AI assistant to shape the structure for you.",actions:[{label:"Create a table",href:`/project/${e}/editor`,variant:"default"},{label:"Do it for me",variant:"default",icon:(0,t.jsx)(j.AiIconAnimation,{size:14}),onClick:()=>s("Design my database","I want to design my database schema. Please propose tables, relationships, and SQL to create them for my app. Ask clarifying questions if needed.")}]},{key:"add-data",status:l?"complete":"incomplete",title:"Add sample data",icon:(0,t.jsx)(se.Table,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Next, let's add some sample data that you can play with once you connect your app, either by inserting rows yourself or letting the AI assistant craft realistic examples.",actions:[{label:"Add data",href:`/project/${e}/editor`,variant:"default"},{label:"Do it for me",variant:"default",icon:(0,t.jsx)(j.AiIconAnimation,{size:14}),onClick:()=>s("Generate sample data","Generate SQL INSERT statements to add realistic sample data to my existing tables. Use safe defaults and avoid overwriting data.")}]},{key:"add-rls-policies",status:n?"complete":"incomplete",title:"Secure your data with Row Level Security",icon:(0,t.jsx)(o.Shield,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Now that you have some data, let's secure it by enabling Row Level Security (row-specific access rules that control who can view or modify records) and creating policies yourself or with help from the AI assistant.",actions:[{label:"Create a policy",href:`/project/${e}/auth/policies`,variant:"default"},{label:"Do it for me",variant:"default",icon:(0,t.jsx)(j.AiIconAnimation,{size:14}),onClick:()=>s("Generate RLS policies","Generate RLS policies for my existing tables in the public schema. ")}]},{key:"connect-app",status:c?"complete":"incomplete",title:"Connect your application",icon:(0,t.jsx)(tJ.Code,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Your project is ready; use the framework selector to preview starter code and launch the Connect flow to wire up your app.",actions:a},{key:"signup-first-user",status:d?"complete":"incomplete",title:"Sign up your first user",icon:(0,t.jsx)(ss.UserPlus,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Test your authentication by signing up your first user, referencing the docs if you need sample flows or troubleshooting tips.",actions:[{label:"Read docs",href:`${B.DOCS_URL}/guides/auth`,variant:"default"}]},{key:"upload-file",status:u?"complete":"incomplete",title:"Upload a file",icon:(0,t.jsx)(st.Upload,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Let's add file storage to your app by creating a bucket and uploading your first file from the buckets dashboard.",actions:[{label:"Buckets",href:`/project/${e}/storage/files`,variant:"default"}]},{key:"create-edge-function",status:h?"complete":"incomplete",title:"Add server-side logic",icon:(0,t.jsx)(tJ.Code,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Extend your app's functionality by creating an Edge Function—a lightweight serverless function that executes close to your users—for server-side logic directly from the functions page.",actions:[{label:"Create a function",href:`/project/${e}/functions/new`,variant:"default"}]},{key:"monitor-progress",status:m?"complete":"incomplete",title:"Monitor your project's health",icon:(0,t.jsx)(t9,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Keep an eye on your project's performance and usage by setting up custom reports from the reports dashboard.",actions:[{label:"Create a report",href:`/project/${e}/reports`,variant:"default"}]},{key:"connect-github",status:p?"complete":"incomplete",title:"Connect to GitHub",icon:(0,t.jsx)(ti.GitBranch,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Connect your project to GitHub to automatically create preview branches and sync production changes.",actions:[{label:"Connect to GitHub",href:`/project/${e}/settings/integrations`,variant:"default"}]}]})({ref:l,openAiChat:S,connectActions:C,statuses:_}),[C,S,l,_]),T="code"===y?k:"no-code"===y?A:[];return(0,t.jsxs)("section",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h3",{className:"heading-section",children:"Getting started"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(t0.ToggleGroup,{type:"single",value:y??void 0,onValueChange:e=>{e&&(N(y),s(e),d({action:"home_getting_started_workflow_clicked",properties:{workflow:"no-code"===e?"no_code":"code",is_switch:null!==v},groups:{project:n?.ref||"",organization:c?.slug||""}}))},children:[(0,t.jsxs)(t0.ToggleGroupItem,{value:"no-code","aria-label":"No-code workflow",size:"sm",className:"text-xs gap-2 h-auto",children:[(0,t.jsx)(tX.Table2,{size:16,strokeWidth:1.5}),"No-code"]}),(0,t.jsxs)(t0.ToggleGroupItem,{value:"code",size:"sm","aria-label":"Code workflow",className:"text-xs gap-2 h-auto",children:[(0,t.jsx)(tJ.Code,{size:16,strokeWidth:1.5}),"Code"]})]}),(0,t.jsx)(F.Button,{size:"tiny",type:"outline",onClick:()=>{if(s("hidden"),y){let e=("code"===y?k:A).filter(e=>"complete"===e.status).length,t=("code"===y?k:A).length;d({action:"home_getting_started_closed",properties:{workflow:"no-code"===y?"no_code":"code",steps_completed:e,total_steps:t},groups:{project:n?.ref||"",organization:c?.slug||""}})}},children:"Dismiss"})]})]}),0===T.length?(0,t.jsxs)(b.Card,{className:"bg-background/25 border-dashed relative",children:[(0,t.jsxs)("div",{className:"absolute -inset-16 z-0 opacity-50",children:[(0,t.jsx)("img",{src:`${B.BASE_PATH}/img/reports/bg-grafana-dark.svg`,alt:"Supabase Grafana",className:"w-full h-full object-cover object-right hidden dark:block"}),(0,t.jsx)("img",{src:`${B.BASE_PATH}/img/reports/bg-grafana-light.svg`,alt:"Supabase Grafana",className:"w-full h-full object-cover object-right dark:hidden"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-background-alternative to-transparent"})]}),(0,t.jsxs)(b.CardContent,{className:"relative z-10 p-8 md:p-12 grid lg:grid-cols-2 gap-16 items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"heading-subSection mb-0 heading-meta text-foreground-light mb-4",children:"Choose a preferred workflow"}),(0,t.jsx)("p",{className:"text-foreground",children:"With Supabase, you have the flexibility to adopt a workflow that works for you. You can do everything via the dashboard, or manage your entire project within your own codebase."})]}),(0,t.jsxs)("div",{className:"flex items-stretch gap-4",children:[(0,t.jsxs)(F.Button,{size:"medium",type:"outline",onClick:()=>{N(y),s("no-code"),d({action:"home_getting_started_workflow_clicked",properties:{workflow:"no_code",is_switch:null!==v},groups:{project:n?.ref||"",organization:c?.slug||""}})},className:"block gap-2 h-auto p-4 md:p-8 max-w-80 text-left justify-start bg-background ",children:[(0,t.jsx)(tX.Table2,{size:20,strokeWidth:1.5,className:"text-brand"}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("div",{children:"No-code"}),(0,t.jsx)("div",{className:"text-foreground-light w-full whitespace-normal",children:"Ideal for prototyping or getting your project up and running"})]})]}),(0,t.jsxs)(F.Button,{size:"medium",type:"outline",onClick:()=>{N(y),s("code"),d({action:"home_getting_started_workflow_clicked",properties:{workflow:"code",is_switch:null!==v},groups:{project:n?.ref||"",organization:c?.slug||""}})},className:"bg-background block gap-2 h-auto p-4 md:p-8 max-w-80 text-left justify-start",children:[(0,t.jsx)(tJ.Code,{size:20,strokeWidth:1.5,className:"text-brand"}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("div",{children:"Code"}),(0,t.jsx)("div",{className:"text-foreground-light whitespace-normal",children:"Ideal for teams that want full control of their project"})]})]})]})]})]}):(0,t.jsx)(t7,{steps:T,onStepClick:({stepIndex:e,stepTitle:t,actionType:s,wasCompleted:a})=>{y&&d({action:"home_getting_started_step_clicked",properties:{workflow:"no-code"===y?"no_code":"code",step_number:e+1,step_title:t,action_type:s,was_completed:a},groups:{project:n?.ref||"",organization:c?.slug||""}})}})]})}var sd=e.i(414833),su=e.i(238921),sh=e.i(97429);let sm=sh.z.object({timestamp:sh.z.number({required_error:"Timestamp is required",invalid_type_error:"Timestamp must be a number (microseconds since epoch)"}).int("Timestamp must be an integer").positive("Timestamp must be positive"),service:sh.z.enum(["auth","db","functions","realtime","storage"],{required_error:"Service field is required",invalid_type_error:"Service must be one of: auth, db, functions, realtime, storage"}),time_window:sh.z.enum(["current","previous"],{required_error:"Time window field is required",invalid_type_error:'Time window must be either "current" or "previous"'}),ok_count:sh.z.number({required_error:"ok_count is required",invalid_type_error:"ok_count must be a number"}).int("ok_count must be an integer").nonnegative("ok_count cannot be negative"),warning_count:sh.z.number({required_error:"warning_count is required",invalid_type_error:"warning_count must be a number"}).int("warning_count must be an integer").nonnegative("warning_count cannot be negative"),error_count:sh.z.number({required_error:"error_count is required",invalid_type_error:"error_count must be a number"}).int("error_count must be an integer").nonnegative("error_count cannot be negative")}),sp=sh.z.array(sm,{required_error:"Metrics response must be an array",invalid_type_error:"Metrics response must be an array of metric rows"});async function sx({projectRef:e,interval:t},s){if(!e)throw Error("projectRef is required");let a=new URLSearchParams;t&&a.set("interval",t);let r=B.IS_PLATFORM?`${B.API_URL}/projects/${e}/analytics/endpoints/project.metrics?${a.toString()}`:`/api/platform/projects/${e}/analytics/endpoints/project.metrics?${a.toString()}`,i=await (0,ee.fetchGet)(r,{abortSignal:s});if(i instanceof Error||i?.error)throw i.error??i;let l=Array.isArray(i)?i:i?.result,n=sp.safeParse(l);if(!n.success){let e=n.error.errors[0],t=e.path.length>0?` at path: ${e.path.join(".")}`:"";throw Error(`Invalid metrics response${t}: ${e.message}. Received: ${JSON.stringify(l?.slice(0,2))}`)}return n.data}let sf=e=>e.reduce((e,t)=>e+t.ok_count+t.warning_count+t.error_count,0),sg=e=>`${e>=0?"+":""}${e.toFixed(1)}%`,sj={free:1,pro:7,team:28,enterprise:90,platform:1},sb=[{key:"1hr",label:"Last 60 minutes",startValue:1,startUnit:"hour",format:"MMM D, h:mma",availableIn:["free","pro","team","enterprise","platform"]},{key:"1day",label:"Last 24 hours",startValue:24,startUnit:"hour",format:"MMM D, ha",availableIn:["free","pro","team","enterprise","platform"]},{key:"7day",label:"Last 7 days",startValue:7,startUnit:"day",format:"MMM D, ha",availableIn:["pro","team","enterprise"]}],sy=()=>{let e=(0,ec.useRouter)(),{ref:l}=(0,i.useParams)(),{data:n}=(0,em.useSelectedOrganizationQuery)(),{mutate:o}=(0,tl.useSendEventMutation)(),{projectAuthAll:c,projectStorageAll:d}=(0,D.useIsFeatureEnabled)(["project_auth:all","project_storage:all"]),{plan:u}=(0,eh.useCurrentOrgPlan)(),h=u?.id==="free"?"1hr":"1day",[m,p]=(0,r.useState)(h),x=sb.find(e=>e.key===m)||sb[1],{datetimeFormat:f}=(0,r.useMemo)(()=>({datetimeFormat:x.format||"MMM D, ha"}),[x]),g=((e,t)=>{let{data:s,isPending:a,error:r,refetch:i}=((e,{enabled:t=!0,...s}={})=>{let{projectRef:a,interval:r}=e;return(0,Z.useQuery)({queryKey:et.analyticsKeys.projectMetrics(a,{interval:r}),queryFn:({signal:e})=>sx({projectRef:a,interval:r},e),enabled:t&&void 0!==a,refetchOnWindowFocus:!1,...s})})({projectRef:e,interval:t});return(e=>{let{data:t,isLoading:s,error:a,onRefresh:r}=e,i={error:a??null,isLoading:s,refresh:()=>{r()}},l={...i,eventChartData:[]},n={db:{current:[],previous:[]},functions:{current:[],previous:[]},auth:{current:[],previous:[]},storage:{current:[],previous:[]},realtime:{current:[],previous:[]}},o=e=>new Date(e/1e3).toISOString();for(let e of t??[]){let t=n[e.service];("current"===e.time_window?t.current:t.previous).push({timestamp:o(e.timestamp),ok_count:e.ok_count,warning_count:e.warning_count,error_count:e.error_count})}let c=(e,t)=>Date.parse(e.timestamp)-Date.parse(t.timestamp);for(let e of Object.keys(n))n[e].current.sort(c),n[e].previous.sort(c);let d=e=>e?{...i,eventChartData:e}:l;return{db:{current:d(n.db.current),previous:d(n.db.previous)},functions:{current:d(n.functions.current),previous:d(n.functions.previous)},auth:{current:d(n.auth.current),previous:d(n.auth.previous)},storage:{current:d(n.storage.current),previous:d(n.storage.previous)},realtime:{current:d(n.realtime.current),previous:d(n.realtime.previous)}}})({data:s,isLoading:a,error:r,onRefresh:()=>{i()}})})(l,m),j=(0,r.useMemo)(()=>[{key:"db",title:"Database requests",href:`/project/${l}/editor`,route:"/logs/postgres-logs",enabled:!0},{key:"functions",title:"Functions requests",route:"/logs/edge-functions-logs",enabled:!0},{key:"auth",title:"Auth requests",href:`/project/${l}/auth/users`,route:"/logs/auth-logs",enabled:c},{key:"storage",title:"Storage requests",href:`/project/${l}/storage/buckets`,route:"/logs/storage-logs",enabled:d},{key:"realtime",title:"Realtime requests",route:"/logs/realtime-logs",enabled:!0}],[l,c,d]),y=(0,r.useMemo)(()=>j.map(e=>{let t=g[e.key].current,s=t.eventChartData,a=sf(s),r=s.reduce((e,t)=>e+t.warning_count,0),i=s.reduce((e,t)=>e+t.error_count,0);return{...e,stats:t,data:s,total:a,warn:r,err:i}}),[j,g]),v=y.some(e=>e.stats.isLoading),N=y.filter(e=>e.enabled),_=N.reduce((e,t)=>e+(t.total||0),0),S=N.reduce((e,t)=>e+(t.err||0),0),{successRate:w,nonSuccessRate:C}=((e,t,s)=>{if(e<=0)return{successRate:0,nonSuccessRate:0};let a=(t+s)/e*100;return{successRate:100-a,nonSuccessRate:a}})(_,N.reduce((e,t)=>e+(t.warn||0),0),S),k=(0,r.useMemo)(()=>j.map(e=>{let t=g[e.key].previous.eventChartData;return{enabled:e.enabled,total:sf(t)}}),[j,g]).filter(e=>e.enabled).reduce((e,t)=>e+(t.total||0),0),A=0===k?100*(_>0):(_-k)/k*100;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-row justify-between items-center gap-x-2",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:gap-6",children:[(0,t.jsxs)("div",{className:"flex items-start gap-2 heading-section text-foreground-light",children:[(0,t.jsx)("span",{className:"text-foreground",children:_.toLocaleString()}),(0,t.jsx)("span",{children:"Total Requests"}),(0,t.jsx)("span",{className:(0,W.cn)("text-sm",A>=0?"text-brand-link":"text-destructive"),children:sg(A)})]}),(0,t.jsxs)("div",{className:"flex items-start gap-2 heading-section text-foreground-light",children:[(0,t.jsxs)("span",{className:"text-foreground",children:[w.toFixed(1),"%"]}),(0,t.jsx)("span",{children:"Success Rate"}),(0,t.jsx)("span",{className:(0,W.cn)("text-sm",C>0?"text-destructive":"text-brand-link"),children:sg(C)})]})]}),(0,t.jsxs)(ep.DropdownMenu,{children:[(0,t.jsx)(ep.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(F.Button,{type:"default",iconRight:(0,t.jsx)(eo.ChevronDown,{size:14}),children:(0,t.jsx)("span",{children:x.label})})}),(0,t.jsx)(ep.DropdownMenuContent,{side:"bottom",align:"end",className:"w-40",children:(0,t.jsx)(ep.DropdownMenuRadioGroup,{value:m,onValueChange:e=>p(e),children:sb.map(e=>{if(e.availableIn?.includes(u?.id||"free"))return(0,t.jsx)(ep.DropdownMenuRadioItem,{value:e.key,children:e.label},e.key);{let s=sj[u?.id??"free"];return(0,t.jsxs)(ef.Tooltip,{children:[(0,t.jsx)(ef.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(ep.DropdownMenuRadioItem,{disabled:!0,value:e.key,className:"!pointer-events-auto",children:e.label})}),(0,t.jsxs)(ef.TooltipContent,{side:"left",children:[(0,t.jsxs)("p",{children:[u?.name," plan only includes up to ",s," day",s>1?"s":""," of log retention"]}),(0,t.jsxs)("p",{className:"text-foreground-light",children:[(0,t.jsx)(L.InlineLink,{className:"text-foreground-light hover:text-foreground",href:`/org/${n?.slug}/billing?panel=subscriptionPlan`,children:"Upgrade your plan"})," ","to increase log retention and view statistics for the"," ",e.label.toLowerCase()]})]})]},e.key)}})})})]})]}),(0,t.jsx)(tN,{columns:[3,2,1],children:N.map(r=>{let i,c;return(0,t.jsxs)(b.Card,{className:"mb-0 md:mb-0 h-full flex flex-col h-64",children:[(0,t.jsxs)(b.CardHeader,{className:"flex flex-row items-end justify-between gap-2 space-y-0 pb-0 border-b-0",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(b.CardTitle,{className:"text-foreground-light",children:r.href?(0,t.jsx)(a.default,{href:r.href,onClick:()=>{l&&n?.slug&&o({action:"home_project_usage_service_clicked",properties:{service_type:r.key,total_requests:r.total||0,error_count:r.err||0},groups:{project:l,organization:n.slug}})},children:r.title}):r.title})}),(0,t.jsx)("span",{className:"text-foreground text-xl",children:(r.total||0).toLocaleString()})]})}),(0,t.jsxs)("div",{className:"flex items-end gap-4 text-foreground-light",children:[(0,t.jsxs)("div",{className:"flex flex-col items-end",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 bg-warning rounded-full"}),(0,t.jsx)("span",{className:"heading-meta",children:"Warn"})]}),(0,t.jsx)("span",{className:"text-foreground text-xl",children:(r.warn||0).toLocaleString()})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 bg-destructive rounded-full"}),(0,t.jsx)("span",{className:"heading-meta",children:"Err"})]}),(0,t.jsx)("span",{className:"text-foreground text-xl",children:(r.err||0).toLocaleString()})]})]})]}),(0,t.jsx)(b.CardContent,{className:"p-6 pt-4 flex-1 h-full overflow-hidden",children:(0,t.jsx)(ex.Loading,{isFullHeight:!0,active:v,children:(0,t.jsx)(su.LogsBarChart,{isFullHeight:!0,data:r.data,DateTimeFormat:f,onBarClick:(i=r.route,c=r.key,t=>{if(!t?.timestamp)return;let a=(0,s.default)(t.timestamp).toISOString(),r=new URLSearchParams({iso_timestamp_start:(0,s.default)(a).subtract(1,"minute").toISOString(),iso_timestamp_end:(0,s.default)(a).add(1,"minute").toISOString()});e.push(`/project/${l}${i}?${r.toString()}`),l&&n?.slug&&o({action:"home_project_usage_chart_clicked",properties:{service_type:c,bar_timestamp:t.timestamp},groups:{project:l,organization:n.slug}})}),EmptyState:(0,t.jsx)(sd.default,{size:"small",message:"No data for selected period",isFullHeight:!0})})})})]},r.key)})})]})},sv=()=>{let{enableBranching:e}=(0,i.useParams)(),a=(0,e5.useAppStateSnapshot)(),{data:l}=(0,ei.useSelectedProjectQuery)(),{data:n}=(0,em.useSelectedOrganizationQuery)(),{mutate:o}=(0,tl.useSendEventMutation)(),c=(0,s.default)(l?.inserted_at).isBefore((0,s.default)().subtract(10,"day")),d=(0,r.useRef)(!1),u=l?.status===e4.PROJECT_STATUS.INACTIVE,h=l?.status===e4.PROJECT_STATUS.COMING_UP,[m,p]=(0,tj.useLocalStorage)(`home-section-order-${l?.ref||"default"}`,["getting-started","usage","advisor","custom-report"]),[x,f]=(0,tj.useLocalStorage)(`home-getting-started-${l?.ref||"default"}`,"empty"),g=(0,e8.useSensors)((0,e8.useSensor)(e8.PointerSensor,{activationConstraint:{distance:8}}));return(0,r.useEffect)(()=>{e&&!d.current&&(d.current=!0,a.setShowCreateBranchModal(!0))},[e,a]),(0,t.jsxs)("div",{className:"w-full h-full",children:[(0,t.jsx)(tg.ScaffoldContainer,{size:"large",className:(0,W.cn)(u&&"h-full"),children:(0,t.jsx)(tg.ScaffoldSection,{isFullWidth:!0,className:(0,W.cn)(u?"h-full flex justify-center !p-0":"pt-16 pb-0"),children:(0,t.jsx)(tf,{})})}),!u&&(0,t.jsx)(tg.ScaffoldContainer,{size:"large",children:(0,t.jsx)(tg.ScaffoldSection,{isFullWidth:!0,className:"gap-16 pb-32",children:(0,t.jsx)(e8.DndContext,{sensors:g,onDragEnd:e=>{let{active:t,over:s}=e;s&&t.id!==s.id&&p(e=>{let a=e.indexOf(String(t.id)),r=e.indexOf(String(s.id));return -1===a||-1===r?e:(l?.ref&&n?.slug&&o({action:"home_section_rows_moved",properties:{section_moved:String(t.id),old_position:a,new_position:r},groups:{project:l.ref,organization:n.slug}}),(0,e7.arrayMove)(e,a,r))})},children:(0,t.jsx)(e7.SortableContext,{items:m.filter(e=>"getting-started"!==e||"hidden"!==x),strategy:e7.verticalListSortingStrategy,children:m.map(e=>e9.IS_PLATFORM&&"usage"===e?(0,t.jsx)("div",{className:(0,W.cn)(h&&"opacity-60 pointer-events-none"),children:(0,t.jsx)(tt,{id:e,children:(0,t.jsx)(sy,{})})},e):"getting-started"===e&&!c&&l&&"hidden"!==x?(0,t.jsx)(tt,{id:e,children:(0,t.jsx)(sc,{value:x,onChange:f})},e):"advisor"===e?(0,t.jsx)("div",{className:(0,W.cn)(h&&"opacity-60 pointer-events-none"),children:(0,t.jsx)(tt,{id:e,children:(0,t.jsx)(tS,{showEmptyState:h})})},e):"custom-report"===e?(0,t.jsx)("div",{className:(0,W.cn)(h&&"opacity-60 pointer-events-none"),children:(0,t.jsx)(tt,{id:e,children:(0,t.jsx)(tV,{})})},e):void 0)})})})})]})};var sN=e.i(448710),s_=e.i(825713),sS=e.i(761755);let sw=()=>(0,sS.usePHFlag)("homeNew")?(0,t.jsx)(sv,{}):(0,t.jsx)(e3,{});sw.getLayout=e=>(0,t.jsx)(sN.default,{children:(0,t.jsx)(s_.ProjectLayoutWithAuth,{children:e})}),e.s(["default",0,sw],421778)},451283,(e,t,s)=>{let a="/project/[ref]";(window.__NEXT_P=window.__NEXT_P||[]).push([a,()=>e.r(421778)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([a])})}]);

//# debugId=cc978182-8f87-26f2-f9d3-e1fe1f421882
//# sourceMappingURL=3a693190e567e4b5.js.map