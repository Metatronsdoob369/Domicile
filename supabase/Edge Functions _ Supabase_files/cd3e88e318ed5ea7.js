;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="02c0c118-87bf-1cd0-cc7a-3c4a57336051")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,389133,(e,t,r)=>{var a=e.r(551872),i=e.r(320435),n=e.r(283394);t.exports=function(e,t){return e&&e.length?a(e,i(t,2),n):void 0}},268796,e=>{"use strict";var t=e.i(478902),r=e.i(532728),a=e.i(902858),i=e.i(809323),n=e.i(265100),o=e.i(416050),s=e.i(389959),l=e.i(408891),c=e.i(355901);e.i(128328);var d=e.i(158639),u=e.i(167892),p=e.i(513826),m=e.i(781894),f=e.i(235458),h=e.i(605317),g=e.i(218115),x=e.i(242882),y=e.i(234745),b=e.i(78162);async function v({projectRef:e},t){if(!e)throw Error("Project ref is required");let{data:r,error:a}=await (0,y.get)("/platform/projects/{ref}/disk/custom-config",{params:{path:{ref:e}},signal:t});return a&&(0,y.handleError)(a),r}let j=({projectRef:e},{enabled:t=!0,...r}={})=>(0,x.useQuery)({queryKey:b.configKeys.diskAutoscaleConfig(e),queryFn:({signal:t})=>v({projectRef:e},t),enabled:t&&void 0!==e,...r});var S=e.i(38429),P=e.i(356003);async function I({projectRef:e,growthPercent:t,maxSizeGb:r,minIncrementGb:a}){if(!e)throw Error("projectRef is required");let{data:i,error:n}=await (0,y.post)("/platform/projects/{ref}/disk/custom-config",{params:{path:{ref:e}},body:{growth_percent:t,max_size_gb:r,min_increment_gb:a}});return n&&(0,y.handleError)(n),i}async function O({projectRef:e},t){if(!e)throw Error("Project ref is required");let{data:r,error:a}=await (0,y.get)("/platform/projects/{ref}/disk/util",{params:{path:{ref:e}},signal:t});return a&&(0,y.handleError)(a),r}let T=({projectRef:e},{enabled:t=!0,...r}={})=>(0,x.useQuery)({queryKey:b.configKeys.diskUtilization(e),queryFn:({signal:t})=>O({projectRef:e},t),enabled:t&&void 0!==e,...r});var _=e.i(164045),N=e.i(150671),w=e.i(192327),k=e.i(144676),z=e.i(589314),C=e.i(280590),A=e.i(2579),D=e.i(265735),E=e.i(635494),L=e.i(10429),R=e.i(837508),V=e.i(837710),M=e.i(843778),F=e.i(925282),G=e.i(774234),B=e.i(554855),U=e.i(428353),K=e.i(479095),$=e.i(710483);let q=({formState:e})=>(0,t.jsx)(i.AnimatePresence,{mode:"wait",children:Object.keys(e.dirtyFields).length>0&&(0,t.jsx)(n.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:(0,t.jsx)(n.motion.div,{animate:{scale:[1,1.05,1],transition:{duration:.3}},children:(0,t.jsx)("p",{className:"text-sm text-foreground-lighter",children:(0,t.jsx)(n.motion.span,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.1},children:1===Object.keys(e.dirtyFields).length?"1 change to review":`${Object.keys(e.dirtyFields).length} changes to review`},Object.keys(e.dirtyFields).length)})})})});var Q=e.i(97429),W=e.i(961753),Y=e.i(819591);let Z=Q.z.object({storageType:Q.z.enum(["io2","gp3"]).describe("Type of storage: io2 or gp3"),totalSize:Q.z.number().int("Value must be an integer").describe("Allocated disk size in GB"),provisionedIOPS:Q.z.number().describe("Provisioned IOPS for storage type"),throughput:Q.z.number().optional().describe("Throughput in MB/s for gp3"),computeSize:Q.z.custom(e=>!0).describe("Compute size"),growthPercent:Q.z.number().int("Value must be an integer").min(10,"Growth percent must be at least 10%").max(100,"Growth percent cannot exceed 100%").optional().nullable(),minIncrementGb:Q.z.number().int("Value must be an integer").min(1,"Minimum increment must be at least 1 GB").max(200,"Minimum increment cannot exceed 200 GB").optional().nullable(),maxSizeGb:Q.z.number().int("Value must be an integer").max(6e4,"Maximum size cannot exceed 60TB").optional().nullable()});var H=e.i(809934),X=e.i(253214),J=e.i(877555);let ee=({visible:e,title:r,description:a})=>(0,t.jsx)(i.AnimatePresence,{children:e&&(0,t.jsx)(n.motion.div,{initial:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.15},className:"w-full",children:(0,t.jsxs)(X.DialogSection,{className:"bg-surface-100 text-sm text-foreground-light flex items-center gap-4 relative w-full rounded-md border-spacing-0 border",children:[(0,t.jsx)("div",{className:"w-12 h-12",children:(0,t.jsxs)("div",{className:"relative w-10 h-10 m-1 bg-alternative text-foreground border rounded-full flex items-center justify-center",children:[(0,t.jsx)(H.RotateCcw,{strokeWidth:1}),(0,t.jsx)(J.WarningIcon,{className:"absolute -right-1.5 -top-1.5"})]})}),(0,t.jsxs)("div",{className:"flex flex-col gap-0 flex-grow",children:[(0,t.jsx)("p",{className:"text-sm text-foreground",children:r}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:a})]})]})})});var et=e.i(215312),er=e.i(48189),ea=e.i(178527),ei=e.i(592360),en=e.i(587433),eo=e.i(492418),es=e.i(613580);let el=({beforePrice:e,afterPrice:r,show:a,tooltip:s,className:l,free:c})=>(0,t.jsx)(i.AnimatePresence,{children:void 0!==e&&void 0!==r&&a&&(0,t.jsx)(n.motion.div,{initial:{opacity:0,x:-4,height:0},animate:{opacity:1,x:0,height:"auto"},exit:{opacity:0,x:-4,height:0},transition:{type:"spring",stiffness:800,damping:40,duration:.3},children:(0,t.jsx)(en.Badge,{variant:"default",className:(0,M.cn)(c?"bg-violet-200 border-violet-900 text-violet-1100":"bg-alternative","bg-opacity-100 text-warning",l),children:(0,t.jsxs)(es.Tooltip,{children:[(0,t.jsx)(es.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"text-xs font-mono text-foreground-muted",translate:"no",children:(0,er.formatCurrency)(e)}),(0,t.jsx)(o.ChevronRight,{size:12,strokeWidth:2,className:"text-foreground-muted"}),(0,t.jsx)(n.motion.span,{className:(0,M.cn)(c?"text-violet-1100":"text-foreground","text-xs font-mono"),animate:{scale:[1,1.1,1]},transition:{duration:.12},translate:"no",children:`${(0,er.formatCurrency)(r)}/month`},r)]})}),void 0!==s&&(0,t.jsx)(es.TooltipContent,{side:"bottom",children:s})]})})})});var ec=e.i(197649),ed=e.i(466727),eu=e.i(877591),ep=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function em(e){return(em="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ef(){return(ef=Object.assign.bind()).apply(this,arguments)}function eh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function eg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(r),!0).forEach(function(t){var a,i,n;a=e,i=t,n=r[t],(i=function(e){var t=function(e,t){if("object"!=em(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=em(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==em(t)?t:t+""}(i))in a?Object.defineProperty(a,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[i]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ex=function(e,t,r,a){var i="";return a.forEach(function(a,n){var o=(0,ed.polarToCartesian)(t,r,e,a);n?i+="L ".concat(o.x,",").concat(o.y):i+="M ".concat(o.x,",").concat(o.y)}),i+="Z"},ey=function(e){var t=e.cx,r=e.cy,a=e.innerRadius,i=e.outerRadius,n=e.polarAngles,o=e.radialLines;if(!n||!n.length||!o)return null;var l=eg({stroke:"#ccc"},(0,eu.filterProps)(e,!1));return s.default.createElement("g",{className:"recharts-polar-grid-angle"},n.map(function(e){var n=(0,ed.polarToCartesian)(t,r,a,e),o=(0,ed.polarToCartesian)(t,r,i,e);return s.default.createElement("line",ef({},l,{key:"line-".concat(e),x1:n.x,y1:n.y,x2:o.x,y2:o.y}))}))},eb=function(e){var t=e.cx,r=e.cy,a=e.radius,i=e.index,n=eg(eg({stroke:"#ccc"},(0,eu.filterProps)(e,!1)),{},{fill:"none"});return s.default.createElement("circle",ef({},n,{className:(0,ec.default)("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(i),cx:t,cy:r,r:a}))},ev=function(e){var t=e.radius,r=e.index,a=eg(eg({stroke:"#ccc"},(0,eu.filterProps)(e,!1)),{},{fill:"none"});return s.default.createElement("path",ef({},a,{className:(0,ec.default)("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:ex(t,e.cx,e.cy,e.polarAngles)}))},ej=function(e){var t=e.polarRadius,r=e.gridType;return t&&t.length?s.default.createElement("g",{className:"recharts-polar-grid-concentric"},t.map(function(t,a){return"circle"===r?s.default.createElement(eb,ef({key:a},e,{radius:t,index:a})):s.default.createElement(ev,ef({key:a},e,{radius:t,index:a}))})):null},eS=function(e){var t=e.cx,r=void 0===t?0:t,a=e.cy,i=void 0===a?0:a,n=e.innerRadius,o=void 0===n?0:n,l=e.outerRadius,c=void 0===l?0:l,d=e.gridType,u=void 0===d?"polygon":d,p=e.radialLines,m=void 0===p||p,f=function(e,t){if(null==e)return{};var r,a,i=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,ep);return c<=0?null:s.default.createElement("g",{className:"recharts-polar-grid"},s.default.createElement(ey,ef({cx:r,cy:i,innerRadius:o,outerRadius:c,gridType:u,radialLines:m},f)),s.default.createElement(ej,ef({cx:r,cy:i,innerRadius:o,outerRadius:c,gridType:u,radialLines:m},f)))};eS.displayName="PolarGrid";var eP=e.i(791576),eI=e.i(408880),eO=e.i(439043),eT=e.i(298360);function e_(e){return(e_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eN(){return(eN=Object.assign.bind()).apply(this,arguments)}function ew(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function ek(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ew(Object(r),!0).forEach(function(t){var a,i,n;a=e,i=t,n=r[t],(i=function(e){var t=function(e,t){if("object"!=e_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=e_(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==e_(t)?t:t+""}(i))in a?Object.defineProperty(a,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[i]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ew(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ez(e){return"string"==typeof e?parseInt(e,10):e}function eC(e,t){var r=Number("".concat(t.cx||e.cx)),a=Number("".concat(t.cy||e.cy));return ek(ek(ek({},t),e),{},{cx:r,cy:a})}function eA(e){return s.default.createElement(eT.Shape,eN({shapeType:"sector",propTransformer:eC},e))}var eD=e.i(557385),eE=e.i(129405),eL=e.i(143109),eR=e.i(942032),eV=e.i(767799),eM=e.i(447958),eF=e.i(672234),eG=["shape","activeShape","activeIndex","cornerRadius"],eB=["value","background"];function eU(e){return(eU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eK(){return(eK=Object.assign.bind()).apply(this,arguments)}function e$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function eq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e$(Object(r),!0).forEach(function(t){eX(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eQ(e,t){if(null==e)return{};var r,a,i=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function eW(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,eJ(a.key),a)}}function eY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eY=function(){return!!e})()}function eZ(e){return(eZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eH(e,t){return(eH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eX(e,t,r){return(t=eJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eJ(e){var t=function(e,t){if("object"!=eU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=eU(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eU(t)?t:t+""}var e0=function(e){var t,r;function a(){var e,t,r;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");for(var i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=a,r=[].concat(n),t=eZ(t),eX(e=function(e,t){if(t&&("object"===eU(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");var r=e;if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(this,eY()?Reflect.construct(t,r||[],eZ(this).constructor):t.apply(this,r)),"state",{isAnimationFinished:!1}),eX(e,"handleAnimationEnd",function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),(0,eO.default)(t)&&t()}),eX(e,"handleAnimationStart",function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),(0,eO.default)(t)&&t()}),e}if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");return a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&eH(a,e),t=[{key:"getDeltaAngle",value:function(){var e=this.props,t=e.startAngle,r=e.endAngle;return(0,eV.mathSign)(r-t)*Math.min(Math.abs(r-t),360)}},{key:"renderSectorsStatically",value:function(e){var t=this,r=this.props,a=r.shape,i=r.activeShape,n=r.activeIndex,o=r.cornerRadius,l=eQ(r,eG),c=(0,eu.filterProps)(l,!1);return e.map(function(e,r){var d=r===n,u=eq(eq(eq(eq({},c),{},{cornerRadius:ez(o)},e),(0,eF.adaptEventsOfChild)(t.props,e,r)),{},{className:"recharts-radial-bar-sector ".concat(e.className),forceCornerRadius:l.forceCornerRadius,cornerIsExternal:l.cornerIsExternal,isActive:d,option:d?i:a});return s.default.createElement(eA,eK({},u,{key:"sector-".concat(r)}))})}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,r=t.data,a=t.isAnimationActive,i=t.animationBegin,n=t.animationDuration,o=t.animationEasing,l=t.animationId,c=this.state.prevData;return s.default.createElement(eP.default,{begin:i,duration:n,isActive:a,easing:o,from:{t:0},to:{t:1},key:"radialBar-".concat(l),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(t){var a=t.t,i=r.map(function(e,t){var r=c&&c[t];if(r){var i=(0,eV.interpolateNumber)(r.startAngle,e.startAngle),n=(0,eV.interpolateNumber)(r.endAngle,e.endAngle);return eq(eq({},e),{},{startAngle:i(a),endAngle:n(a)})}var o=e.endAngle,s=e.startAngle,l=(0,eV.interpolateNumber)(s,o);return eq(eq({},e),{},{endAngle:l(a)})});return s.default.createElement(eD.Layer,null,e.renderSectorsStatically(i))})}},{key:"renderSectors",value:function(){var e=this.props,t=e.data,r=e.isAnimationActive,a=this.state.prevData;return r&&t&&t.length&&(!a||!(0,eI.default)(a,t))?this.renderSectorsWithAnimation():this.renderSectorsStatically(t)}},{key:"renderBackground",value:function(e){var t=this,r=this.props.cornerRadius,a=(0,eu.filterProps)(this.props.background,!1);return e.map(function(e,i){e.value;var n=e.background,o=eQ(e,eB);if(!n)return null;var l=eq(eq(eq(eq(eq({cornerRadius:ez(r)},o),{},{fill:"#eee"},n),a),(0,eF.adaptEventsOfChild)(t.props,e,i)),{},{index:i,className:(0,ec.default)("recharts-radial-bar-background-sector",null==a?void 0:a.className),option:n,isActive:!1});return s.default.createElement(eA,eK({},l,{key:"sector-".concat(i)}))})}},{key:"render",value:function(){var e=this.props,t=e.hide,r=e.data,a=e.className,i=e.background,n=e.isAnimationActive;if(t||!r||!r.length)return null;var o=this.state.isAnimationFinished,l=(0,ec.default)("recharts-area",a);return s.default.createElement(eD.Layer,{className:l},i&&s.default.createElement(eD.Layer,{className:"recharts-radial-bar-background"},this.renderBackground(r)),s.default.createElement(eD.Layer,{className:"recharts-radial-bar-sectors"},this.renderSectors()),(!n||o)&&eL.LabelList.renderCallByParent(eq({},this.props),r))}}],r=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],t&&eW(a.prototype,t),r&&eW(a,r),Object.defineProperty(a,"prototype",{writable:!1}),a}(s.PureComponent);eX(e0,"displayName","RadialBar"),eX(e0,"defaultProps",{angleAxisId:0,radiusAxisId:0,minPointSize:0,hide:!1,legendType:"rect",data:[],isAnimationActive:!eE.Global.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease",forceCornerRadius:!1,cornerIsExternal:!1}),eX(e0,"getComposedData",function(e){var t=e.item,r=e.props,a=e.radiusAxis,i=e.radiusAxisTicks,n=e.angleAxis,o=e.angleAxisTicks,s=e.displayedData,l=e.dataKey,c=e.stackedData,d=e.barPosition,u=e.bandSize,p=e.dataStartIndex,m=(0,eM.findPositionOfBar)(d,t);if(!m)return null;var f=n.cx,h=n.cy,g=r.layout,x=t.props,y=x.children,b=x.minPointSize,v="radial"===g?n:a,j=c?v.scale.domain():null,S=(0,eM.getBaseValueOfBar)({numericAxis:v}),P=(0,eu.findAllByType)(y,eR.Cell);return{data:s.map(function(e,s){var d,x,y,v,I,O;if(c?d=(0,eM.truncateByDomain)(c[p+s],j):Array.isArray(d=(0,eM.getValueByDataKey)(e,l))||(d=[S,d]),"radial"===g){x=(0,eM.getCateCoordinateOfBar)({axis:a,ticks:i,bandSize:u,offset:m.offset,entry:e,index:s}),I=n.scale(d[1]),v=n.scale(d[0]),y=x+m.size;var T=I-v;Math.abs(b)>0&&Math.abs(T)<Math.abs(b)&&(I+=(0,eV.mathSign)(T||b)*(Math.abs(b)-Math.abs(T))),O={background:{cx:f,cy:h,innerRadius:x,outerRadius:y,startAngle:r.startAngle,endAngle:r.endAngle}}}else{x=a.scale(d[0]),y=a.scale(d[1]),I=(v=(0,eM.getCateCoordinateOfBar)({axis:n,ticks:o,bandSize:u,offset:m.offset,entry:e,index:s}))+m.size;var _=y-x;Math.abs(b)>0&&Math.abs(_)<Math.abs(b)&&(y+=(0,eV.mathSign)(_||b)*(Math.abs(b)-Math.abs(_)))}return eq(eq(eq(eq({},e),O),{},{payload:e,value:c?d:d[1],cx:f,cy:h,innerRadius:x,outerRadius:y,startAngle:v,endAngle:I},P&&P[s]&&P[s].props),{},{tooltipPayload:[(0,eM.getTooltipItem)(t,e)],tooltipPosition:(0,ed.polarToCartesian)(f,h,(x+y)/2,(v+I)/2)})}),layout:g}});var e1=e.i(948610),e2=e.i(113939),e3=["points","className","baseLinePoints","connectNulls"];function e5(){return(e5=Object.assign.bind()).apply(this,arguments)}function e4(e){return function(e){if(Array.isArray(e))return e8(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return e8(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e8(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}var e9=function(e){return e&&e.x===+e.x&&e.y===+e.y},e6=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach(function(e){e9(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])}),e9(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t},e7=function(e,t){var r=e6(e);t&&(r=[r.reduce(function(e,t){return[].concat(e4(e),e4(t))},[])]);var a=r.map(function(e){return e.reduce(function(e,t,r){return"".concat(e).concat(0===r?"M":"L").concat(t.x,",").concat(t.y)},"")}).join("");return 1===r.length?"".concat(a,"Z"):a},te=function(e,t,r){var a=e7(e,r);return"".concat("Z"===a.slice(-1)?a.slice(0,-1):a,"L").concat(e7(t.reverse(),r).slice(1))},tt=function(e){var t=e.points,r=e.className,a=e.baseLinePoints,i=e.connectNulls,n=function(e,t){if(null==e)return{};var r,a,i=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,e3);if(!t||!t.length)return null;var o=(0,ec.default)("recharts-polygon",r);if(a&&a.length){var l=n.stroke&&"none"!==n.stroke,c=te(t,a,i);return s.default.createElement("g",{className:o},s.default.createElement("path",e5({},(0,eu.filterProps)(n,!0),{fill:"Z"===c.slice(-1)?n.fill:"none",stroke:"none",d:c})),l?s.default.createElement("path",e5({},(0,eu.filterProps)(n,!0),{fill:"none",d:e7(t,i)})):null,l?s.default.createElement("path",e5({},(0,eu.filterProps)(n,!0),{fill:"none",d:e7(a,i)})):null)}var d=e7(t,i);return s.default.createElement("path",e5({},(0,eu.filterProps)(n,!0),{fill:"Z"===d.slice(-1)?n.fill:"none",className:o,d:d}))},tr=e.i(520261);function ta(e){return(ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ti(){return(ti=Object.assign.bind()).apply(this,arguments)}function tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function to(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(r),!0).forEach(function(t){tu(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ts(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,tp(a.key),a)}}function tl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tl=function(){return!!e})()}function tc(e){return(tc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function td(e,t){return(td=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tu(e,t,r){return(t=tp(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tp(e){var t=function(e,t){if("object"!=ta(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=ta(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ta(t)?t:t+""}var tm=Math.PI/180,tf=function(e){var t,r;function a(){var e,t;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");return e=a,t=arguments,e=tc(e),function(e,t){if(t&&("object"===ta(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");var r=e;if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(this,tl()?Reflect.construct(e,t||[],tc(this).constructor):e.apply(this,t))}if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");return a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&td(a,e),t=[{key:"getTickLineCoord",value:function(e){var t=this.props,r=t.cx,a=t.cy,i=t.radius,n=t.orientation,o=t.tickSize,s=(0,ed.polarToCartesian)(r,a,i,e.coordinate),l=(0,ed.polarToCartesian)(r,a,i+("inner"===n?-1:1)*(o||8),e.coordinate);return{x1:s.x,y1:s.y,x2:l.x,y2:l.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,r=Math.cos(-e.coordinate*tm);return r>1e-5?"outer"===t?"start":"end":r<-1e-5?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,r=e.cy,a=e.radius,i=e.axisLine,n=e.axisLineType,o=to(to({},(0,eu.filterProps)(this.props,!1)),{},{fill:"none"},(0,eu.filterProps)(i,!1));if("circle"===n)return s.default.createElement(e2.Dot,ti({className:"recharts-polar-angle-axis-line"},o,{cx:t,cy:r,r:a}));var l=this.props.ticks.map(function(e){return(0,ed.polarToCartesian)(t,r,a,e.coordinate)});return s.default.createElement(tt,ti({className:"recharts-polar-angle-axis-line"},o,{points:l}))}},{key:"renderTicks",value:function(){var e=this,t=this.props,r=t.ticks,i=t.tick,n=t.tickLine,o=t.tickFormatter,l=t.stroke,c=(0,eu.filterProps)(this.props,!1),d=(0,eu.filterProps)(i,!1),u=to(to({},c),{},{fill:"none"},(0,eu.filterProps)(n,!1)),p=r.map(function(t,r){var p=e.getTickLineCoord(t),m=to(to(to({textAnchor:e.getTickTextAnchor(t)},c),{},{stroke:"none",fill:l},d),{},{index:r,payload:t,x:p.x2,y:p.y2});return s.default.createElement(eD.Layer,ti({className:(0,ec.default)("recharts-polar-angle-axis-tick",(0,ed.getTickClassName)(i)),key:"tick-".concat(t.coordinate)},(0,eF.adaptEventsOfChild)(e.props,t,r)),n&&s.default.createElement("line",ti({className:"recharts-polar-angle-axis-tick-line"},u,p)),i&&a.renderTickItem(i,m,o?o(t.value,r):t.value))});return s.default.createElement(eD.Layer,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var e=this.props,t=e.ticks,r=e.radius,a=e.axisLine;return!(r<=0)&&t&&t.length?s.default.createElement(eD.Layer,{className:(0,ec.default)("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks()):null}}],r=[{key:"renderTickItem",value:function(e,t,r){return s.default.isValidElement(e)?s.default.cloneElement(e,t):(0,eO.default)(e)?e(t):s.default.createElement(tr.Text,ti({},t,{className:"recharts-polar-angle-axis-tick-value"}),r)}}],t&&ts(a.prototype,t),r&&ts(a,r),Object.defineProperty(a,"prototype",{writable:!1}),a}(s.PureComponent);tu(tf,"displayName","PolarAngleAxis"),tu(tf,"axisType","angleAxis"),tu(tf,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var th=e.i(758829),tg=e.i(389133),tx=e.i(337072),ty=["cx","cy","angle","ticks","axisLine"],tb=["ticks","tick","angle","tickFormatter","stroke"];function tv(e){return(tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tj(){return(tj=Object.assign.bind()).apply(this,arguments)}function tS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function tP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tS(Object(r),!0).forEach(function(t){tw(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tS(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tI(e,t){if(null==e)return{};var r,a,i=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function tO(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,tk(a.key),a)}}function tT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tT=function(){return!!e})()}function t_(e){return(t_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tN(e,t){return(tN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tw(e,t,r){return(t=tk(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tk(e){var t=function(e,t){if("object"!=tv(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=tv(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tv(t)?t:t+""}var tz=function(e){var t,r;function a(){var e,t;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");return e=a,t=arguments,e=t_(e),function(e,t){if(t&&("object"===tv(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");var r=e;if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(this,tT()?Reflect.construct(e,t||[],t_(this).constructor):e.apply(this,t))}if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");return a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&tN(a,e),t=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,r=this.props,a=r.angle,i=r.cx,n=r.cy;return(0,ed.polarToCartesian)(i,n,t,a)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,r=e.cy,a=e.angle,i=e.ticks,n=(0,th.default)(i,function(e){return e.coordinate||0});return{cx:t,cy:r,startAngle:a,endAngle:a,innerRadius:(0,tg.default)(i,function(e){return e.coordinate||0}).coordinate||0,outerRadius:n.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,r=e.cy,a=e.angle,i=e.ticks,n=e.axisLine,o=tI(e,ty),l=i.reduce(function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]},[1/0,-1/0]),c=(0,ed.polarToCartesian)(t,r,l[0],a),d=(0,ed.polarToCartesian)(t,r,l[1],a),u=tP(tP(tP({},(0,eu.filterProps)(o,!1)),{},{fill:"none"},(0,eu.filterProps)(n,!1)),{},{x1:c.x,y1:c.y,x2:d.x,y2:d.y});return s.default.createElement("line",tj({className:"recharts-polar-radius-axis-line"},u))}},{key:"renderTicks",value:function(){var e=this,t=this.props,r=t.ticks,i=t.tick,n=t.angle,o=t.tickFormatter,l=t.stroke,c=tI(t,tb),d=this.getTickTextAnchor(),u=(0,eu.filterProps)(c,!1),p=(0,eu.filterProps)(i,!1),m=r.map(function(t,r){var c=e.getTickValueCoord(t),m=tP(tP(tP(tP({textAnchor:d,transform:"rotate(".concat(90-n,", ").concat(c.x,", ").concat(c.y,")")},u),{},{stroke:"none",fill:l},p),{},{index:r},c),{},{payload:t});return s.default.createElement(eD.Layer,tj({className:(0,ec.default)("recharts-polar-radius-axis-tick",(0,ed.getTickClassName)(i)),key:"tick-".concat(t.coordinate)},(0,eF.adaptEventsOfChild)(e.props,t,r)),a.renderTickItem(i,m,o?o(t.value,r):t.value))});return s.default.createElement(eD.Layer,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var e=this.props,t=e.ticks,r=e.axisLine,a=e.tick;return t&&t.length?s.default.createElement(eD.Layer,{className:(0,ec.default)("recharts-polar-radius-axis",this.props.className)},r&&this.renderAxisLine(),a&&this.renderTicks(),tx.Label.renderCallByParent(this.props,this.getViewBox())):null}}],r=[{key:"renderTickItem",value:function(e,t,r){return s.default.isValidElement(e)?s.default.cloneElement(e,t):(0,eO.default)(e)?e(t):s.default.createElement(tr.Text,tj({},t,{className:"recharts-polar-radius-axis-tick-value"}),r)}}],t&&tO(a.prototype,t),r&&tO(a,r),Object.defineProperty(a,"prototype",{writable:!1}),a}(s.PureComponent);tw(tz,"displayName","PolarRadiusAxis"),tw(tz,"axisType","radiusAxis"),tw(tz,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var tC=(0,e1.generateCategoricalChart)({chartName:"RadialBarChart",GraphicalChild:e0,legendContent:"children",defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"angleAxis",AxisComp:tf},{axisType:"radiusAxis",AxisComp:tz}],formatAxisMap:ed.formatAxisMap,defaultProps:{layout:"radial",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),tA=e.i(462273);let tD={timeRemaining:{label:"timeRemaining",color:"hsl(var(--warning-default))"},hand:{label:"hand",color:"hsl(var(--warning-default))"}},tE=({progress:e})=>(0,t.jsxs)("div",{className:"relative w-12 h-12",children:[(0,t.jsx)(tA.ChartContainer,{config:tD,className:"absolute w-12 h-12",children:(0,t.jsxs)(tC,{data:[{timeRemaining:100,fill:"var(--color-timeRemaining)"}],startAngle:90,endAngle:90-360*e/100,innerRadius:21,outerRadius:14,children:[(0,t.jsx)(eS,{gridType:"circle",radialLines:!1,stroke:"none",className:"first:fill-foreground-muted/50 last:fill-background-200",polarRadius:[16,11]}),(0,t.jsx)(e0,{dataKey:"timeRemaining",cornerRadius:2})]})}),(0,t.jsx)(tA.ChartContainer,{config:tD,className:"absolute top-1 left-1 w-10 h-10",children:(0,t.jsx)(tC,{data:[{hand:100,fill:"var(--color-hand)"}],startAngle:80-360*e/100,endAngle:140-360*e/100,innerRadius:14,outerRadius:5,children:(0,t.jsx)(e0,{dataKey:"hand",cornerRadius:2,isAnimationActive:!0})})})]}),tL=({visible:e})=>{let[r,a]=(0,s.useState)(100),[o,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=()=>{l(!0),a(100);let t=setInterval(()=>{a(r=>r<=0?(clearInterval(t),d(!0),setTimeout(()=>{d(!1),a(100),e()},300),0):r-1)},100);return()=>clearInterval(t)},t=setTimeout(e,1e3);return()=>clearTimeout(t)},[]),(0,t.jsx)(i.AnimatePresence,{children:e&&(0,t.jsx)(n.motion.div,{initial:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.15},className:"w-full",children:(0,t.jsxs)(X.DialogSection,{className:"bg-surface-100 text-sm text-foreground-light flex items-center gap-4 relative w-full border rounded-md",children:[(0,t.jsx)("div",{className:"w-12 h-12",children:(0,t.jsx)(i.AnimatePresence,{children:o&&(0,t.jsx)(n.motion.div,{initial:{scale:.8,opacity:0,y:-8},animate:{scale:c?1.2:1,opacity:1,y:c?-8:0},exit:{scale:.8,opacity:0,y:-8},transition:{duration:c?.3:.8,type:"spring",bounce:.6},children:(0,t.jsx)(tE,{progress:r})},"countdown-timer")})}),(0,t.jsxs)("div",{className:"flex flex-col gap-0 flex-grow",children:[(0,t.jsx)("p",{className:"text-sm text-foreground",children:"For 6 hours you will not be able to change any disk attributes."}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"There is a cooldown period enforced for any disk attribute modifications"})]})]})})})},tR=()=>(0,t.jsxs)(eo.TableRow,{children:[(0,t.jsx)(eo.TableHead,{className:"w-[140px] pl-5",children:"Disk attribute"}),(0,t.jsx)(eo.TableHead,{className:"text-right",children:"-"}),(0,t.jsx)(eo.TableHead,{className:"w-[100px]",children:"Unit"}),(0,t.jsx)(eo.TableHead,{className:"text-right pr-5",children:"Price Change"})]}),tV=({attribute:e,defaultValue:r,newValue:a,unit:i,beforePrice:n,afterPrice:s,hidePrice:l=!1,priceTooltip:c,upgradeIncluded:d=!1})=>(0,t.jsxs)(eo.TableRow,{children:[(0,t.jsx)(eo.TableCell,{className:"pl-5",children:(0,t.jsx)("div",{className:"flex flex-row gap-2 items-center",children:(0,t.jsx)("span",{children:e})})}),(0,t.jsx)(eo.TableCell,{className:"text-right font-mono",children:r!==a?(0,t.jsx)(en.Badge,{variant:"default",className:"bg-alternative bg-opacity-100",children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"text-xs font-mono text-foreground-muted",children:r.toString()}),(0,t.jsx)(o.ChevronRight,{size:12,strokeWidth:2,className:"text-foreground-muted"}),(0,t.jsx)("span",{className:"text-xs font-mono text-foreground",children:a.toString()})]})}):(0,t.jsxs)("span",{className:"text-xs font-mono",children:[(0,t.jsx)("span",{className:"text-foreground-muted"}),r]})}),(0,t.jsx)(eo.TableCell,{className:"text-xs font-mono",children:i}),(0,t.jsx)(eo.TableCell,{className:"text-right pr-5",children:!d&&l?(0,t.jsx)("span",{className:"text-xs font-mono",children:"-"}):n!==s||d?(0,t.jsx)(el,{show:!0,beforePrice:n,afterPrice:s,tooltip:c,free:d}):(0,t.jsx)("span",{className:"text-xs font-mono",translate:"no",children:(0,er.formatCurrency)(n)})})]}),tM=({isDialogOpen:e,setIsDialogOpen:r,disabled:i,form:n,numReplicas:o,loading:l,onSubmit:c,message:d,buttonSize:u="medium"})=>{let{data:p}=(0,E.useSelectedProjectQuery)(),{data:m}=(0,D.useSelectedOrganizationQuery)(),f=(0,E.useIsAwsNimbusCloudProvider)(),h=p?.cloud_provider==="AWS_K8S",{formState:g,getValues:x}=n,{can:y}=(0,A.useAsyncCheckPermissions)(a.PermissionAction.UPDATE,"projects",{resource:{project_id:p?.id}}),{data:b}=(0,k.useProjectAddonsQuery)({projectRef:p?.ref}),v=m?.plan.id??"free",j=!!Object.keys(n.formState.dirtyFields).length,S=`Price change includes primary database and ${o} replica${o>1?"s":""}`,P=(0,s.useMemo)(()=>b?.available_addons??[],[b]),I=(0,s.useMemo)(()=>(0,W.getAvailableComputeOptions)(P,p?.cloud_provider),[P,p?.cloud_provider]),O=(0,W.calculateComputeSizePrice)({availableOptions:I,oldComputeSize:n.formState.defaultValues?.computeSize||"ci_micro",newComputeSize:n.getValues("computeSize"),plan:m?.plan.id??"free"}),T=(0,W.calculateDiskSizePrice)({planId:v,oldSize:g.defaultValues?.totalSize||0,oldStorageType:g.defaultValues?.storageType,newSize:x("totalSize"),newStorageType:x("storageType"),numReplicas:o}),_=(0,W.calculateIOPSPrice)({oldStorageType:n.formState.defaultValues?.storageType,oldProvisionedIOPS:n.formState.defaultValues?.provisionedIOPS||0,newStorageType:n.getValues("storageType"),newProvisionedIOPS:n.getValues("provisionedIOPS"),numReplicas:o}),N=(0,W.calculateThroughputPrice)({storageType:n.getValues("storageType"),newThroughput:n.getValues("throughput")||0,oldThroughput:n.formState.defaultValues?.throughput||0,numReplicas:o}),w=n.formState.defaultValues?.computeSize!==n.getValues("computeSize"),z=!h&&!f&&n.formState.defaultValues?.totalSize!==n.getValues("totalSize"),C=!h&&!f&&n.formState.defaultValues?.storageType!==n.getValues("storageType"),L=!h&&!f&&n.formState.defaultValues?.throughput!==n.getValues("throughput"),R=!h&&!f&&n.formState.defaultValues?.provisionedIOPS!==n.getValues("provisionedIOPS"),M=!h&&!f&&n.formState.defaultValues?.growthPercent!==n.getValues("growthPercent"),F=!h&&!f&&n.formState.defaultValues?.minIncrementGb!==n.getValues("minIncrementGb"),G=!h&&!f&&n.formState.defaultValues?.maxSizeGb!==n.getValues("maxSizeGb"),B=R||L&&"gp3"===n.getValues("storageType")||z;return(0,t.jsxs)(X.Dialog,{open:e,onOpenChange:r,children:[(0,t.jsx)(X.DialogTrigger,{asChild:!0,children:(0,t.jsx)(et.ButtonTooltip,{size:u,htmlType:"submit",type:"primary",onClick:async e=>{e.preventDefault(),await n.trigger()&&r(!0)},disabled:i||!j,tooltip:{content:{side:"bottom",text:y?i?"Current form values are invalid":void 0:"You need additional permissions to update disk configuration"}},children:"Review changes"})}),(0,t.jsxs)(X.DialogContent,{className:"min-w-[620px]",children:[(0,t.jsxs)(X.DialogHeader,{children:[(0,t.jsx)(X.DialogTitle,{children:"Review changes"}),(0,t.jsx)(X.DialogDescription,{children:"Changes will be applied shortly once confirmed."})]}),(0,t.jsx)(X.DialogSectionSeparator,{}),(w||B)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 p-5",children:[(0,t.jsx)(ee,{visible:w,title:"Resizing your Compute will trigger a project restart",description:"Project will restart automatically on confirmation."}),(0,t.jsx)(tL,{visible:B})]}),(0,t.jsx)(X.DialogSectionSeparator,{})]}),(0,t.jsxs)(eo.Table,{children:[(0,t.jsx)(eo.TableHeader,{className:"font-mono uppercase text-xs [&_th]:h-auto [&_th]:pb-2 [&_th]:pt-4",children:(0,t.jsx)(tR,{})}),(0,t.jsxs)(eo.TableBody,{className:"[&_td]:py-0 [&_tr]:h-[50px] [&_tr]:border-dotted",children:[w&&(0,t.jsx)(tV,{attribute:"Compute size",defaultValue:(0,W.mapAddOnVariantIdToComputeSize)(n.formState.defaultValues?.computeSize??"ci_nano"),newValue:(0,W.mapAddOnVariantIdToComputeSize)(n.getValues("computeSize")),unit:"-",beforePrice:Number(O.oldPrice),afterPrice:Number(O.newPrice),upgradeIncluded:m?.plan.id!=="free"&&p?.infra_compute_size==="nano"&&"ci_micro"===n.getValues("computeSize")}),C&&(0,t.jsx)(tV,{hidePrice:!0,attribute:"Storage Type",defaultValue:n.formState.defaultValues?.storageType??"",newValue:n.getValues("storageType"),unit:"-",beforePrice:0,afterPrice:0}),(R||C)&&(0,t.jsx)(tV,{attribute:"IOPS",defaultValue:n.formState.defaultValues?.provisionedIOPS?.toLocaleString()??0,newValue:n.getValues("provisionedIOPS")?.toLocaleString(),unit:"IOPS",beforePrice:Number(_.oldPrice),afterPrice:Number(_.newPrice),priceTooltip:o>0?S:void 0}),"gp3"===n.getValues("storageType")&&L&&(0,t.jsx)(tV,{attribute:"Throughput",defaultValue:n.formState.defaultValues?.throughput?.toLocaleString()??0,newValue:n.getValues("throughput")?.toLocaleString()??0,unit:"MB/s",beforePrice:Number(N.oldPrice),afterPrice:Number(N.newPrice),priceTooltip:o>0?S:void 0}),(z||C)&&(0,t.jsx)(tV,{attribute:"Disk size",defaultValue:n.formState.defaultValues?.totalSize?.toLocaleString()??0,newValue:n.getValues("totalSize")?.toLocaleString(),unit:"GB",beforePrice:Number(T.oldPrice),afterPrice:Number(T.newPrice),priceTooltip:o>0?S:void 0}),M&&(0,t.jsx)(tV,{attribute:"Growth percent",defaultValue:n.formState.defaultValues?.growthPercent??Y.DISK_AUTOSCALE_CONFIG_DEFAULTS.growthPercent,newValue:n.getValues("growthPercent")??Y.DISK_AUTOSCALE_CONFIG_DEFAULTS.growthPercent,unit:"%",beforePrice:0,afterPrice:0}),F&&(0,t.jsx)(tV,{attribute:"Min increment",defaultValue:n.formState.defaultValues?.minIncrementGb??Y.DISK_AUTOSCALE_CONFIG_DEFAULTS.minIncrementSize,newValue:n.getValues("minIncrementGb")??Y.DISK_AUTOSCALE_CONFIG_DEFAULTS.minIncrementSize,unit:"GB",beforePrice:0,afterPrice:0}),G&&(0,t.jsx)(tV,{attribute:"Max disk size",defaultValue:n.formState.defaultValues?.maxSizeGb?.toLocaleString()??Y.DISK_AUTOSCALE_CONFIG_DEFAULTS.maxSizeGb,newValue:n.getValues("maxSizeGb")?.toLocaleString()??Y.DISK_AUTOSCALE_CONFIG_DEFAULTS.maxSizeGb,unit:"GB",beforePrice:0,afterPrice:0})]})]}),o>0&&(0,t.jsx)("div",{className:"border-t px-4 py-2 text-sm text-foreground-lighter",children:S}),(0,t.jsxs)(X.DialogFooter,{children:[(0,t.jsx)(V.Button,{block:!0,size:"large",type:"default",onClick:()=>r(!1),children:"Cancel"}),(0,t.jsx)(V.Button,{block:!0,type:"warning",size:"large",htmlType:"submit",loading:l,onClick:async()=>{await c(n.getValues())},children:"Confirm changes"})]}),d&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(X.DialogSectionSeparator,{}),(0,t.jsx)(X.DialogSection,{children:(0,t.jsxs)(ea.Alert_Shadcn_,{variant:"error"===d.type?"destructive":"default",className:"",children:[(0,t.jsx)(J.WarningIcon,{}),(0,t.jsx)(ei.AlertTitle_Shadcn_,{children:d.message})]})})]})]})]})};var tF=e.i(416144),tG=e.i(24315),tB=e.i(61863),tU=e.i(378277),tK=e.i(903248),t$=e.i(538482);let tq=function({message:e="error",type:r,children:a}){return(0,t.jsx)(i.AnimatePresence,{children:e&&(0,t.jsx)(n.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:(0,t.jsx)($.Admonition,{type:"error"===r?"destructive":"default",className:"mt-2",title:e,children:a})})})},tQ=(0,s.forwardRef)(({children:e,label:r},a)=>(0,t.jsxs)("div",{ref:a,className:"flex -space-x-px",children:[e,(0,t.jsx)("div",{className:"border border-strong bg-surface-300 rounded-r-md px-3 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-foreground-lighter text-xs font-mono",children:r})})]}));tQ.displayName="InputPostTab";let tW=({form:e})=>{let{ref:r}=(0,d.useParams)(),{control:a,setValue:i,formState:{errors:n}}=e,{totalSize:o,growthPercent:s,maxSizeGb:l,minIncrementGb:c}=e.watch(),{error:u,isPending:p,isError:m}=j({projectRef:r}),f=s??Y.DISK_AUTOSCALE_CONFIG_DEFAULTS.growthPercent,h=c??Y.DISK_AUTOSCALE_CONFIG_DEFAULTS.minIncrementSize,g=n.maxSizeGb?Y.DISK_AUTOSCALE_CONFIG_DEFAULTS.maxSizeGb:l??Y.DISK_AUTOSCALE_CONFIG_DEFAULTS.maxSizeGb,x=Math.floor(f/100*o),y=Math.min(Math.max(Math.floor(o*f/100),h),200)+o,b=y<g?y:g,v=b-o;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(tB.FormField_Shadcn_,{name:"growthPercent",control:a,render:({field:e})=>(0,t.jsxs)(t$.FormItemLayout,{layout:"horizontal",label:"Autoscale growth percent",id:e.name,labelOptional:"Percentage of current disk size to grow",description:n.growthPercent?void 0:`This amounts to ${x} GB based on the current disk size of ${o} GB`,className:"[&>div>span]:text-foreground-lighter",children:[(0,t.jsx)(tQ,{label:"%",children:p?(0,t.jsx)("div",{className:(0,M.cn)((0,tF.InputVariants)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,t.jsx)(tK.Skeleton,{className:"w-10 h-4"})}):(0,t.jsx)(tG.FormControl_Shadcn_,{children:(0,t.jsx)(tU.Input_Shadcn_,{...e,type:"number",className:"flex-grow font-mono rounded-r-none max-w-20",value:e.value??void 0,disabled:m,onChange:e=>{i("growthPercent",""===e.target.value?null:e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},placeholder:String(Y.DISK_AUTOSCALE_CONFIG_DEFAULTS.growthPercent)})})}),u&&(0,t.jsx)(tq,{type:"error",message:u.message})]})}),(0,t.jsx)(tB.FormField_Shadcn_,{name:"minIncrementGb",control:a,render:({field:e})=>(0,t.jsxs)(t$.FormItemLayout,{layout:"horizontal",label:"Minimum increment",id:e.name,labelOptional:"Minimum value to autoscale disk size by",description:c&&c>x&&!n.minIncrementGb?"This value takes precedence as the minimum increment is larger than the growth percent":void 0,className:"[&>div>span]:text-foreground-lighter",children:[(0,t.jsx)(tQ,{label:"GB",children:p?(0,t.jsx)("div",{className:(0,M.cn)((0,tF.InputVariants)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,t.jsx)(tK.Skeleton,{className:"w-10 h-4"})}):(0,t.jsx)(tG.FormControl_Shadcn_,{children:(0,t.jsx)(tU.Input_Shadcn_,{...e,type:"number",className:"flex-grow font-mono rounded-r-none max-w-32",value:e.value??void 0,disabled:m,onChange:e=>{i("minIncrementGb",""===e.target.value?null:e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},placeholder:String(Y.DISK_AUTOSCALE_CONFIG_DEFAULTS.minIncrementSize)})})}),u&&(0,t.jsx)(tq,{type:"error",message:u.message})]})}),(0,t.jsx)(tB.FormField_Shadcn_,{name:"maxSizeGb",control:a,render:({field:e})=>(0,t.jsxs)(t$.FormItemLayout,{layout:"horizontal",label:"Maximum disk size",id:e.name,labelOptional:"Maximum size that the disk can grow to",className:"[&>div>span]:text-foreground-lighter",children:[(0,t.jsx)(tQ,{label:"GB",children:p?(0,t.jsx)("div",{className:(0,M.cn)((0,tF.InputVariants)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,t.jsx)(tK.Skeleton,{className:"w-10 h-4"})}):(0,t.jsx)(tG.FormControl_Shadcn_,{children:(0,t.jsx)(tU.Input_Shadcn_,{...e,type:"number",className:"flex-grow font-mono rounded-r-none max-w-32",value:e.value??void 0,disabled:m,onChange:e=>{i("maxSizeGb",""===e.target.value?null:e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},placeholder:String(Y.DISK_AUTOSCALE_CONFIG_DEFAULTS.maxSizeGb)})})}),u&&(0,t.jsx)(tq,{type:"error",message:u.message})]})}),(0,t.jsxs)($.Admonition,{type:"default",showIcon:!1,className:"[&>div]:text-foreground-light",children:["Disk size will automatically be expanded by"," ",(0,t.jsxs)("span",{className:"text-foreground",children:[String(v).length>4?v.toFixed(2):v," ","GB"]})," ","to a total of ",(0,t.jsxs)("span",{className:"text-foreground",children:[b," GB"]})," ","when the database reaches 90% of the disk size"]})]})};var tY=e.i(388019);let tZ=(0,tY.default)("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);var tH=e.i(250503);let tX=(0,tY.default)("Microchip",[["path",{d:"M18 12h2",key:"quuxs7"}],["path",{d:"M18 16h2",key:"zsn3lv"}],["path",{d:"M18 20h2",key:"9x5y9y"}],["path",{d:"M18 4h2",key:"1luxfb"}],["path",{d:"M18 8h2",key:"nxqzg"}],["path",{d:"M4 12h2",key:"1ltxp0"}],["path",{d:"M4 16h2",key:"8a5zha"}],["path",{d:"M4 20h2",key:"27dk57"}],["path",{d:"M4 4h2",key:"10groj"}],["path",{d:"M4 8h2",key:"18vq6w"}],["path",{d:"M8 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-1.5c-.276 0-.494.227-.562.495a2 2 0 0 1-3.876 0C9.994 2.227 9.776 2 9.5 2z",key:"1681fp"}]]);var tJ=e.i(196621),t0=e.i(937942),t1=e.i(912793),t2=e.i(965371),t3=e.i(449696),t5=e.i(871895),t4=e.i(524421);function t8({form:e,disabled:r}){let{ref:i}=(0,d.useParams)(),{data:n}=(0,D.useSelectedOrganizationQuery)(),{data:o,isPending:l}=(0,E.useSelectedProjectQuery)(),{hasAccess:c,isLoading:u}=(0,C.useCheckEntitlements)("instances.compute_update_available_sizes"),m=(0,t1.useIsFeatureEnabled)("project_addons:show_compute_price"),{computeSize:f,storageType:h}=e.watch(),{data:g,isPending:x,error:y}=(0,k.useProjectAddonsQuery)({projectRef:i}),b=l||x||u,{control:v,formState:j,setValue:S,trigger:P}=e,I=(0,s.useMemo)(()=>g?.available_addons??[],[g]),O=(0,s.useMemo)(()=>(0,W.getAvailableComputeOptions)(I,o?.cloud_provider),[I,o?.cloud_provider]),T=g?.selected_addons.find(e=>"pitr"===e.type),_=(0,W.calculateComputeSizePrice)({availableOptions:O,oldComputeSize:e.formState.defaultValues?.computeSize||"ci_micro",newComputeSize:e.getValues("computeSize"),plan:n?.plan.id??"free"}),N=o?.infra_compute_size??"nano",w=c&&"nano"===N;return(0,t.jsx)(tB.FormField_Shadcn_,{name:"computeSize",control:v,render:({field:s})=>(0,t.jsx)(t3.RadioGroupCard,{...s,onValueChange:e=>{S("computeSize",e,{shouldDirty:!0,shouldValidate:!0}),P("provisionedIOPS"),P("throughput")},defaultValue:s.value,disabled:r,children:(0,t.jsx)(t$.FormItemLayout,{layout:"horizontal",label:"Compute size",id:s.name,className:"gap-5",labelOptional:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(el,{className:"mb-2",show:j.isDirty&&j.dirtyFields.computeSize&&!j.errors.computeSize,beforePrice:Number(_.oldPrice),afterPrice:Number(_.newPrice),free:!!w&&"ci_micro"===f}),(0,t.jsx)("p",{className:"text-foreground-lighter",children:"Hardware resources allocated to your Postgres database"}),(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsx)(p.DocsButton,{abbrev:!1,href:`${L.DOCS_URL}/guides/platform/compute-and-disk`})}),(0,t.jsx)(t4.NoticeBar,{showIcon:!1,type:"default",className:"mt-3 border-violet-900 bg-violet-200 [&_h5]:text-violet-1100",visible:w&&"ci_nano"===e.watch("computeSize"),title:"Upgrade to Micro Compute",description:"This Project is already paying for Micro Compute. You can upgrade to Micro Compute at any time when convenient."})]}),children:(0,t.jsx)("div",{className:y?"":"grid gap-4 grid-cols-[repeat(auto-fit,minmax(min(100%,13em),1fr))]",children:b?Array(10).fill(0).map((e,r)=>(0,t.jsx)(tK.Skeleton,{className:"w-full h-[110px] rounded-md"},r)):y?(0,t.jsx)(tq,{message:"Failed to load Compute size options",type:"error",children:(0,t.jsx)("p",{children:y?.message})}):(0,t.jsxs)(t.Fragment,{children:[O.map(e=>{let a=(0,t2.getCloudProviderArchitecture)(o?.cloud_provider),i="ci_micro"===e.identifier&&!!T,s=n?.plan.id!=="free"&&o?.infra_compute_size!=="nano"&&"ci_nano"===e.identifier||i,l=n?.plan.id!=="free"&&o?.infra_compute_size==="nano"&&"ci_nano"===e.identifier?O.find(e=>"ci_micro"===e.identifier)?.price:e.price;return(0,t.jsx)(t3.RadioGroupCardItem,{showIndicator:!1,id:e.identifier,value:e.identifier,className:(0,M.cn)("relative text-sm text-left flex flex-col gap-0 px-0 py-3 [&_label]:w-full group] w-full h-[110px]",s&&"opacity-50"),disabled:r||s,label:(0,t.jsxs)(es.Tooltip,{children:[(0,t.jsx)(es.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)("div",{children:[w&&"ci_micro"===e.identifier&&(0,t.jsx)("div",{className:"absolute -top-4 -right-3 text-violet-1100 flex items-center gap-1 bg-surface-75 py-0.5 px-2 rounded-full border border-violet-900",children:(0,t.jsx)("span",{children:"No additional charge"})}),(0,t.jsxs)("div",{className:"w-full flex flex-col gap-3 justify-between",children:[(0,t.jsxs)("div",{className:"relative px-3 opacity-50 group-data-[state=checked]:opacity-100 flex justify-between",children:[(0,t.jsx)(t5.ComputeBadge,{className:"inline-flex font-semibold",infraComputeSize:e.name}),(0,t.jsx)("div",{className:"flex items-center space-x-1",children:s?(0,t.jsx)("div",{className:"bg border rounded-lg h-7 w-7 flex items-center justify-center",children:(0,t.jsx)(tH.Lock,{size:14})}):m&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:"text-foreground text-sm font-semibold",translate:"no",children:["$",l]}),(0,t.jsxs)("span",{className:"text-foreground-light translate-y-[1px]",children:[" ","/"," ","monthly"===e.price_interval?"month":"hour"]})]})})]}),(0,t.jsx)("div",{className:"w-full",children:(0,t.jsxs)("div",{className:"px-3 text-sm flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,t.jsx)(tX,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,t.jsxs)("span",{children:["ci_nano"===e.identifier&&"Up to ",e.meta?.memory_gb??0," GB memory"]})]}),(0,t.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,t.jsx)(tZ,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,t.jsxs)("span",{children:[e.meta?.cpu_cores??0,e.meta?.cpu_cores!=="Shared"&&`-core ${a}`," ","CPU"]})]})]})})]})]})}),i&&(0,t.jsxs)(es.TooltipContent,{side:"bottom",className:"w-64 text-center",children:["Project has PITR enabled which requires a minimum of Small compute. Please"," ",(0,t.jsx)(t0.InlineLink,{href:"/project/_/settings/addons?panel=pitr",children:"disable PITR"})," ","first before selecting Micro"]})]})},e.identifier)}),(0,t.jsx)(t3.RadioGroupCardItem,{id:"larger-compute",showIndicator:!1,value:"larger-compute",onClick:e=>e.preventDefault(),className:(0,M.cn)("relative text-sm text-left flex flex-col gap-0 px-0 py-3 [&_label]:w-full group] w-full h-[110px]"),label:(0,t.jsx)(tJ.SupportLink,{queryParams:{projectRef:i,category:a.SupportCategories.SALES_ENQUIRY,subject:"Enquiry about larger instance sizes"},children:(0,t.jsxs)("div",{className:"w-full flex flex-col gap-3 justify-between",children:[(0,t.jsxs)("div",{className:"relative px-3 flex justify-between",children:[(0,t.jsx)(t5.ComputeBadge,{infraComputeSize:">16XL"}),(0,t.jsx)("div",{className:"flex items-center space-x-1 opacity-50 ",children:(0,t.jsx)("span",{className:"text-foreground-light text-sm",children:"Contact Us"})})]}),(0,t.jsx)("div",{className:"w-full",children:(0,t.jsxs)("div",{className:"px-3 text-sm flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,t.jsx)(tX,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,t.jsx)("span",{children:"Custom memory"})]}),(0,t.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,t.jsx)(tZ,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,t.jsx)("span",{children:"Custom CPU"})]})]})})]})})},"larger-compute")]})})})})})}var t9=e.i(55956),t6=e.i(940009),t7=e.i(206413);let re=({isDirty:e,totalSize:r,usedSize:a,newTotalSize:o,oldStorageType:s,newStorageType:l})=>{let{ref:c}=(0,d.useParams)(),{data:u}=(0,N.useReadReplicasQuery)({projectRef:c}),p=(u??[]).filter(e=>e.identifier!==c),m=r*Y.DISK_PRICING[s]?.storage,f=o*Y.DISK_PRICING[l]?.storage;return 0===p.length?null:(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.AnimatePresence,{children:e&&(0,t.jsx)(n.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:(0,t.jsxs)(ea.Alert_Shadcn_,{variant:"default",className:"bg-transparent",children:[(0,t.jsx)(J.InfoIcon,{}),(0,t.jsx)(ei.AlertTitle_Shadcn_,{children:"Read replicas are provisioned with extra 25% disk size to account for WAL files"}),(0,t.jsxs)(t7.AlertDescription_Shadcn_,{children:["Each replica will have a disk size of ",o,"GB, and are billed separately",(0,t.jsx)("ul",{className:"list-disc pl-4 my-3 flex flex-col gap-2",children:p.map((e,r)=>(0,t.jsx)("li",{className:"marker:text-foreground-light",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{children:["ID: ",(0,t6.formatDatabaseID)(e.identifier)," (",e.region,"):"]}),(0,t.jsx)(el,{show:!0,beforePrice:m,afterPrice:f})]})},r))})]})]})})})})},rt=({isDirty:e,oldIOPS:r,newIOPS:a,oldStorageType:o,newStorageType:s})=>{let{ref:l}=(0,d.useParams)(),{data:c}=(0,N.useReadReplicasQuery)({projectRef:l}),u=(c??[]).filter(e=>e.identifier!==l),p=(r-Y.DISK_LIMITS[o]?.includedIops)*Y.DISK_PRICING[o]?.iops,m=(a-Y.DISK_LIMITS[s]?.includedIops)*Y.DISK_PRICING[s]?.iops;return 0===u.length?null:(0,t.jsx)(i.AnimatePresence,{initial:!1,children:e&&(0,t.jsx)(n.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:(0,t.jsxs)(ea.Alert_Shadcn_,{variant:"default",className:"bg-transparent",children:[(0,t.jsx)(J.InfoIcon,{}),(0,t.jsx)(ei.AlertTitle_Shadcn_,{children:"Read replica IOPS will also be updated to the same value"}),(0,t.jsx)(t7.AlertDescription_Shadcn_,{children:(0,t.jsx)("ul",{className:"list-disc pl-4 my-3 flex flex-col gap-2",children:u.map((e,r)=>(0,t.jsx)("li",{className:"marker:text-foreground-light",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{children:["ID: ",(0,t6.formatDatabaseID)(e.identifier)," (",e.region,"):"]}),(0,t.jsx)(el,{show:!0,beforePrice:p,afterPrice:m})]})},r))})})]})})})},rr=({isDirty:e,oldThroughput:r,newThroughput:a,oldStorageType:o,newStorageType:s})=>{let{ref:l}=(0,d.useParams)(),{data:c}=(0,N.useReadReplicasQuery)({projectRef:l}),u=(c??[]).filter(e=>e.identifier!==l),p=o===Y.DiskType.GP3?(r-Y.DISK_LIMITS[o].includedThroughput)*Y.DISK_PRICING[o]?.throughput:0,m=s===Y.DiskType.GP3?(a-Y.DISK_LIMITS[s].includedThroughput)*Y.DISK_PRICING[s]?.throughput:0;return 0===u.length?null:(0,t.jsx)(i.AnimatePresence,{initial:!1,children:e&&(0,t.jsx)(n.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:(0,t.jsxs)(ea.Alert_Shadcn_,{variant:"default",className:"bg-transparent",children:[(0,t.jsx)(J.InfoIcon,{}),(0,t.jsx)(ei.AlertTitle_Shadcn_,{children:"Read replica throughput will also be updated to the same value"}),(0,t.jsx)(t7.AlertDescription_Shadcn_,{children:(0,t.jsx)("ul",{className:"list-disc pl-4 my-3 flex flex-col gap-2",children:u.map((e,r)=>(0,t.jsx)("li",{className:"marker:text-foreground-light",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{children:["ID: ",(0,t6.formatDatabaseID)(e.identifier)," (",e.region,"):"]}),(0,t.jsx)(el,{show:!0,beforePrice:p,afterPrice:m})]})},r))})})]})})})};var ra=e.i(844809),ri=e.i(833655),rn=e.i(896975),ro=e.i(714403);async function rs({projectRef:e,connectionString:t},r){if(!e)throw Error("Project ref is required");if(!t)throw Error("Connection string is required");let{result:a}=await (0,ro.executeSql)({projectRef:e,connectionString:t,sql:`
    SELECT
  (
    SELECT
      SUM(pg_database_size(pg_database.datname)) AS db_size_bytes
    FROM
      pg_database
  ),
  (
    SELECT SUM(size)
    FROM
      pg_ls_waldir()
  ) AS wal_size_bytes`},r);return a[0]}let rl=({form:e})=>{let{ref:r}=(0,d.useParams)(),{resolvedTheme:a}=(0,rn.useTheme)(),{formState:o,watch:l}=e,c=a?.includes("dark"),{data:u}=(0,E.useSelectedProjectQuery)(),{data:p}=T({projectRef:r}),{data:m}=(({projectRef:e,connectionString:t},{enabled:r=!0,...a}={})=>(0,x.useQuery)({queryKey:b.configKeys.diskBreakdown(e),queryFn:({signal:r})=>rs({projectRef:e,connectionString:t},r),enabled:r&&void 0!==e,...a}))({projectRef:r,connectionString:u?.connectionString}),f=(0,s.useMemo)(()=>({availableBytes:p?.metrics.fs_avail_bytes??0,totalUsedBytes:p?.metrics.fs_used_bytes??0,totalDiskSizeBytes:p?.metrics.fs_size_bytes,dbSizeBytes:Math.max(0,m?.db_size_bytes??0),walSizeBytes:Math.max(0,m?.wal_size_bytes??0),systemBytes:Math.max(0,(p?.metrics.fs_used_bytes??0)-(m?.db_size_bytes??0)-(m?.wal_size_bytes??0))}),[p,m]),h=void 0!==o.dirtyFields.totalSize&&m,g=l("totalSize"),y=o.defaultValues?.totalSize||0,v=Math.round((f?.totalUsedBytes??0)/L.GB*100)/100,j=Math.min(v/y*100,100),S=Math.round((f?.dbSizeBytes??0)/L.GB*100)/100,P=0===y?0:Math.min(S/y*100,100),I=Math.min(S/g*100,100),O=Math.round((f?.walSizeBytes??0)/L.GB*100)/100,_=0===y?0:Math.min(O/y*100,100),N=Math.min(O/g*100,100),w=Math.round((f?.systemBytes??0)/L.GB*100)/100,k=0===y?0:Math.min(w/y*100,100),z=Math.min(w/g*100,100),C=100*Y.AUTOSCALING_THRESHOLD,A=100*Y.AUTOSCALING_THRESHOLD;return(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"flex items-center h-6 gap-3",children:(0,t.jsxs)("span",{className:"text-foreground-light text-sm font-mono flex items-center gap-2",children:[v.toFixed(2),(0,t.jsx)("span",{children:"GB used of "}),(0,t.jsx)("span",{className:"text-foreground font-semibold -mt-[2px]",children:(0,t.jsx)(ra.default,{value:g,style:{lineHeight:.8},className:"font-mono"})})," ","GB"]})}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:(0,M.cn)("h-[35px] relative border rounded-sm w-full transition overflow-visible",h?"bg-selection border border-brand":"bg-surface-300"),children:[(0,t.jsx)(i.AnimatePresence,{children:(0,t.jsx)(n.motion.div,{initial:{rotateY:90,zIndex:2},animate:{rotateY:0,zIndex:1},exit:{rotateY:-90,zIndex:2},transition:{duration:.3},style:{transformOrigin:"left center",backfaceVisibility:"hidden"},className:"absolute inset-0 rounded-sm overflow-hidden",children:(0,t.jsxs)("div",{className:"h-full flex",children:[(0,t.jsx)("div",{className:"relative overflow-hidden transition-all duration-500 ease-in-out bg-foreground",style:{width:`${h?I:P}%`},children:(0,t.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:`repeating-linear-gradient(
                            -45deg,
                            ${c?"rgba(0,0,0,0.1)":"rgba(255,255,255,0.1)"},
                            ${c?"rgba(0,0,0,0.1) 1px":"rgba(255,255,255,0.1) 1px"},
                            transparent 1px,
                            transparent 4px
                          )`}})}),(0,t.jsx)("div",{className:"relative overflow-hidden transition-all duration-500 ease-in-out bg-_secondary",style:{width:`${h?N:_}%`}}),(0,t.jsx)("div",{className:"relative overflow-hidden transition-all duration-500 ease-in-out bg-destructive-500",style:{width:`${h?z:k}%`}}),!h&&(0,t.jsx)("div",{className:"bg-transparent-800 border-r transition-all duration-500 ease-in-out",style:{width:`${C-j<=0?0:C-j}%`}})]})},"currentBar")}),(0,t.jsx)(i.AnimatePresence,{children:h&&(0,t.jsx)(n.motion.div,{initial:{opacity:0,x:4},animate:{opacity:1,x:0},exit:{opacity:0,x:4},transition:{duration:.12,delay:.12},className:"absolute right-2 top-0 flex items-center h-full",children:(0,t.jsx)(en.Badge,{variant:"success",children:"New disk size"})})})]}),(0,t.jsx)(i.AnimatePresence,{initial:!0,children:!h&&(0,t.jsx)(n.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.1},className:"absolute h-8 w-full -mx-[2px]",children:(0,t.jsxs)("div",{className:"absolute top-0 -left-0 h-full flex items-center transition-all duration-500 ease-in-out",style:{left:`${h?A:C}%`},children:[(0,t.jsxs)(es.Tooltip,{children:[(0,t.jsx)(es.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)("div",{className:"absolute right-full bottom-0 border mr-2 px-2 py-1 bg-surface-400 rounded text-xs text-foreground-light whitespace-nowrap flex items-center gap-x-1",children:["Autoscaling ",(0,t.jsx)(ri.Info,{size:12})]})}),(0,t.jsxs)(es.TooltipContent,{side:"bottom",className:"w-[310px] flex flex-col gap-y-1",children:[(0,t.jsx)("p",{children:"Supabase expands your disk storage automatically when the database reached 90% of the disk size. However, any disk modifications, including auto-scaling, can only take place once every 6 hours."}),(0,t.jsxs)("p",{children:["If within those 6 hours you reach 95% of the disk space, your project"," ",(0,t.jsx)("span",{className:"text-destructive-600",children:"will enter read-only mode."})]})]})]}),(0,t.jsx)("div",{className:"w-px h-full bg-border"})]})},"currentSize")})]}),!h&&(0,t.jsxs)("div",{className:"flex items-center space-x-3 text-xs text-foreground-lighter",children:[(0,t.jsx)(rc,{name:"Database",size:f.dbSizeBytes,color:"bg-foreground",description:"Total space on disk used by your database (tables, indexes, data, ...)."}),(0,t.jsx)(rc,{name:"WAL",size:f.walSizeBytes,color:"bg-_secondary",description:"Total space on disk used by the write-ahead log."}),(0,t.jsx)(rc,{name:"System",size:f.systemBytes,color:"bg-destructive-500",description:"Reserved space for the system to ensure your database runs smoothly. You cannot modify this."}),(0,t.jsx)(rc,{name:"Available space",size:f.availableBytes,color:"bg-border",description:"Total available space on the disk left."})]}),(0,t.jsxs)("p",{className:"text-xs text-foreground-lighter my-4",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Note:"})," Disk Size refers to the total space your project occupies on disk, including the database itself (currently"," ",(0,t.jsx)("span",{children:(0,er.formatBytes)(f?.dbSizeBytes,2,"GB")}),"), additional files like the write-ahead log (currently"," ",(0,t.jsx)("span",{children:(0,er.formatBytes)(f?.walSizeBytes,2,"GB")}),"), and other system resources (currently ",(0,t.jsx)("span",{children:(0,er.formatBytes)(f?.systemBytes,2,"GB")}),"). Data can take 5 minutes to refresh."]})]})},rc=({name:e,description:r,color:a,size:i})=>(0,t.jsxs)(es.Tooltip,{children:[(0,t.jsx)(es.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)("div",{className:"flex items-center hover:cursor-help z-10",children:[(0,t.jsx)("div",{className:(0,M.cn)("w-2 h-2 rounded-full mr-2",a)}),(0,t.jsx)("span",{children:e})]})}),(0,t.jsxs)(es.TooltipContent,{side:"bottom",className:"flex flex-col gap-y-1 max-w-xs",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:(0,M.cn)("w-2 h-2 rounded-full mr-2",a)}),(0,t.jsxs)("span",{children:[e," - ",(0,er.formatBytes)(i,2,"GB")]})]}),(0,t.jsx)("p",{children:r})]})]});function rd({actions:e,form:r}){let{watch:a}=r,o=a("totalSize"),s=a("storageType")===Y.DiskType.GP3&&o>Y.DISK_LIMITS[Y.DiskType.GP3].maxStorage,l=Y.DISK_TYPE_OPTIONS.find(e=>e.type===Y.DiskType.IO2);return(0,t.jsx)(i.AnimatePresence,{initial:!1,children:s&&(0,t.jsx)(n.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.15},children:(0,t.jsx)($.Admonition,{type:"default",title:`You will need to use ${l?.name} to use a larger Disk size`,children:(0,t.jsx)("div",{className:"flex flex-col gap-2",children:e&&(0,t.jsx)("div",{children:e})})})})})}function ru({isDirty:e,onClick:r}){return(0,t.jsx)(i.AnimatePresence,{initial:!1,children:e&&(0,t.jsx)(n.motion.div,{initial:{opacity:0,scale:.95,x:-2},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.95,x:-2},transition:{duration:.12},children:(0,t.jsx)(V.Button,{htmlType:"button",type:"default",size:"small",className:"px-2 text-foreground-light",onClick:r,children:(0,t.jsx)(H.RotateCcw,{className:"h-4 w-4","aria-hidden":"true"})})},"reset-disksize")})}function rp({form:e,disableInput:r,setAdvancedSettingsOpenState:a}){let{ref:i}=(0,d.useParams)(),{control:n,formState:o,setValue:s,trigger:l,getValues:c,resetField:u,watch:m}=e,{data:f}=(0,D.useSelectedOrganizationQuery)(),{data:g}=(0,E.useSelectedProjectQuery)(),{isPending:x,error:y,isError:b}=(0,h.useDiskAttributesQuery)({projectRef:i},{enabled:g&&"FLY"!==g.cloud_provider}),{data:v,error:j,isError:S}=T({projectRef:i},{enabled:g&&"FLY"!==g.cloud_provider}),P=j||y,I=S||b,O=10>t9.default.utc().diff(t9.default.utc(g?.inserted_at),"minute")||g?.status==="COMING_UP",_=m("storageType"),N=m("totalSize"),w=f?.plan.id??"free",{includedDiskGB:k}=Y.PLAN_DETAILS?.[w]??{},z=k[_],C=(0,W.calculateDiskSizePrice)({planId:w,oldSize:o.defaultValues?.totalSize||0,oldStorageType:o.defaultValues?.storageType,newSize:c("totalSize"),newStorageType:c("storageType")}),A=!!o.dirtyFields.totalSize,R=Math.round((v?.metrics.fs_used_bytes??0)/L.GB*100)/100;return(0,t.jsxs)("div",{id:"disk-size",className:"grid @xl:grid-cols-12 gap-5",children:[(0,t.jsxs)("div",{className:"col-span-4",children:[(0,t.jsx)(tB.FormField_Shadcn_,{name:"totalSize",control:n,render:({field:e})=>(0,t.jsx)(t$.FormItemLayout,{label:"Disk Size",layout:"vertical",id:e.name,children:(0,t.jsxs)("div",{className:"relative flex gap-2 items-center",children:[(0,t.jsx)(tQ,{label:"GB",children:x?(0,t.jsx)("div",{className:(0,M.cn)((0,tF.InputVariants)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,t.jsx)(tK.Skeleton,{className:"w-10 h-4"})}):(0,t.jsx)(tG.FormControl_Shadcn_,{children:(0,t.jsx)(tU.Input_Shadcn_,{type:"number",id:e.name,...e,disabled:r||I,className:"w-32 font-mono rounded-r-none",onWheel:e=>e.currentTarget.blur(),onChange:e=>{s("totalSize",e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0}),l("provisionedIOPS"),l("throughput")},min:z})})}),(0,t.jsx)(ru,{isDirty:A,onClick:()=>{u("totalSize"),l("provisionedIOPS")}})]})})}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(el,{className:"mt-1",beforePrice:Number(C.oldPrice),afterPrice:Number(C.newPrice),show:o.isDirty&&!o.errors.totalSize&&C.oldPrice!==C.newPrice}),(0,t.jsxs)("span",{className:"text-foreground-lighter text-sm",children:[z>0&&f?.plan.id&&`Your plan includes ${z} GB of disk size for ${_}.`,(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsx)(p.DocsButton,{abbrev:!1,href:`${L.DOCS_URL}/guides/platform/database-size`})})]}),(0,t.jsx)(rd,{form:e,actions:(0,t.jsx)(V.Button,{type:"default",onClick:()=>{s("storageType","io2"),l("provisionedIOPS"),l("totalSize"),a(!0)},children:"Change to High Performance SSD"})})]})]}),(0,t.jsxs)("div",{className:"col-span-8",children:[(0,t.jsx)(rl,{form:e}),O?(0,t.jsx)(tq,{message:"Disk size data is not available for ~10 minutes after project creation",type:"error"}):P&&(0,t.jsx)(tq,{message:"Failed to load disk size data",type:"error",children:P?.message}),(0,t.jsx)(re,{isDirty:void 0!==o.dirtyFields.totalSize,totalSize:1.25*(o.defaultValues?.totalSize||0),usedSize:R,newTotalSize:1.25*N,oldStorageType:o.defaultValues?.storageType,newStorageType:c("storageType")})]})]})}function rm({actions:e,form:r}){let{watch:a}=r,o=a("computeSize"),s=a("provisionedIOPS"),l=(0,W.calculateComputeSizeRequiredForIops)(s),c=s>(0,W.calculateMaxIopsAllowedForComputeSize)(o??"ci_micro")&&!Y.RESTRICTED_COMPUTE_FOR_IOPS_ON_GP3.includes(o);return(0,t.jsx)(i.AnimatePresence,{initial:!1,children:c&&(0,t.jsx)(n.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.15},children:(0,t.jsx)($.Admonition,{type:"default",title:`Your Compute size can only support a baseline IOPS of ${Y.COMPUTE_BASELINE_IOPS[o]}`,children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:["To achieve sustained IOPS performance we recommend using the"," ",(0,t.jsx)("span",{className:"text-foreground",children:(0,W.mapAddOnVariantIdToComputeSize)(l)})," ","compute size."]})}),e&&(0,t.jsx)("div",{children:e})]})})})})}function rf({form:e,disableInput:r}){let{ref:a}=(0,d.useParams)(),{control:i,formState:n,setValue:o,trigger:s,getValues:l,watch:c}=e,u=c("storageType"),p=c("computeSize"),m=c("provisionedIOPS")??0,{isPending:f,error:g,isError:x}=(0,h.useDiskAttributesQuery)({projectRef:a}),y=(0,W.calculateIOPSPrice)({oldStorageType:n.defaultValues?.storageType,oldProvisionedIOPS:n.defaultValues?.provisionedIOPS||0,newStorageType:l("storageType"),newProvisionedIOPS:l("provisionedIOPS")}),b=Y.RESTRICTED_COMPUTE_FOR_IOPS_ON_GP3.includes(p)&&"gp3"===u;return(0,t.jsx)(tB.FormField_Shadcn_,{control:i,name:"provisionedIOPS",render:({field:a})=>{let i=(0,W.calculateComputeSizeRequiredForIops)(m);return(0,t.jsxs)(t$.FormItemLayout,{layout:"horizontal",label:"IOPS",id:a.name,description:(0,t.jsxs)("span",{className:"flex flex-col gap-y-2",children:[(0,t.jsx)("p",{children:"Use higher IOPS for high-throughput apps."}),(0,t.jsx)(rm,{form:e,actions:(0,t.jsxs)(V.Button,{type:"default",onClick:()=>{o("computeSize",i??"ci_nano"),s("provisionedIOPS")},children:["Update to ",(0,W.mapAddOnVariantIdToComputeSize)(i)]})}),!n.errors.provisionedIOPS&&(0,t.jsx)(rt,{isDirty:void 0!==n.dirtyFields.provisionedIOPS,oldIOPS:n.defaultValues?.provisionedIOPS??0,newIOPS:a.value,oldStorageType:n.defaultValues?.storageType,newStorageType:l("storageType")})]}),labelOptional:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(el,{show:(u!==n.defaultValues?.storageType||"gp3"===u&&a.value!==n.defaultValues?.provisionedIOPS)&&!n.errors.provisionedIOPS&&!b,beforePrice:Number(y.oldPrice),afterPrice:Number(y.newPrice),className:"mb-2"}),(0,t.jsx)("p",{className:"text-foreground-lighter",children:"Input/output operations per second."})]}),children:[(0,t.jsx)(tQ,{label:"IOPS",children:f?(0,t.jsx)("div",{className:(0,M.cn)((0,tF.InputVariants)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,t.jsx)(tK.Skeleton,{className:"w-10 h-4"})}):(0,t.jsx)(tG.FormControl_Shadcn_,{children:(0,t.jsx)(tU.Input_Shadcn_,{type:"number",className:"flex-grow font-mono rounded-r-none max-w-32",...a,value:a.value,disabled:r||b||x,onChange:e=>{o("provisionedIOPS",e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})}})})}),g&&(0,t.jsx)(tq,{type:"error",message:g.message})]})}})}var rh=e.i(449123),rg=e.i(451031),rx=e.i(831927),ry=e.i(156722),rb=e.i(719754);let rv=["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","us-east-1","us-east-2","us-west-1","us-west-2"];function rj({form:e,disableInput:r}){let{control:a,trigger:i}=e,{data:n}=(0,E.useSelectedProjectQuery)(),{ref:o}=(0,d.useParams)(),s=rv.includes(n?.region??""),{isPending:l,error:c,isError:u}=(0,h.useDiskAttributesQuery)({projectRef:o});return(0,t.jsx)(tB.FormField_Shadcn_,{name:"storageType",control:a,render:({field:a})=>(0,t.jsxs)(t$.FormItemLayout,{layout:"horizontal",label:"Storage type",children:[(0,t.jsxs)(rh.Select_Shadcn_,{...a,onValueChange:async t=>{a.onChange(t),"gp3"===t?!e.getFieldState("provisionedIOPS").isDirty&&(!e.getValues("provisionedIOPS")||e.getValues("provisionedIOPS")<Y.DISK_LIMITS[Y.DiskType.GP3].minIops)&&e.setValue("provisionedIOPS",Y.DISK_LIMITS[Y.DiskType.GP3].minIops):!e.getFieldState("provisionedIOPS").isDirty&&(!e.getValues("provisionedIOPS")||e.getValues("provisionedIOPS")<Y.DISK_LIMITS[Y.DiskType.IO2].minIops)&&e.setValue("provisionedIOPS",Y.DISK_LIMITS[Y.DiskType.IO2].minIops),await i("provisionedIOPS"),await i("totalSize")},defaultValue:a.value,disabled:r||u,children:[l?(0,t.jsx)(tK.Skeleton,{className:(0,M.cn)((0,V.buttonVariants)({size:"small"}),"h-14 min-w-[420px] duration-[2s]")}):(0,t.jsx)(tG.FormControl_Shadcn_,{children:(0,t.jsx)(ry.SelectTrigger_Shadcn_,{className:"h-14 max-w-[420px]",children:(0,t.jsx)(rb.SelectValue_Shadcn_,{})})}),(0,t.jsx)(rg.SelectContent_Shadcn_,{children:(0,t.jsx)(t.Fragment,{children:Y.DISK_TYPE_OPTIONS.map(e=>{let a="io2"===e.type&&!s;return(0,t.jsxs)(es.Tooltip,{children:[(0,t.jsx)(es.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(rx.SelectItem_Shadcn_,{disabled:r||a,value:e.type,className:(0,M.cn)(a&&"!pointer-events-auto"),children:(0,t.jsxs)("div",{className:"flex flex-col gap-0 items-start",children:[(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)("span",{className:"text-sm text-foreground",children:e.name})," ",(0,t.jsx)(en.Badge,{variant:"default",className:"font-mono",children:e.type})]}),(0,t.jsx)("p",{className:"text-foreground-light",children:e.description})]})},e.type)}),a&&(0,t.jsxs)(es.TooltipContent,{side:"right",className:"w-64",children:["IO2 Volume Type is not available in your project's region (",n?.region,"). More information available"," ",(0,t.jsx)(t0.InlineLink,{href:"https://docs.aws.amazon.com/ebs/latest/userguide/provisioned-iops.html#io2-bx-considerations",children:"here"}),"."]})]},e.type)})})})]}),c&&(0,t.jsx)(tq,{type:"error",message:c.message})]})})}function rS({form:e,disableInput:r}){let{ref:a}=(0,d.useParams)(),{control:o,formState:l,setValue:c,getValues:u,watch:p}=e,m=p("storageType"),f=p("totalSize"),g=p("computeSize"),x=l.defaultValues?.throughput,{isPending:y,error:b}=(0,h.useDiskAttributesQuery)({projectRef:a}),v=(0,W.calculateThroughputPrice)({storageType:e.getValues("storageType"),newThroughput:e.getValues("throughput")||0,oldThroughput:e.formState.defaultValues?.throughput||0}),j=Y.RESTRICTED_COMPUTE_FOR_IOPS_ON_GP3.includes(g)&&"gp3"===m;return(0,s.useEffect)(()=>{if("io2"===m)c("throughput",void 0);else if("gp3"===m){let t=e.getValues("throughput"),{minThroughput:r,maxThroughput:a}=Y.DISK_LIMITS[Y.DiskType.GP3];(!t||t<r||t>a)&&c("throughput",r)}},[m,f,c,e]),(0,t.jsx)(i.AnimatePresence,{initial:!1,children:"gp3"===u("storageType")&&(0,t.jsx)(n.motion.div,{initial:{opacity:0,x:-4,height:0},animate:{opacity:1,x:0,height:"auto"},exit:{opacity:0,x:-4,height:0},transition:{duration:.1},style:{overflow:"hidden"},children:(0,t.jsx)(tB.FormField_Shadcn_,{name:"throughput",control:o,render:({field:e})=>(0,t.jsxs)(t$.FormItemLayout,{label:"Throughput",layout:"horizontal",description:(0,t.jsxs)("span",{className:"flex flex-col gap-y-2",children:[(0,t.jsx)("p",{children:"Higher throughput suits applications with high data transfer needs."}),!l.errors.throughput&&(0,t.jsx)(rr,{isDirty:void 0!==l.dirtyFields.throughput,oldThroughput:x??0,newThroughput:e.value??0,oldStorageType:l.defaultValues?.storageType,newStorageType:u("storageType")})]}),labelOptional:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(el,{show:l.isDirty&&l.dirtyFields.throughput&&!l.errors.throughput,beforePrice:Number(v.oldPrice),afterPrice:Number(v.newPrice),className:"mb-2"}),(0,t.jsx)("p",{className:"text-foreground-lighter",children:"Amount of data read/written per second."})]}),children:[(0,t.jsx)(tQ,{label:"MB/s",children:y?(0,t.jsx)("div",{className:(0,M.cn)((0,tF.InputVariants)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,t.jsx)(tK.Skeleton,{className:"w-10 h-4"})}):(0,t.jsx)(tG.FormControl_Shadcn_,{children:(0,t.jsx)(tU.Input_Shadcn_,{type:"number",...e,value:e.value,onChange:e=>{c("throughput",e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},className:"flex-grow font-mono rounded-r-none max-w-32",disabled:r||j||"io2"===m})})}),b&&(0,t.jsx)(tq,{type:"error",message:b.message})]})})},"throughPutContainer")})}let rP=({seconds:e})=>{let r=Math.floor(e/3600),a=Math.floor(e%3600/60),i={minimumIntegerDigits:2},n=e=>e.toString().padStart(2,"0");return(0,t.jsxs)("span",{className:"inline-flex gap-2",children:[(0,t.jsx)("span",{className:"text-foreground-lighter text-sm p-0",children:"Time remaining: "}),(0,t.jsxs)("span",{className:"text-foreground text-sm font-mono flex items-center gap-0",children:[(0,t.jsx)(ra.default,{format:i,value:Number(n(r))}),"hr",(0,t.jsx)(ra.default,{format:i,value:Number(n(a))}),"m",(0,t.jsx)(ra.default,{format:i,value:Number(n(e%60))})]})]})};var rI=e.i(627069);function rO(){let{ref:e}=(0,d.useParams)(),[r,a]=(0,s.useState)(0),{remainingDuration:o,error:l,isSuccess:c}=(0,h.useRemainingDurationForDiskAttributeUpdate)({projectRef:e}),u=r/g.COOLDOWN_DURATION*100;return(0,s.useEffect)(()=>{o>0&&a(o)},[o]),(0,s.useEffect)(()=>{if(r<=0)return;let e=setInterval(()=>{a(Math.max(0,r-1))},1e3);return()=>clearInterval(e)},[r]),(0,t.jsxs)(i.AnimatePresence,{children:[r>0&&c&&(0,t.jsx)(n.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:(0,t.jsx)(rI.Card,{className:"px-2 rounded bg-surface-100",children:(0,t.jsxs)(rI.CardContent,{className:"py-3 flex gap-3 px-3 items-start",children:[(0,t.jsx)(tE,{progress:u}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-foreground text-sm p-0",children:"6-hour cooldown period is in progress"}),(0,t.jsx)("p",{className:"text-foreground-lighter text-sm p-0",children:"You can't modify your disk configuration again until the 6-hour cool down period ends."})]}),(0,t.jsx)(rP,{seconds:r})]})]})})}),l&&(0,t.jsx)(tq,{message:l.message,type:"error"})]})}var rT=e.i(215261);function r_(){let{data:e}=(0,D.useSelectedOrganizationQuery)(),{data:r}=(0,E.useSelectedProjectQuery)(),a=e?.plan.id!=="free"&&!e?.usage_billing_enabled&&r?.cloud_provider!=="FLY";return(0,t.jsx)(i.AnimatePresence,{children:a&&(0,t.jsx)(n.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:(0,t.jsxs)($.Admonition,{type:"default",children:[(0,t.jsx)(ei.AlertTitle_Shadcn_,{children:"Disable spend cap to manage Disk configuration"}),(0,t.jsx)(t7.AlertDescription_Shadcn_,{children:"To access disk management features, you need to disable your spend cap. These features offer more flexibility and control over your database disk size."}),(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsx)(rT.default,{href:`/org/${e?.slug}/billing?panel=costControl`,className:(0,M.cn)((0,V.buttonVariants)({type:"default",size:"tiny"})),children:"Disable spend cap"})})]})})})}function rN(){let{ref:e}=(0,d.useParams)(),{data:x}=(0,E.useSelectedProjectQuery)(),{data:y}=(0,D.useSelectedOrganizationQuery)(),{setProjectStatus:v}=(0,_.useSetProjectStatus)(),O=y?.plan.id!=="free"&&!y?.usage_billing_enabled&&x?.cloud_provider!=="FLY",{data:H}=(0,z.useResourceWarningsQuery)({ref:e}),X=(H??[])?.find(e=>e.project===x?.ref),J=X?.is_readonly_mode_enabled,et=(0,E.useIsAwsCloudProvider)(),er=(0,E.useIsAwsK8sCloudProvider)(),ea=(0,E.useIsAwsNimbusCloudProvider)(),{can:ei,isSuccess:en}=(0,A.useAsyncCheckPermissions)(a.PermissionAction.UPDATE,"projects",{resource:{project_id:x?.id}}),{hasAccess:eo,isSuccess:es}=(0,C.useCheckEntitlements)("instances.compute_update_available_sizes"),[el,ec]=(0,s.useState)(!1),[ed,eu]=(0,s.useState)(!1),[ep,em]=(0,s.useState)(null),[ef,eh]=(0,s.useState)(!1),{data:eg,isSuccess:ex}=(0,N.useReadReplicasQuery)({projectRef:e}),{data:ey,isSuccess:eb}=(0,h.useDiskAttributesQuery)({projectRef:e},{refetchInterval:ed,refetchOnWindowFocus:!1,enabled:null!=x&&et}),{isSuccess:ev}=(0,k.useProjectAddonsQuery)({projectRef:e}),{isWithinCooldownWindow:ej,isSuccess:eS}=(0,h.useRemainingDurationForDiskAttributeUpdate)({projectRef:e,enabled:null!=x&&et}),{data:eP,isSuccess:eI}=T({projectRef:e},{enabled:null!=x&&et}),{data:eO,isSuccess:eT}=j({projectRef:e},{enabled:null!=x&&et}),e_=x?.infra_compute_size?(0,W.mapComputeSizeNameToAddonVariantId)(x?.infra_compute_size):void 0,{type:eN,iops:ew,throughput_mbps:ek,size_gb:ez}=ey?.attributes??{size_gb:0,iops:0},{growth_percent:eC,max_size_gb:eA,min_increment_gb:eD}=eO??{},eE={storageType:eN??Y.DiskType.GP3,provisionedIOPS:ew,throughput:ek,totalSize:ez,computeSize:e_,growthPercent:eC,minIncrementGb:eD,maxSizeGb:eA},eL=(0,l.useForm)({resolver:(0,r.zodResolver)((({defaultTotalSize:e,cloudProvider:t})=>{let r="FLY"!==t&&"AWS_NIMBUS"!==t&&"AWS_K8S"!==t;return Z.superRefine((t,a)=>{let{storageType:i,totalSize:n,provisionedIOPS:o,throughput:s,maxSizeGb:l}=t;if(r&&n<8&&a.addIssue({code:Q.z.ZodIssueCode.custom,message:"Allocated disk size must be at least 8 GB.",path:["totalSize"]}),r&&n<e&&a.addIssue({code:Q.z.ZodIssueCode.custom,message:"Disk size cannot be reduced in size. Reduce your database size and then head to the Infrastructure settings and go through a Postgres version upgrade to right-size your disk.",path:["totalSize"]}),r&&l&&l<n&&a.addIssue({code:Q.z.ZodIssueCode.custom,message:`Max disk size cannot be lower than the current disk size. Must be at least ${(0,W.formatNumber)(n)} GB.`,path:["maxSizeGb"]}),r&&"io2"===i){o>Y.DISK_LIMITS[Y.DiskType.IO2].maxIops&&a.addIssue({code:Q.z.ZodIssueCode.custom,message:`IOPS can not exceed ${(0,W.formatNumber)(Y.DISK_LIMITS[Y.DiskType.IO2].maxIops)} for io2 Disk type. Please reach out to support if you need higher IOPS than this.`,path:["provisionedIOPS"]});let e=(0,W.calculateMaxIopsAllowedForDiskSizeWithio2)(n);if(o<Y.DISK_LIMITS[Y.DiskType.IO2].minIops)a.addIssue({code:Q.z.ZodIssueCode.custom,message:`Provisioned IOPS must be at least ${(0,W.formatNumber)(Y.DISK_LIMITS[Y.DiskType.IO2].minIops)}`,path:["provisionedIOPS"]});else if(o>e)if(n>=8){let t=(0,W.calculateDiskSizeRequiredForIopsWithIo2)(o);t>n&&a.addIssue({code:Q.z.ZodIssueCode.custom,message:`Larger Disk size of at least ${(0,W.formatNumber)(t)} GB required. Current max is ${(0,W.formatNumber)(e)} IOPS.`,path:["provisionedIOPS"]})}else a.addIssue({code:Q.z.ZodIssueCode.custom,message:"Invalid IOPS value due to small disk size",path:["provisionedIOPS"]});void 0!==s&&a.addIssue({code:Q.z.ZodIssueCode.custom,message:"Throughput is not configurable for io2.",path:["throughput"]}),n>Y.DISK_LIMITS[Y.DiskType.IO2].maxStorage&&a.addIssue({code:Q.z.ZodIssueCode.custom,message:`Allocated disksize must not exceed ${(0,W.formatNumber)(Y.DISK_LIMITS[Y.DiskType.IO2].maxStorage)} GB `,path:["totalSize"]})}if(r&&"gp3"===i){let e=(0,W.calculateMaxIopsAllowedForDiskSizeWithGp3)(n);if(o>Y.DISK_LIMITS[Y.DiskType.GP3].maxIops&&a.addIssue({code:Q.z.ZodIssueCode.custom,message:`IOPS can not exceed ${(0,W.formatNumber)(Y.DISK_LIMITS[Y.DiskType.GP3].maxIops)} for GP3 Disk. Change the Disk type to io2 for higher IOPS support.`,path:["provisionedIOPS"]}),o<Y.DISK_LIMITS[Y.DiskType.GP3].minIops)a.addIssue({code:Q.z.ZodIssueCode.custom,message:`IOPS must be at least ${(0,W.formatNumber)(Y.DISK_LIMITS[Y.DiskType.GP3].minIops)}`,path:["provisionedIOPS"]});else if(o>e)if(n>=8){let t=(0,W.calculateDiskSizeRequiredForIopsWithGp3)(o);a.addIssue({code:Q.z.ZodIssueCode.custom,message:`Larger Disk size of at least ${(0,W.formatNumber)(t)} GB required. Current max is ${(0,W.formatNumber)(e)} IOPS.`,path:["provisionedIOPS"]})}else a.addIssue({code:Q.z.ZodIssueCode.custom,message:"Invalid IOPS value due to invalid disk size",path:["provisionedIOPS"]});if(void 0!==s){let e=Math.min(.25*o,1e3);if(s>Y.DISK_LIMITS.gp3.maxThroughput&&a.addIssue({code:Q.z.ZodIssueCode.custom,message:`Throughput can not exceed ${(0,W.formatNumber)(e)} MB/s`,path:["throughput"]}),s>e){let e=(0,W.calculateIopsRequiredForThroughput)(s);a.addIssue({code:Q.z.ZodIssueCode.custom,message:`Need at least ${(0,W.formatNumber)(e)} IOPS to support ${(0,W.formatNumber)(s)} MB/s.`,path:["throughput"]})}s<Y.DISK_LIMITS[Y.DiskType.GP3].minThroughput&&a.addIssue({code:Q.z.ZodIssueCode.custom,message:`Throughput must be at least ${(0,W.formatNumber)(Y.DISK_LIMITS[Y.DiskType.GP3].minThroughput)} MB/s`,path:["throughput"]})}n>Y.DISK_LIMITS[Y.DiskType.GP3].maxStorage&&a.addIssue({code:Q.z.ZodIssueCode.custom,message:`Allocated disksize must not exceed ${(0,W.formatNumber)(Y.DISK_LIMITS[Y.DiskType.GP3].maxStorage)} GB`,path:["totalSize"]})}})})({defaultTotalSize:eE.totalSize,cloudProvider:x?.cloud_provider})),defaultValues:eE,mode:"onBlur",reValidateMode:"onChange"});(0,s.useEffect)(()=>{if(!eb)return;let{type:e,iops:t,throughput_mbps:r,size_gb:a}=ey?.attributes??{size_gb:0};"requested_modification"in ey?eu(2e3):!1!==ed&&(eL.reset({storageType:e,provisionedIOPS:t,throughput:r,totalSize:a}),eu(!1),c.toast.success("Disk configuration changes have been successfully applied!"))},[ey,eb,eL,ed]);let{computeSize:eR}=eL.watch();(0,s.useEffect)(()=>{eR&&x?.infra_compute_size&&el&&Y.RESTRICTED_COMPUTE_FOR_THROUGHPUT_ON_GP3.includes(eR)&&(eL.setValue("storageType",Y.DiskType.GP3),eL.setValue("throughput",Y.DISK_LIMITS.gp3.minThroughput),eL.setValue("provisionedIOPS",Y.DISK_LIMITS.gp3.minIops))},[eR,el,x]);let eV=ev&&eb&&eI&&ex&&eT&&eS,eM=ey?.requested_modification!==void 0,eF=(eg??[]).filter(t=>t.identifier!==e),eG=!eo,{formState:eB}=eL,eU=Math.round((eP?.metrics.fs_used_bytes??0)/L.GB*100)/100,eK=eB.defaultValues?.totalSize||0,e$=!O&&Y.RESTRICTED_COMPUTE_FOR_THROUGHPUT_ON_GP3.includes(eR),eq=x?.parent_project_ref!==void 0,eQ=eM||eG||ej||O||!ei||!et,eW=!!Object.keys(eL.formState.dirtyFields).length,eY=x?.status===R.PROJECT_STATUS.RESIZING,eZ=eM&&!eY,eH=en&&!ei,{mutateAsync:eX,isPending:eJ}=(0,g.useUpdateDiskAttributesMutation)({onError:()=>{},onSuccess:()=>eu(2e3)}),{mutateAsync:e0,isPending:e1}=(0,w.useProjectAddonUpdateMutation)({onError:()=>{},onSuccess:()=>{e&&v({ref:e,status:R.PROJECT_STATUS.RESIZING})}}),{mutateAsync:e2,isPending:e3}=(({onSuccess:e,onError:t,...r}={})=>{let a=(0,P.useQueryClient)();return(0,S.useMutation)({mutationFn:e=>I(e),async onSuccess(t,r,i){let{projectRef:n}=r;await a.invalidateQueries({queryKey:b.configKeys.diskAutoscaleConfig(n)}),await e?.(t,r,i)},async onError(e,r,a){void 0===t?c.toast.error(`Failed to update disk autoscale config: ${e.message}`):t(e,r,a)},...r})})({onError:()=>{}}),e5=async t=>{let r=!1;em(null);try{er||ea||t.storageType===eL.formState.defaultValues?.storageType&&t.provisionedIOPS===eL.formState.defaultValues?.provisionedIOPS&&t.throughput===eL.formState.defaultValues?.throughput&&t.totalSize===eL.formState.defaultValues?.totalSize||(r=!0,await eX({ref:e,provisionedIOPS:t.provisionedIOPS,storageType:t.storageType,totalSize:t.totalSize,throughput:t.throughput})),er||ea||t.growthPercent===eL.formState.defaultValues?.growthPercent&&t.minIncrementGb===eL.formState.defaultValues?.minIncrementGb&&t.maxSizeGb===eL.formState.defaultValues?.maxSizeGb||await e2({projectRef:e,growthPercent:t.growthPercent,minIncrementGb:t.minIncrementGb,maxSizeGb:t.maxSizeGb}),t.computeSize!==eL.formState.defaultValues?.computeSize&&await e0({projectRef:e,variant:t.computeSize,type:"compute_instance",suppressToast:!0}),ec(!1),eL.reset(t),c.toast.success(`Successfully updated disk settings!${r?" The requested changes will be applied to your disk shortly.":""}`)}catch(e){em({message:e instanceof Error?e.message:"An unknown error occurred",type:"error"})}};return(0,s.useEffect)(()=>{(eb||eV)&&eL.reset(eE,{})},[eV,eb]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(u.ScaffoldContainer,{className:"relative flex flex-col gap-10",bottomPadding:!0,children:[es&&eG&&(0,t.jsx)(f.UpgradeToPro,{featureProposition:"configure compute and disk",primaryText:"Compute and Disk configuration is not available on the Free Plan",secondaryText:"You will need to upgrade to at least the Pro Plan to configure compute and disk"}),(eY||eZ||es&&!eG&&eH)&&(0,t.jsxs)("div",{className:"relative flex flex-col gap-10",children:[(0,t.jsx)(ee,{visible:eY,title:"Your project will now automatically restart.",description:"Your project will be unavailable for up to 2 mins."}),(0,t.jsx)(t4.NoticeBar,{type:"default",visible:eZ,title:"Disk configuration changes have been requested",description:"The requested changes will be applied to your disk shortly"}),(0,t.jsx)(t4.NoticeBar,{type:"default",visible:es&&!eG&&eH,title:"You do not have permission to update disk configuration",description:"Please contact your organization administrator to update your disk configuration"})]}),(0,t.jsx)(K.Separator,{})]}),(0,t.jsx)(U.Form_Shadcn_,{...eL,children:(0,t.jsxs)("form",{id:"disk-compute-form",onSubmit:eL.handleSubmit(e5),className:"flex flex-col gap-8",children:[(0,t.jsxs)(u.ScaffoldContainer,{className:"relative flex flex-col gap-10",bottomPadding:!0,children:[(0,t.jsx)(t8,{form:eL,disabled:eG}),!(et||ea)&&(0,t.jsx)(K.Separator,{}),(0,t.jsx)(r_,{}),(0,t.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,t.jsx)(t4.NoticeBar,{type:"default",visible:!(et||ea),title:"Disk configuration is only available for projects in the AWS cloud provider",description:er?"Configuring your disk for AWS (Revamped) projects is unavailable for now.":eq?"Delete and recreate your Preview Branch to configure disk size. It was deployed on an older branching infrastructure.":"The Fly Postgres offering is deprecated - please migrate your instance to the AWS cloud prov to configure your disk."}),et&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,t.jsx)(rO,{}),!J&&eU/eK*100>=90&&ej&&(0,t.jsx)($.Admonition,{type:"destructive",title:"Database size is currently over 90% of disk size",description:"Your project will enter read-only mode once you reach 95% of the disk space to prevent your database from exceeding the disk limitations",children:(0,t.jsx)(p.DocsButton,{abbrev:!1,className:"mt-2",href:`${L.DOCS_URL}/guides/platform/database-size#read-only-mode`})}),J&&(0,t.jsx)($.Admonition,{type:"destructive",title:"Project is currently in read-only mode",description:"You will need to manually override read-only mode and reduce the database size to below 95% of the disk size",children:(0,t.jsx)(p.DocsButton,{abbrev:!1,className:"mt-2",href:`${L.DOCS_URL}/guides/platform/database-size#disabling-read-only-mode`})})]}),(0,t.jsx)(rp,{form:eL,disableInput:eQ,setAdvancedSettingsOpenState:eh})]})]}),et&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(K.Separator,{}),(0,t.jsxs)(F.Collapsible_Shadcn_,{className:"-space-y-px",open:ef,onOpenChange:()=>eh(e=>!e),children:[(0,t.jsxs)(B.CollapsibleTrigger_Shadcn_,{className:"px-[var(--card-padding-x)] py-3 w-full border flex items-center gap-6 rounded-t data-[state=closed]:rounded-b group justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col items-start",children:[(0,t.jsx)("span",{className:"text-sm text-foreground",children:"Advanced disk settings"}),(0,t.jsx)("span",{className:"text-sm text-foreground-light text-left",children:"Specify additional settings for your disk, including autoscaling configuration, IOPS, throughput, and disk type."})]}),(0,t.jsx)(o.ChevronRight,{size:16,className:"text-foreground-light transition-all group-data-[state=open]:rotate-90",strokeWidth:1})]}),(0,t.jsx)(G.CollapsibleContent_Shadcn_,{className:(0,M.cn)("transition-all rounded-b","data-[state=open]:border data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down"),children:(0,t.jsxs)("div",{className:"flex flex-col gap-y-8 py-8",children:[(0,t.jsx)("div",{className:"px-[var(--card-padding-x)] flex flex-col gap-y-8",children:(0,t.jsx)(tW,{form:eL})}),(0,t.jsx)(K.Separator,{}),(0,t.jsxs)("div",{className:"px-[var(--card-padding-x)] flex flex-col gap-y-8",children:[(0,t.jsx)(t4.NoticeBar,{type:"default",visible:e$,title:"Adjusting disk configuration requires LARGE Compute size or above",description:`Increase your compute size to adjust your disk's storage type, ${"gp3"===eL.getValues("storageType")?"IOPS, ":""} and throughput`,actions:ei?(0,t.jsx)(V.Button,{type:"default",onClick:()=>{eL.setValue("computeSize","ci_large")},children:"Change to LARGE Compute"}):(0,t.jsx)(m.RequestUpgradeToBillingOwners,{addon:"computeSize",featureProposition:"adjust disk configuration"})}),(0,t.jsx)(rj,{form:eL,disableInput:e$||eQ}),(0,t.jsx)(rf,{form:eL,disableInput:e$||eQ}),(0,t.jsx)(rS,{form:eL,disableInput:e$||eQ})]})]})})]})]})]}),(0,t.jsx)(i.AnimatePresence,{children:eW?(0,t.jsx)(n.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.1,delay:.2},className:"z-10 w-full left-0 right-0 sticky bottom-0 bg-surface-100 border-t h-16 items-center flex",children:(0,t.jsxs)("div",{className:(0,M.cn)(u.MAX_WIDTH_CLASSES,u.PADDING_CLASSES,"flex items-center gap-3 justify-end"),children:[(0,t.jsx)(q,{formState:eB}),(0,t.jsx)(V.Button,{type:"default",onClick:()=>eL.reset(),disabled:!eW,size:"medium",children:"Cancel"}),(0,t.jsx)(tM,{loading:eJ||e1||e3,disabled:eH,form:eL,numReplicas:eF.length,isDialogOpen:el,onSubmit:e5,setIsDialogOpen:ec,message:ep})]})}):null})]})})]})}var rw=e.i(448710),rk=e.i(865389);let rz=()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.ScaffoldContainer,{children:(0,t.jsxs)(u.ScaffoldHeader,{children:[(0,t.jsx)(u.ScaffoldTitle,{children:"Compute and Disk"}),(0,t.jsx)(u.ScaffoldDescription,{children:"Configure the compute and disk settings for your project."})]})}),(0,t.jsx)(rN,{})]});rz.getLayout=e=>(0,t.jsx)(rw.default,{children:(0,t.jsx)(rk.default,{children:e})}),e.s(["default",0,rz],268796)},304896,(e,t,r)=>{let a="/project/[ref]/settings/compute-and-disk";(window.__NEXT_P=window.__NEXT_P||[]).push([a,()=>e.r(268796)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([a])})}]);

//# debugId=02c0c118-87bf-1cd0-cc7a-3c4a57336051
//# sourceMappingURL=62a583decd5c6a41.js.map